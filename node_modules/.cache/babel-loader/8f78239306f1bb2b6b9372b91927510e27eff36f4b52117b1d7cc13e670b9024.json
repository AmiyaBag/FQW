{"ast":null,"code":"var _jsxFileName = \"D:\\\\Amina\\\\VScode\\\\FQW_new\\\\src\\\\components\\\\AdminPanel.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport './AdminPanel.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst apiUrl = process.env.REACT_APP_API_URL; // Вынесем в глобальную область видимости файла\n\n// --- Вспомогательная функция для форматирования даты ---\nconst formatDate = (dateStr, type = 'date') => {\n  if (!dateStr) return ''; // Возвращаем пустую строку для input[type=date] или для отображения\n  try {\n    const date = new Date(dateStr);\n    if (isNaN(date.getTime())) return ''; // Некорректная дата\n\n    if (type === 'datetime-local') {\n      // Формат YYYY-MM-DDTHH:mm (пример) - нужен для input type=\"datetime-local\"\n      // Корректируем под часовой пояс, чтобы избежать смещения на день назад/вперед\n      const offset = date.getTimezoneOffset();\n      const adjustedDate = new Date(date.getTime() - offset * 60 * 1000);\n      return adjustedDate.toISOString().slice(0, 16);\n    } else if (type === 'date') {\n      // Формат YYYY-MM-DD (нужен для input type=\"date\")\n      const year = date.getFullYear();\n      const month = (date.getMonth() + 1).toString().padStart(2, '0');\n      const day = date.getDate().toString().padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    } else {\n      // Формат DD.MM.YYYY (для отображения в таблице)\n      return date.toLocaleDateString('ru-RU');\n    }\n  } catch (e) {\n    console.error(\"Ошибка форматирования даты:\", dateStr, e);\n    return ''; // Возвращаем пустую строку при ошибке\n  }\n};\n\n// --- Компонент AddItemForm (БЕЗ ИЗМЕНЕНИЙ) ---\nconst AddItemForm = ({\n  type,\n  onSave,\n  onCancel,\n  programTypes = [],\n  allOrganizations = []\n}) => {\n  _s();\n  // ... (код AddItemForm остается прежним) ...\n  const [newItem, setNewItem] = useState({});\n  useEffect(() => {\n    setNewItem({});\n  }, [type]);\n  const handleChange = (field, value) => {\n    setNewItem(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSave(newItem);\n    setNewItem({});\n  };\n  const handleCancel = e => {\n    e.preventDefault();\n    setNewItem({});\n    onCancel();\n  };\n  if (type === 'programs') {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"add-form\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0443\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u044B\",\n        required: true,\n        value: newItem.Name_ProgDPO || '',\n        onChange: e => handleChange('Name_ProgDPO', e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        required: true,\n        value: newItem.id_type || '',\n        onChange: e => handleChange('id_type', e.target.value),\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          disabled: true,\n          children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0438\\u043F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 123\n        }, this), \" \", programTypes.map(pt => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: pt.id_type,\n          children: pt.Name_Type\n        }, pt.id_type, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 195\n        }, this)), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        required: true,\n        value: newItem.ID_Org || '',\n        onChange: e => handleChange('ID_Org', e.target.value),\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          disabled: true,\n          children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 121\n        }, this), \" \", allOrganizations.map(org => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: org.ID_Org,\n          children: org.FName\n        }, org.ID_Org, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 206\n        }, this)), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 48\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleCancel,\n          children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 89\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 18\n    }, this);\n  }\n  if (type === 'organizations') {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"add-form\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",\n        required: true,\n        value: newItem.FName || '',\n        onChange: e => handleChange('FName', e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",\n        required: true,\n        value: newItem.SName || '',\n        onChange: e => handleChange('SName', e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 43\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleCancel,\n          children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 84\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 12\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }, this);\n  }\n  if (type === 'kks') {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"add-form\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C KKS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 KKS\",\n        required: true,\n        value: newItem.Name_KKS || '',\n        onChange: e => handleChange('Name_KKS', e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E\\u0435 \\u043E\\u0431\\u043E\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435\",\n        value: newItem.SName_KKS || '',\n        onChange: e => handleChange('SName_KKS', e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 43\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleCancel,\n          children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 84\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 12\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 18\n    }, this);\n  }\n  return null;\n};\n\n// --- Компонент WorkerForm (БЕЗ ИЗМЕНЕНИЙ) ---\n_s(AddItemForm, \"Ma3KGYVnITn2jfncCAugbkt84zE=\");\n_c = AddItemForm;\nconst WorkerForm = ({\n  initialData = {},\n  onSave,\n  onCancel,\n  isEditing = false\n}) => {\n  _s2();\n  const [workerData, setWorkerData] = useState(initialData);\n  const [newPassword, setNewPassword] = useState('');\n  useEffect(() => {\n    setWorkerData({\n      ...initialData,\n      Role: initialData.Role !== undefined ? initialData.Role : '',\n      JobTitle: initialData.JobTitle || '',\n      // Добавлено\n      PlaceWork: initialData.PlaceWork || '',\n      // Добавлено\n      Degree: initialData.Degree || '',\n      // Добавлено\n      Rank: initialData.Rank || '' // Добавлено\n    });\n    setNewPassword('');\n  }, [initialData]);\n  const handleChange = (field, value) => {\n    setWorkerData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handlePasswordChange = e => {\n    setNewPassword(e.target.value);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    const dataToSend = {\n      ...workerData\n    };\n    if (newPassword) {\n      dataToSend.Password = newPassword;\n    } else if (!isEditing) {\n      alert('Пароль обязателен при создании пользователя.');\n      return;\n    }\n    onSave(dataToSend);\n  };\n  const handleCancelClick = e => {\n    e.preventDefault();\n    onCancel();\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"add-form user-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: isEditing ? `Редактировать работника (ID: ${workerData.ID_Worker})` : 'Добавить работника'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u0424\\u0418\\u041E \\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A\\u0430\",\n      required: true,\n      value: workerData.FName_Worker || '',\n      onChange: e => handleChange('FName_Worker', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u0414\\u043E\\u043B\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C\",\n      required: true,\n      value: workerData.JobTitle || '',\n      onChange: e => handleChange('JobTitle', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u041C\\u0435\\u0441\\u0442\\u043E \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B\",\n      required: true,\n      value: workerData.PlaceWork || '',\n      onChange: e => handleChange('PlaceWork', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u0423\\u0447\\u0435\\u043D\\u0430\\u044F \\u0441\\u0442\\u0435\\u043F\\u0435\\u043D\\u044C\",\n      value: workerData.Degree || '',\n      onChange: e => handleChange('Degree', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u0417\\u0432\\u0430\\u043D\\u0438\\u0435\",\n      value: workerData.Rank || '',\n      onChange: e => handleChange('Rank', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\",\n      required: true,\n      value: workerData.Login || '',\n      onChange: e => handleChange('Login', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      placeholder: isEditing ? 'Новый пароль (оставьте пустым, чтобы не менять)' : 'Пароль',\n      value: newPassword,\n      onChange: handlePasswordChange,\n      required: !isEditing\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      required: true,\n      value: workerData.Role,\n      onChange: e => handleChange('Role', parseInt(e.target.value, 10)),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        disabled: true,\n        children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u043E\\u043B\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: 0,\n        children: \"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A \\u041E\\u0423\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: 1,\n        children: \"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A \\u0426\\u0414\\u041E (\\u0410\\u0434\\u043C\\u0438\\u043D)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleCancelClick,\n        children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 9\n  }, this);\n};\n\n// --- НОВЫЙ Компонент формы для Документов ---\n_s2(WorkerForm, \"1JY0PzQ6PzVXUUXZSXa4uoe2zeo=\");\n_c2 = WorkerForm;\nconst DocumentForm = ({\n  initialData = {},\n  onSave,\n  onCancel,\n  isEditing = false,\n  allWorkers = [],\n  allPrograms = []\n}) => {\n  _s3();\n  const [docData, setDocData] = useState({});\n  useEffect(() => {\n    // Инициализация формы данными для редактирования или пустыми значениями\n    // Преобразуем даты в формат YYYY-MM-DD для input type=\"date\"\n    setDocData({\n      ID_Worker: initialData.ID_Worker || '',\n      ID_ProgDPO: initialData.ID_ProgDPO || '',\n      regnumber: initialData.regnumber || '',\n      formseries: initialData.formseries || '',\n      formnumber: initialData.formnumber || '',\n      DateIssue: formatDate(initialData.DateIssue, 'date'),\n      // Преобразование\n      DataStart: formatDate(initialData.DataStart, 'date'),\n      // Преобразование\n      DataEnd: formatDate(initialData.DataEnd, 'date') // Преобразование\n    });\n  }, [initialData]);\n  const handleChange = (field, value) => {\n    setDocData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    // Перед отправкой можно добавить валидацию, если нужно\n    const dataToSend = {\n      ...docData\n    };\n    // Если ID есть (при редактировании), добавляем его\n    if (isEditing && initialData.ID_Document) {\n      dataToSend.ID_Document = initialData.ID_Document;\n    }\n    onSave(dataToSend); // Вызываем колбэк сохранения\n  };\n  const handleCancelClick = e => {\n    e.preventDefault();\n    onCancel(); // Вызываем колбэк отмены\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"add-form document-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: isEditing ? `Редактировать документ (ID: ${initialData.ID_Document})` : 'Добавить документ'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"doc-worker\",\n      children: \"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      id: \"doc-worker\",\n      required: true,\n      value: docData.ID_Worker,\n      onChange: e => handleChange('ID_Worker', e.target.value ? parseInt(e.target.value, 10) : ''),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        disabled: true,\n        children: \"-- \\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A\\u0430 --\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this), allWorkers.map(w => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: w.ID_Worker,\n        children: [w.FName_Worker, \" (ID: \", w.ID_Worker, \")\"]\n      }, w.ID_Worker, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 38\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"doc-program\",\n      children: \"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0430 \\u0414\\u041F\\u041E:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      id: \"doc-program\",\n      required: true,\n      value: docData.ID_ProgDPO,\n      onChange: e => handleChange('ID_ProgDPO', e.target.value ? parseInt(e.target.value, 10) : ''),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        disabled: true,\n        children: \"-- \\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0443 --\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 18\n      }, this), allPrograms.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: p.ID_ProgDPO,\n        children: p.Name_ProgDPO\n      }, p.ID_ProgDPO, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 40\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"doc-regnumber\",\n      children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u043E\\u043D\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"doc-regnumber\",\n      type: \"text\",\n      placeholder: \"\\u0420\\u0435\\u0433. \\u043D\\u043E\\u043C\\u0435\\u0440\",\n      value: docData.regnumber,\n      onChange: e => handleChange('regnumber', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"doc-formseries\",\n      children: \"\\u0421\\u0435\\u0440\\u0438\\u044F \\u0444\\u043E\\u0440\\u043C\\u044B:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"doc-formseries\",\n      type: \"text\",\n      placeholder: \"\\u0421\\u0435\\u0440\\u0438\\u044F\",\n      value: docData.formseries,\n      onChange: e => handleChange('formseries', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"doc-formnumber\",\n      children: \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0444\\u043E\\u0440\\u043C\\u044B:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"doc-formnumber\",\n      type: \"text\",\n      placeholder: \"\\u041D\\u043E\\u043C\\u0435\\u0440\",\n      value: docData.formnumber,\n      onChange: e => handleChange('formnumber', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"doc-dateissue\",\n      children: \"\\u0414\\u0430\\u0442\\u0430 \\u0432\\u044B\\u0434\\u0430\\u0447\\u0438:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"doc-dateissue\",\n      type: \"date\",\n      value: docData.DateIssue,\n      onChange: e => handleChange('DateIssue', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"doc-datastart\",\n      children: \"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"doc-datastart\",\n      type: \"date\",\n      value: docData.DataStart,\n      onChange: e => handleChange('DataStart', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"doc-dataend\",\n      children: \"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"doc-dataend\",\n      type: \"date\",\n      value: docData.DataEnd,\n      onChange: e => handleChange('DataEnd', e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleCancelClick,\n        children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Основной компонент AdminPanel ---\n_s3(DocumentForm, \"llyjACacB9R8W9K/NzuyDSKgQg0=\");\n_c3 = DocumentForm;\nfunction AdminPanel() {\n  _s4();\n  // Состояния\n  const [activeTab, setActiveTab] = useState('programs'); // 'programs', 'organizations', 'kks', 'workers', 'documents'\n  const [programs, setPrograms] = useState([]);\n  const [organizations, setOrganizations] = useState([]);\n  const [kks, setKks] = useState([]);\n  const [workers, setWorkers] = useState([]);\n  const [documents, setDocuments] = useState([]); // <<< НОВОЕ СОСТОЯНИЕ ДЛЯ ДОКУМЕНТОВ\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [editingItem, setEditingItem] = useState(null);\n  const [addingItemType, setAddingItemType] = useState(null);\n  const [programTypes, setProgramTypes] = useState([]);\n  const [programTypesData, setProgramTypesData] = useState([]);\n  const [allOrganizations, setAllOrganizations] = useState([]);\n  const [allWorkers, setAllWorkers] = useState([]); // <<< НУЖНО ДЛЯ ФОРМЫ ДОКУМЕНТОВ\n  const [allPrograms, setAllPrograms] = useState([]); // <<< НУЖНО ДЛЯ ФОРМЫ ДОКУМЕНТОВ\n  const [sortConfig, setSortConfig] = useState({\n    key: null,\n    direction: 'ascending'\n  });\n  const navigate = useNavigate();\n  // apiUrl определен глобально выше\n\n  // Получение пользователя (без изменений)\n  const user = useMemo(() => {\n    /* ... */\n    const storedUser = localStorage.getItem('user');\n    try {\n      return storedUser ? JSON.parse(storedUser) : null;\n    } catch (e) {\n      console.error(\"Failed to parse user from localStorage\", e);\n      localStorage.removeItem('user');\n      return null;\n    }\n  }, []);\n\n  // --- Сортировка ---\n  const requestSort = key => {\n    /* ... */\n    let direction = 'ascending';\n    if (sortConfig.key === key && sortConfig.direction === 'ascending') {\n      direction = 'descending';\n    }\n    setSortConfig({\n      key,\n      direction\n    });\n  };\n  const getIdKeyForTab = tab => {\n    switch (tab) {\n      case 'programs':\n        return 'ID_ProgDPO';\n      case 'organizations':\n        return 'ID_Org';\n      case 'kks':\n        return 'ID_KKS';\n      case 'workers':\n        return 'ID_Worker';\n      case 'documents':\n        return 'ID_Document';\n      default:\n        return null;\n    }\n  };\n  useEffect(() => {\n    /* ... сброс сортировки и форм ... */\n    const idKey = getIdKeyForTab(activeTab);\n    if (idKey) {\n      setSortConfig({\n        key: idKey,\n        direction: 'ascending'\n      });\n    } else {\n      setSortConfig({\n        key: null,\n        direction: 'ascending'\n      });\n    }\n    setEditingItem(null);\n    setAddingItemType(null);\n  }, [activeTab]);\n\n  // --- Загрузка данных ---\n  const fetchData = useCallback(async () => {\n    if (!user || user.role !== 1) {\n      console.warn(\"fetchData called without admin user, aborting.\");\n      setLoading(false);\n      setError(\"Доступ запрещен. Требуются права администратора.\");\n      return;\n    }\n    setLoading(true);\n    setError('');\n    console.log(`Fetching data for active tab: ${activeTab}`);\n    try {\n      let response;\n      let endpoint;\n      let config = {};\n      switch (activeTab) {\n        case 'programs':\n          endpoint = `${apiUrl}/api/programs`;\n          break;\n        case 'organizations':\n          endpoint = `${apiUrl}/api/organizations`;\n          break;\n        case 'kks':\n          endpoint = `${apiUrl}/api/kks`;\n          break;\n        case 'workers':\n          endpoint = `${apiUrl}/api/workers/admin`;\n          break;\n        case 'documents':\n          endpoint = `${apiUrl}/api/documents`;\n          if (user !== null && user !== void 0 && user.workerId && (user === null || user === void 0 ? void 0 : user.role) !== undefined) {\n            config.params = {\n              userId: user.workerId,\n              role: user.role\n            };\n          }\n          break;\n        default:\n          console.warn(`Unknown activeTab: ${activeTab}`);\n          setLoading(false);\n          return;\n      }\n      console.log(`Attempting to fetch ${endpoint}...`, config);\n      response = await axios.get(endpoint, config);\n      console.log(`Received response from ${endpoint}`, response.status);\n      const responseData = Array.isArray(response.data) ? response.data : [];\n      if (!Array.isArray(response.data)) {\n        console.warn(`API endpoint ${endpoint} did not return an array.`);\n      }\n      switch (activeTab) {\n        case 'programs':\n          setPrograms(responseData);\n          break;\n        case 'organizations':\n          setOrganizations(responseData);\n          break;\n        case 'kks':\n          setKks(responseData);\n          break;\n        case 'workers':\n          setWorkers(responseData);\n          break;\n        case 'documents':\n          setDocuments(responseData);\n          break;\n      }\n    } catch (err) {\n      console.error(`Error fetching ${activeTab}:`, err.response || err.message || err);\n      const mainErrorMsg = `Ошибка загрузки данных для вкладки \"${activeTab}\".`;\n      setError(prev => prev ? `${prev}\\n${mainErrorMsg}` : mainErrorMsg);\n      switch (activeTab) {\n        case 'programs':\n          setPrograms([]);\n          break;\n        case 'organizations':\n          setOrganizations([]);\n          break;\n        case 'kks':\n          setKks([]);\n          break;\n        case 'workers':\n          setWorkers([]);\n          break;\n        case 'documents':\n          setDocuments([]);\n          break;\n      }\n    } finally {\n      console.log(`Setting loading to false for ${activeTab}.`);\n      setLoading(false);\n    }\n  }, [activeTab, user, apiUrl]); // Убрали зависимости, которые обновляются внутри\n\n  useEffect(() => {\n    if (!user || user.role !== 1) {\n      navigate('/login');\n      return;\n    }\n    fetchData();\n  }, [user, navigate, fetchData]);\n  useEffect(() => {\n    const loadAuxiliaryData = async () => {\n      try {\n        console.log(\"Fetching auxiliary data (types, orgs, workers, programs)...\");\n        const endpoints = [`${apiUrl}/api/program-types`, `${apiUrl}/api/programs/types`, `${apiUrl}/api/organizations`, `${apiUrl}/api/workers/admin`, `${apiUrl}/api/programs`];\n        const [typesRes, typesForFormRes, orgsRes, workersRes, progsRes] = await Promise.all(endpoints.map(url => axios.get(url)));\n        setProgramTypes(typesForFormRes.data || []); // Для dropdown в формах\n        setProgramTypesData(typesRes.data || []);\n        setAllOrganizations(orgsRes.data || []);\n        setAllWorkers(workersRes.data || []);\n        setAllPrograms(progsRes.data || []);\n        console.log(\"Auxiliary data fetched on mount.\");\n      } catch (err) {\n        console.error('Error fetching auxiliary data:', err);\n        const auxErrorMsg = 'Ошибка загрузки вспомогательных данных.';\n        setError(prev => prev ? `${prev}\\n${auxErrorMsg}` : auxErrorMsg);\n      }\n    };\n    if ((user === null || user === void 0 ? void 0 : user.role) === 1 && (programTypes.length === 0 || allOrganizations.length === 0 || allWorkers.length === 0 || allPrograms.length === 0)) {\n      loadAuxiliaryData();\n    }\n  }, [user === null || user === void 0 ? void 0 : user.role, apiUrl, programTypes.length, allOrganizations.length, allWorkers.length, allPrograms.length]);\n\n  // --- Мемоизированные отсортированные списки ---\n  const sortedPrograms = useMemo(() => {\n    let sortableItems = [...programs];\n    if (sortConfig.key) {\n      sortableItems.sort((a, b) => {\n        if (a[sortConfig.key] < b[sortConfig.key]) {\n          return sortConfig.direction === 'ascending' ? -1 : 1;\n        }\n        if (a[sortConfig.key] > b[sortConfig.key]) {\n          return sortConfig.direction === 'ascending' ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n    return sortableItems;\n  }, [programs, sortConfig]);\n  const sortedOrganizations = useMemo(() => {\n    let sortableItems = [...organizations];\n    if (sortConfig.key) {\n      sortableItems.sort((a, b) => {\n        const valA = a[sortConfig.key];\n        const valB = b[sortConfig.key];\n        const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA).localeCompare(String(valB));\n        return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\n      });\n    }\n    return sortableItems;\n  }, [organizations, sortConfig]);\n  const sortedKks = useMemo(() => {\n    let sortableItems = [...kks];\n    if (sortConfig.key) {\n      sortableItems.sort((a, b) => {\n        const valA = a[sortConfig.key];\n        const valB = b[sortConfig.key];\n        const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA).localeCompare(String(valB));\n        return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\n      });\n    }\n    return sortableItems;\n  }, [kks, sortConfig]);\n  const sortedWorkers = useMemo(() => {\n    let sortableItems = [...workers];\n    if (sortConfig.key) {\n      sortableItems.sort((a, b) => {\n        const valA = a[sortConfig.key];\n        const valB = b[sortConfig.key];\n        if (sortConfig.key === 'Role' && typeof valA === 'number' && typeof valB === 'number') {\n          return sortConfig.direction === 'ascending' ? valA - valB : valB - valA;\n        }\n        if (sortConfig.key === 'FName_Worker') {\n          const nameA = String(valA !== null && valA !== void 0 ? valA : '').toLowerCase();\n          const nameB = String(valB !== null && valB !== void 0 ? valB : '').toLowerCase();\n          if (nameA < nameB) return sortConfig.direction === 'ascending' ? -1 : 1;\n          if (nameA > nameB) return sortConfig.direction === 'ascending' ? 1 : -1;\n          return 0;\n        }\n        const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA !== null && valA !== void 0 ? valA : '').localeCompare(String(valB !== null && valB !== void 0 ? valB : ''));\n        return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\n      });\n    }\n    return sortableItems;\n  }, [workers, sortConfig]);\n  const sortedDocuments = useMemo(() => {\n    let sortableItems = [...documents];\n    if (sortConfig.key) {\n      sortableItems.sort((a, b) => {\n        const valA = a[sortConfig.key];\n        const valB = b[sortConfig.key];\n\n        // Сортировка по дате\n        if (['DateIssue', 'DataStart', 'DataEnd'].includes(sortConfig.key)) {\n          const dateA = valA ? new Date(valA).getTime() : 0;\n          const dateB = valB ? new Date(valB).getTime() : 0;\n          if (isNaN(dateA) && isNaN(dateB)) return 0;\n          if (isNaN(dateA)) return sortConfig.direction === 'ascending' ? -1 : 1; // nulls/invalid first or last\n          if (isNaN(dateB)) return sortConfig.direction === 'ascending' ? 1 : -1;\n          return sortConfig.direction === 'ascending' ? dateA - dateB : dateB - dateA;\n        }\n\n        // Сортировка по имени работника или программы\n        if (['WorkerName', 'ProgramName'].includes(sortConfig.key)) {\n          const strA = String(valA !== null && valA !== void 0 ? valA : '').toLowerCase();\n          const strB = String(valB !== null && valB !== void 0 ? valB : '').toLowerCase();\n          if (strA < strB) return sortConfig.direction === 'ascending' ? -1 : 1;\n          if (strA > strB) return sortConfig.direction === 'ascending' ? 1 : -1;\n          return 0;\n        }\n\n        // Общая сортировка\n        const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA !== null && valA !== void 0 ? valA : '').localeCompare(String(valB !== null && valB !== void 0 ? valB : ''));\n        return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\n      });\n    }\n    return sortableItems;\n  }, [documents, sortConfig]);\n\n  // --- Обработчики CRUD ---\n  const handleEdit = item => {\n    setEditingItem(item);\n    setAddingItemType(null);\n  };\n  const handleCancel = () => {\n    setEditingItem(null);\n  };\n  const handleChangeInline = (field, value) => {\n    setEditingItem(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleSave = async editedData => {\n    const itemToSave = editedData || editingItem;\n    if (!itemToSave) return;\n    const idKey = getIdKeyForTab(activeTab);\n    const id = itemToSave[idKey];\n    if (id === undefined && activeTab !== 'documents') {\n      // Для документов ID может не быть в itemToSave из формы\n      if (activeTab === 'documents' && editingItem !== null && editingItem !== void 0 && editingItem.ID_Document) {\n        // Берем ID из исходного editingItem для документов\n        id = editingItem.ID_Document;\n        itemToSave.ID_Document = id; // Добавляем ID обратно для PUT запроса, если нужно\n      } else {\n        console.error(\"Cannot save item without ID\", itemToSave);\n        setError(\"Не удалось определить ID для сохранения.\");\n        return;\n      }\n    }\n    console.log(`Saving edited item (ID: ${id}, Tab: ${activeTab}):`, itemToSave);\n    setLoading(true);\n    setError('');\n    try {\n      let endpoint;\n      switch (activeTab) {\n        case 'programs':\n          endpoint = `${apiUrl}/api/programs/${id}`;\n          break;\n        case 'organizations':\n          endpoint = `${apiUrl}/api/organizations/${id}`;\n          break;\n        case 'kks':\n          endpoint = `${apiUrl}/api/kks/${id}`;\n          break;\n        case 'workers':\n          endpoint = `${apiUrl}/api/workers/${id}`;\n          break;\n        case 'documents':\n          endpoint = `${apiUrl}/api/documents/${id}`;\n          break;\n        // <<< ДОБАВЛЕНО (нужен PUT /api/documents/:id)\n        default:\n          throw new Error(\"Неизвестная вкладка для сохранения\");\n      }\n      await axios.put(endpoint, itemToSave);\n      setEditingItem(null);\n      await fetchData();\n      console.log(`Item (ID: ${id}) saved successfully.`);\n    } catch (err) {\n      var _err$response, _err$response2, _err$response2$data;\n      console.error('Ошибка при сохранении изменений:', ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message || err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Ошибка при сохранении данных');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleShowAddForm = () => {\n    setAddingItemType(activeTab);\n    setEditingItem(null);\n  };\n  const handleCancelAdd = () => {\n    setAddingItemType(null);\n  };\n  const handleAddItem = async newItemData => {\n    // Добавление (POST)\n    const type = addingItemType;\n    if (!type) return;\n    console.log(`Adding new ${type}:`, newItemData);\n    setLoading(true);\n    setError('');\n    try {\n      let endpoint;\n      switch (type) {\n        case 'programs':\n          endpoint = `${apiUrl}/api/programs`;\n          break;\n        case 'organizations':\n          endpoint = `${apiUrl}/api/organizations`;\n          break;\n        case 'kks':\n          endpoint = `${apiUrl}/api/kks`;\n          break;\n        case 'workers':\n          endpoint = `${apiUrl}/api/workers`;\n          break;\n        case 'documents':\n          endpoint = `${apiUrl}/api/documents`;\n          break;\n        default:\n          throw new Error(\"Неизвестный тип для добавления\");\n      }\n      await axios.post(endpoint, newItemData);\n      setAddingItemType(null);\n      await fetchData();\n      console.log(`Item of type ${type} added successfully.`);\n    } catch (err) {\n      var _err$response3, _err$response4, _err$response4$data;\n      console.error(`Ошибка при добавлении ${type}:`, ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.data) || err.message || err);\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.error) || `Ошибка при добавлении элемента`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDelete = async idToDelete => {\n    // Удаление (DELETE)\n    if (!window.confirm('Вы уверены, что хотите удалить этот элемент?')) {\n      return;\n    }\n    const idKey = getIdKeyForTab(activeTab);\n    console.log(`Deleting item with ID: ${idToDelete} (Key: ${idKey}) on tab: ${activeTab}`);\n    setLoading(true);\n    setError('');\n    try {\n      let endpoint;\n      switch (activeTab) {\n        case 'programs':\n          endpoint = `${apiUrl}/api/programs/${idToDelete}`;\n          break;\n        case 'organizations':\n          endpoint = `${apiUrl}/api/organizations/${idToDelete}`;\n          break;\n        case 'kks':\n          endpoint = `${apiUrl}/api/kks/${idToDelete}`;\n          break;\n        case 'workers':\n          endpoint = `${apiUrl}/api/workers/${idToDelete}`;\n          break;\n        case 'documents':\n          endpoint = `${apiUrl}/api/documents/${idToDelete}`;\n          break;\n        // <<< ДОБАВЛЕНО (нужен DELETE /api/documents/:id)\n        default:\n          throw new Error(\"Неизвестная вкладка для удаления\");\n      }\n      await axios.delete(endpoint);\n      if (editingItem && editingItem[idKey] === idToDelete) {\n        setEditingItem(null);\n      }\n      await fetchData();\n      console.log(`Item (ID: ${idToDelete}) deleted successfully.`);\n    } catch (err) {\n      var _err$response5, _err$response6, _err$response6$data;\n      console.error(`Ошибка при удалении элемента (ID: ${idToDelete}):`, ((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : _err$response5.data) || err.message || err);\n      setError(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.error) || 'Ошибка при удалении элемента. Возможно, на него есть ссылки.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- Вспомогательные функции рендеринга ---\n  const displayRole = roleValue => {\n    /* ... */return roleValue === 1 ? 'Работник ЦДО' : roleValue === 0 ? 'Работник ОУ' : 'Неизвестно';\n  };\n  const renderSortableHeader = (label, key) =>\n  /*#__PURE__*/\n  /* ... */\n  _jsxDEV(\"th\", {\n    onClick: () => requestSort(key),\n    className: \"sortable-header\",\n    children: [\" \", label, \" \", sortConfig.key === key ? sortConfig.direction === 'ascending' ? ' ▲' : ' ▼' : ' ↕', \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 537,\n    columnNumber: 62\n  }, this);\n\n  // --- Основной рендеринг компонента ---\n  if (!user && loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430 \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438 \\u0438 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 540,\n    columnNumber: 34\n  }, this);\n  if (!user) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error\",\n    children: [\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F. \", /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate('/login'),\n      children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 87\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 541,\n    columnNumber: 23\n  }, this);\n  if (user.role !== 1) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error\",\n    children: \"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F \\u0437\\u0430\\u043F\\u0440\\u0435\\u0449\\u0435\\u043D.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 542,\n    columnNumber: 33\n  }, this);\n  const showLoadingIndicator = loading && !error;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/admin'),\n          className: \"back-button\",\n          children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            localStorage.removeItem('user');\n            navigate('/login');\n          },\n          className: \"logout-button\",\n          children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'programs' ? 'active' : ''}`,\n        onClick: () => setActiveTab('programs'),\n        children: \"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'organizations' ? 'active' : ''}`,\n        onClick: () => setActiveTab('organizations'),\n        children: \"\\u041E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'kks' ? 'active' : ''}`,\n        onClick: () => setActiveTab('kks'),\n        children: \"\\u041A\\u041A\\u0421\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'workers' ? 'active' : ''}`,\n        onClick: () => setActiveTab('workers'),\n        children: \"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'documents' ? 'active' : ''}`,\n        onClick: () => setActiveTab('documents'),\n        children: \"\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 13\n    }, this), showLoadingIndicator && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-inline\",\n      children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 38\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-inline\",\n      children: [error, \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(''),\n        title: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u043E\\u0448\\u0438\\u0431\\u043A\\u0443\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 61\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 568,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-content\",\n      children: [(addingItemType === 'workers' || editingItem && activeTab === 'workers') && /*#__PURE__*/_jsxDEV(WorkerForm, {\n        initialData: editingItem || {},\n        onSave: editingItem ? handleSave : handleAddItem,\n        onCancel: editingItem ? handleCancel : handleCancelAdd,\n        isEditing: !!editingItem\n      }, editingItem ? editingItem.ID_Worker : 'add-worker', false, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 99\n      }, this), addingItemType && addingItemType !== 'workers' && addingItemType !== 'documents' && /*#__PURE__*/_jsxDEV(AddItemForm, {\n        type: addingItemType,\n        onSave: handleAddItem,\n        onCancel: handleCancelAdd,\n        programTypes: programTypes,\n        allOrganizations: allOrganizations\n      }, `add-${addingItemType}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 105\n      }, this), (addingItemType === 'documents' || editingItem && activeTab === 'documents') && /*#__PURE__*/_jsxDEV(DocumentForm, {\n        initialData: editingItem || {},\n        onSave: editingItem ? handleSave : handleAddItem,\n        onCancel: editingItem ? handleCancel : handleCancelAdd,\n        isEditing: !!editingItem,\n        allWorkers: workers // Передаем список работников (не allWorkers, а текущий загруженный)\n        ,\n        allPrograms: allPrograms // Передаем список программ\n      }, editingItem ? editingItem.ID_Document : 'add-document', false, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 22\n      }, this), !editingItem && !addingItemType && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleShowAddForm,\n        className: \"add-button\",\n        children: [\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \", activeTab === 'programs' ? 'программу' : activeTab === 'organizations' ? 'организацию' : activeTab === 'kks' ? 'KKS' : activeTab === 'workers' ? 'работника' : activeTab === 'documents' ? 'документ' : '' // <<< ДОБАВЛЕНО\n        ]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 21\n      }, this), activeTab === 'programs' && /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [\" \", \" \", /*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [\" \", renderSortableHeader('№', 'ID_ProgDPO'), \" \", renderSortableHeader('Название', 'Name_ProgDPO'), \" \", renderSortableHeader('Тип', 'Name_Type'), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 256\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 115\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 108\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [\" \", sortedPrograms.map((program, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [\" \", (editingItem === null || editingItem === void 0 ? void 0 : editingItem.ID_ProgDPO) === program.ID_ProgDPO ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 422\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: editingItem.Name_ProgDPO,\n                  onChange: e => handleChangeInline('Name_ProgDPO', e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 448\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 443\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\" \", program.Name_Type || 'N/A', \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 578\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleSave(),\n                  children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 623\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleCancel,\n                  children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 679\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 618\n              }, this), \" \"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 743\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: program.Name_ProgDPO\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 764\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: program.Name_Type || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 796\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"actions-cell\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleEdit(program),\n                  disabled: !!addingItemType || !!editingItem,\n                  children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 864\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleDelete(program.ID_ProgDPO),\n                  className: \"delete-button\",\n                  disabled: !!addingItemType || !!editingItem,\n                  children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 970\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 834\n              }, this), \" \"]\n            }, void 0, true), \" \"]\n          }, program.ID_ProgDPO, true, {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 338\n          }, this)), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 288\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 48\n      }, this), activeTab === 'organizations' && /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [\" \", \" \", /*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [\" \", renderSortableHeader('№', 'ID_Org'), \" \", renderSortableHeader('Полное название', 'FName'), \" \", renderSortableHeader('Краткое название', 'SName'), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 267\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 121\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 114\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [\" \", sortedOrganizations.map((org, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [\" \", (editingItem === null || editingItem === void 0 ? void 0 : editingItem.ID_Org) === org.ID_Org ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 414\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: editingItem.FName,\n                  onChange: e => handleChangeInline('FName', e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 439\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 435\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: editingItem.SName,\n                  onChange: e => handleChangeInline('SName', e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 558\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 554\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSave,\n                  children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 678\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleCancel,\n                  children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 726\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 673\n              }, this), \" \"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 790\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: org.FName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 811\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: org.SName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 832\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"actions-cell\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleEdit(org),\n                  disabled: !!addingItemType || !!editingItem,\n                  children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 883\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleDelete(org.ID_Org),\n                  className: \"delete-button\",\n                  disabled: !!addingItemType || !!editingItem,\n                  children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 985\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 853\n              }, this), \" \"]\n            }, void 0, true), \" \"]\n          }, org.ID_Org, true, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 350\n          }, this)), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 299\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 54\n      }, this), activeTab === 'kks' && /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [\" \", \" \", /*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [\" \", renderSortableHeader('№', 'ID_KKS'), \" \", renderSortableHeader('Название', 'Name_KKS'), \" \", renderSortableHeader('Краткое обозначение', 'SName_KKS'), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 260\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 111\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 104\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [\" \", sortedKks.map((kksItem, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [\" \", (editingItem === null || editingItem === void 0 ? void 0 : editingItem.ID_KKS) === kksItem.ID_KKS ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 409\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: editingItem.Name_KKS,\n                  onChange: e => handleChangeInline('Name_KKS', e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 434\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 430\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: editingItem.SName_KKS,\n                  onChange: e => handleChangeInline('SName_KKS', e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 559\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 555\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSave,\n                  children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 687\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleCancel,\n                  children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 735\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 682\n              }, this), \" \"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 799\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: kksItem.Name_KKS\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 820\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: kksItem.SName_KKS\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 848\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"actions-cell\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleEdit(kksItem),\n                  disabled: !!addingItemType || !!editingItem,\n                  children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 907\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleDelete(kksItem.ID_KKS),\n                  className: \"delete-button\",\n                  disabled: !!addingItemType || !!editingItem,\n                  children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 1013\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 877\n              }, this), \" \"]\n            }, void 0, true), \" \"]\n          }, kksItem.ID_KKS, true, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 337\n          }, this)), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 292\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 44\n      }, this), activeTab === 'workers' && /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [renderSortableHeader('№', 'ID_Worker'), renderSortableHeader('Логин', 'Login'), renderSortableHeader('ФИО Работника', 'FName_Worker'), renderSortableHeader('Должность', 'JobTitle'), renderSortableHeader('Место работы', 'PlaceWork'), renderSortableHeader('Степень', 'Degree'), renderSortableHeader('Звание', 'Rank'), renderSortableHeader('Роль', 'Role'), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0421\\u0432\\u044F\\u0437\\u0430\\u043D\\u043D\\u044B\\u0435 KKS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 33\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: sortedWorkers.map((w, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: index + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: w.Login\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: w.FName_Worker\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: w.JobTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: w.PlaceWork\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: w.Degree || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: w.Rank || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: displayRole(w.Role)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: w.related_kks || 'Нет'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 37\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"actions-cell\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleEdit(w),\n                disabled: !!addingItemType || !!editingItem,\n                children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 639,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelete(w.ID_Worker),\n                className: \"delete-button\",\n                disabled: !!addingItemType || !!editingItem,\n                children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 638,\n              columnNumber: 37\n            }, this)]\n          }, w.ID_Worker, true, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 21\n      }, this), activeTab === 'documents' && /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [renderSortableHeader('№', 'ID_Document'), renderSortableHeader('Работник', 'WorkerName'), renderSortableHeader('Программа', 'ProgramName'), renderSortableHeader('Рег. номер', 'regnumber'), renderSortableHeader('Дата выдачи', 'DateIssue'), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: sortedDocuments.map((doc, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: index + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: doc.WorkerName || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: doc.ProgramName || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: doc.regnumber || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: formatDate(doc.DateIssue, 'display')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 37\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"actions-cell\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleEdit(doc),\n                disabled: !!addingItemType || !!editingItem,\n                children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelete(doc.ID_Document),\n                className: \"delete-button\",\n                disabled: !!addingItemType || !!editingItem,\n                children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 37\n            }, this)]\n          }, doc.ID_Document, true, {\n            fileName: _jsxFileName,\n            lineNumber: 665,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 13\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 546,\n    columnNumber: 9\n  }, this) // admin-panel\n  ;\n}\n_s4(AdminPanel, \"MC/+WG0JfC44WZmj95LQStqMtYM=\", false, function () {\n  return [useNavigate];\n});\n_c4 = AdminPanel;\nexport default AdminPanel;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"AddItemForm\");\n$RefreshReg$(_c2, \"WorkerForm\");\n$RefreshReg$(_c3, \"DocumentForm\");\n$RefreshReg$(_c4, \"AdminPanel\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","axios","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","apiUrl","process","env","REACT_APP_API_URL","formatDate","dateStr","type","date","Date","isNaN","getTime","offset","getTimezoneOffset","adjustedDate","toISOString","slice","year","getFullYear","month","getMonth","toString","padStart","day","getDate","toLocaleDateString","e","console","error","AddItemForm","onSave","onCancel","programTypes","allOrganizations","_s","newItem","setNewItem","handleChange","field","value","prev","handleSubmit","preventDefault","handleCancel","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","required","Name_ProgDPO","onChange","target","id_type","disabled","map","pt","Name_Type","ID_Org","org","FName","onClick","SName","Name_KKS","SName_KKS","_c","WorkerForm","initialData","isEditing","_s2","workerData","setWorkerData","newPassword","setNewPassword","Role","undefined","JobTitle","PlaceWork","Degree","Rank","handlePasswordChange","dataToSend","Password","alert","handleCancelClick","ID_Worker","FName_Worker","Login","parseInt","_c2","DocumentForm","allWorkers","allPrograms","_s3","docData","setDocData","ID_ProgDPO","regnumber","formseries","formnumber","DateIssue","DataStart","DataEnd","ID_Document","htmlFor","id","w","p","_c3","AdminPanel","_s4","activeTab","setActiveTab","programs","setPrograms","organizations","setOrganizations","kks","setKks","workers","setWorkers","documents","setDocuments","loading","setLoading","setError","editingItem","setEditingItem","addingItemType","setAddingItemType","setProgramTypes","programTypesData","setProgramTypesData","setAllOrganizations","setAllWorkers","setAllPrograms","sortConfig","setSortConfig","key","direction","navigate","user","storedUser","localStorage","getItem","JSON","parse","removeItem","requestSort","getIdKeyForTab","tab","idKey","fetchData","role","warn","log","response","endpoint","config","workerId","params","userId","get","status","responseData","Array","isArray","data","err","message","mainErrorMsg","loadAuxiliaryData","endpoints","typesRes","typesForFormRes","orgsRes","workersRes","progsRes","Promise","all","url","auxErrorMsg","length","sortedPrograms","sortableItems","sort","a","b","sortedOrganizations","valA","valB","compareResult","String","localeCompare","sortedKks","sortedWorkers","nameA","toLowerCase","nameB","sortedDocuments","includes","dateA","dateB","strA","strB","handleEdit","item","handleChangeInline","handleSave","editedData","itemToSave","Error","put","_err$response","_err$response2","_err$response2$data","handleShowAddForm","handleCancelAdd","handleAddItem","newItemData","post","_err$response3","_err$response4","_err$response4$data","handleDelete","idToDelete","window","confirm","delete","_err$response5","_err$response6","_err$response6$data","displayRole","roleValue","renderSortableHeader","label","showLoadingIndicator","title","program","index","kksItem","ID_KKS","related_kks","doc","WorkerName","ProgramName","_c4","$RefreshReg$"],"sources":["D:/Amina/VScode/FQW_new/src/components/AdminPanel.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './AdminPanel.css';\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL; // Вынесем в глобальную область видимости файла\r\n\r\n// --- Вспомогательная функция для форматирования даты ---\r\nconst formatDate = (dateStr, type = 'date') => {\r\n    if (!dateStr) return ''; // Возвращаем пустую строку для input[type=date] или для отображения\r\n    try {\r\n        const date = new Date(dateStr);\r\n        if (isNaN(date.getTime())) return ''; // Некорректная дата\r\n\r\n        if (type === 'datetime-local') {\r\n             // Формат YYYY-MM-DDTHH:mm (пример) - нужен для input type=\"datetime-local\"\r\n             // Корректируем под часовой пояс, чтобы избежать смещения на день назад/вперед\r\n             const offset = date.getTimezoneOffset();\r\n             const adjustedDate = new Date(date.getTime() - (offset*60*1000));\r\n             return adjustedDate.toISOString().slice(0, 16);\r\n        } else if (type === 'date') {\r\n             // Формат YYYY-MM-DD (нужен для input type=\"date\")\r\n             const year = date.getFullYear();\r\n             const month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n             const day = date.getDate().toString().padStart(2, '0');\r\n             return `${year}-${month}-${day}`;\r\n        } else {\r\n             // Формат DD.MM.YYYY (для отображения в таблице)\r\n             return date.toLocaleDateString('ru-RU');\r\n        }\r\n    } catch (e) {\r\n        console.error(\"Ошибка форматирования даты:\", dateStr, e);\r\n        return ''; // Возвращаем пустую строку при ошибке\r\n    }\r\n};\r\n\r\n\r\n// --- Компонент AddItemForm (БЕЗ ИЗМЕНЕНИЙ) ---\r\nconst AddItemForm = ({ type, onSave, onCancel, programTypes = [], allOrganizations = [] }) => {\r\n    // ... (код AddItemForm остается прежним) ...\r\n    const [newItem, setNewItem] = useState({});\r\n    useEffect(() => { setNewItem({}); }, [type]);\r\n    const handleChange = (field, value) => { setNewItem(prev => ({ ...prev, [field]: value })); };\r\n    const handleSubmit = (e) => { e.preventDefault(); onSave(newItem); setNewItem({}); };\r\n    const handleCancel = (e) => { e.preventDefault(); setNewItem({}); onCancel(); };\r\n\r\n    if (type === 'programs') {\r\n        return ( <form onSubmit={handleSubmit} className=\"add-form\"> {/* ... поля для программы ... */}\r\n             <h4>Добавить программу</h4>\r\n                <input type=\"text\" placeholder=\"Название программы\" required value={newItem.Name_ProgDPO || ''} onChange={(e) => handleChange('Name_ProgDPO', e.target.value)} />\r\n                <select required value={newItem.id_type || ''} onChange={(e) => handleChange('id_type', e.target.value)}> <option value=\"\" disabled>Выберите тип</option> {programTypes.map(pt => <option key={pt.id_type} value={pt.id_type}>{pt.Name_Type}</option>)} </select>\r\n                <select required value={newItem.ID_Org || ''} onChange={(e) => handleChange('ID_Org', e.target.value)}> <option value=\"\" disabled>Выберите организацию</option> {allOrganizations.map(org => <option key={org.ID_Org} value={org.ID_Org}>{org.FName}</option>)} </select>\r\n                <div className=\"form-actions\"> <button type=\"submit\">Сохранить</button> <button type=\"button\" onClick={handleCancel}>Отмена</button> </div> </form> );\r\n    }\r\n    if (type === 'organizations') {\r\n       return ( <form onSubmit={handleSubmit} className=\"add-form\"> {/* ... поля для организации ... */}\r\n        <h4>Добавить организацию</h4>\r\n           <input type=\"text\" placeholder=\"Полное название\" required value={newItem.FName || ''} onChange={(e) => handleChange('FName', e.target.value)} />\r\n           <input type=\"text\" placeholder=\"Краткое название\" required value={newItem.SName || ''} onChange={(e) => handleChange('SName', e.target.value)} />\r\n           <div className=\"form-actions\"> <button type=\"submit\">Сохранить</button> <button type=\"button\" onClick={handleCancel}>Отмена</button> </div> </form> );\r\n    }\r\n     if (type === 'kks') {\r\n        return ( <form onSubmit={handleSubmit} className=\"add-form\"> {/* ... поля для KKS ... */}\r\n        <h4>Добавить KKS</h4>\r\n           <input type=\"text\" placeholder=\"Название KKS\" required value={newItem.Name_KKS || ''} onChange={(e) => handleChange('Name_KKS', e.target.value)} />\r\n           <input type=\"text\" placeholder=\"Краткое обозначение\" value={newItem.SName_KKS || ''} onChange={(e) => handleChange('SName_KKS', e.target.value)} />\r\n           <div className=\"form-actions\"> <button type=\"submit\">Сохранить</button> <button type=\"button\" onClick={handleCancel}>Отмена</button> </div> </form> );\r\n    }\r\n    return null;\r\n};\r\n\r\n// --- Компонент WorkerForm (БЕЗ ИЗМЕНЕНИЙ) ---\r\nconst WorkerForm = ({ initialData = {}, onSave, onCancel, isEditing = false }) => {\r\n    const [workerData, setWorkerData] = useState(initialData);\r\n    const [newPassword, setNewPassword] = useState('');\r\n    useEffect(() => {\r\n        setWorkerData({\r\n            ...initialData,\r\n            Role: initialData.Role !== undefined ? initialData.Role : '',\r\n            JobTitle: initialData.JobTitle || '', // Добавлено\r\n            PlaceWork: initialData.PlaceWork || '', // Добавлено\r\n            Degree: initialData.Degree || '', // Добавлено\r\n            Rank: initialData.Rank || '', // Добавлено\r\n        });\r\n        setNewPassword('');\r\n    }, [initialData]);\r\n    const handleChange = (field, value) => {\r\n        setWorkerData(prev => ({ ...prev, [field]: value }));\r\n    };\r\n    const handlePasswordChange = (e) => {\r\n        setNewPassword(e.target.value);\r\n    };\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const dataToSend = { ...workerData };\r\n        if (newPassword) {\r\n            dataToSend.Password = newPassword;\r\n        } else if (!isEditing) {\r\n            alert('Пароль обязателен при создании пользователя.');\r\n            return;\r\n        }\r\n        onSave(dataToSend);\r\n    };\r\n    const handleCancelClick = (e) => {\r\n        e.preventDefault();\r\n        onCancel();\r\n    };\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"add-form user-form\">\r\n            <h4>{isEditing ? `Редактировать работника (ID: ${workerData.ID_Worker})` : 'Добавить работника'}</h4>\r\n            <input type=\"text\" placeholder=\"ФИО Работника\" required value={workerData.FName_Worker || ''} onChange={(e) => handleChange('FName_Worker', e.target.value)} />\r\n            <input type=\"text\" placeholder=\"Должность\" required value={workerData.JobTitle || ''} onChange={(e) => handleChange('JobTitle', e.target.value)} /> {/* Добавлено */}\r\n            <input type=\"text\" placeholder=\"Место работы\" required value={workerData.PlaceWork || ''} onChange={(e) => handleChange('PlaceWork', e.target.value)} /> {/* Добавлено */}\r\n            <input type=\"text\" placeholder=\"Ученая степень\" value={workerData.Degree || ''} onChange={(e) => handleChange('Degree', e.target.value)} /> {/* Добавлено */}\r\n            <input type=\"text\" placeholder=\"Звание\" value={workerData.Rank || ''} onChange={(e) => handleChange('Rank', e.target.value)} /> {/* Добавлено */}\r\n            <input type=\"text\" placeholder=\"Логин\" required value={workerData.Login || ''} onChange={(e) => handleChange('Login', e.target.value)} />\r\n            <input type=\"password\" placeholder={isEditing ? 'Новый пароль (оставьте пустым, чтобы не менять)' : 'Пароль'} value={newPassword} onChange={handlePasswordChange} required={!isEditing}/>\r\n            <select required value={workerData.Role} onChange={(e) => handleChange('Role', parseInt(e.target.value, 10))}>\r\n                <option value=\"\" disabled>Выберите роль</option>\r\n                <option value={0}>Работник ОУ</option>\r\n                <option value={1}>Работник ЦДО (Админ)</option>\r\n            </select>\r\n            <div className=\"form-actions\">\r\n                <button type=\"submit\">Сохранить</button>\r\n                <button type=\"button\" onClick={handleCancelClick}>Отмена</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\n// --- НОВЫЙ Компонент формы для Документов ---\r\nconst DocumentForm = ({ initialData = {}, onSave, onCancel, isEditing = false, allWorkers = [], allPrograms = [] }) => {\r\n    const [docData, setDocData] = useState({});\r\n\r\n    useEffect(() => {\r\n        // Инициализация формы данными для редактирования или пустыми значениями\r\n        // Преобразуем даты в формат YYYY-MM-DD для input type=\"date\"\r\n        setDocData({\r\n            ID_Worker: initialData.ID_Worker || '',\r\n            ID_ProgDPO: initialData.ID_ProgDPO || '',\r\n            regnumber: initialData.regnumber || '',\r\n            formseries: initialData.formseries || '',\r\n            formnumber: initialData.formnumber || '',\r\n            DateIssue: formatDate(initialData.DateIssue, 'date'), // Преобразование\r\n            DataStart: formatDate(initialData.DataStart, 'date'), // Преобразование\r\n            DataEnd: formatDate(initialData.DataEnd, 'date')      // Преобразование\r\n        });\r\n    }, [initialData]);\r\n\r\n    const handleChange = (field, value) => {\r\n        setDocData(prev => ({ ...prev, [field]: value }));\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // Перед отправкой можно добавить валидацию, если нужно\r\n        const dataToSend = { ...docData };\r\n         // Если ID есть (при редактировании), добавляем его\r\n        if (isEditing && initialData.ID_Document) {\r\n            dataToSend.ID_Document = initialData.ID_Document;\r\n        }\r\n        onSave(dataToSend); // Вызываем колбэк сохранения\r\n    };\r\n\r\n    const handleCancelClick = (e) => {\r\n        e.preventDefault();\r\n        onCancel(); // Вызываем колбэк отмены\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"add-form document-form\">\r\n            <h4>{isEditing ? `Редактировать документ (ID: ${initialData.ID_Document})` : 'Добавить документ'}</h4>\r\n\r\n            {/* Выбор работника */}\r\n            <label htmlFor=\"doc-worker\">Работник:</label>\r\n            <select id=\"doc-worker\" required value={docData.ID_Worker} onChange={(e) => handleChange('ID_Worker', e.target.value ? parseInt(e.target.value, 10) : '')}>\r\n                <option value=\"\" disabled>-- Выберите работника --</option>\r\n                {allWorkers.map(w => <option key={w.ID_Worker} value={w.ID_Worker}>{w.FName_Worker} (ID: {w.ID_Worker})</option>)}\r\n            </select>\r\n\r\n             {/* Выбор программы */}\r\n             <label htmlFor=\"doc-program\">Программа ДПО:</label>\r\n             <select id=\"doc-program\" required value={docData.ID_ProgDPO} onChange={(e) => handleChange('ID_ProgDPO', e.target.value ? parseInt(e.target.value, 10) : '')}>\r\n                 <option value=\"\" disabled>-- Выберите программу --</option>\r\n                 {allPrograms.map(p => <option key={p.ID_ProgDPO} value={p.ID_ProgDPO}>{p.Name_ProgDPO}</option>)}\r\n             </select>\r\n\r\n            {/* Поля документа */}\r\n            <label htmlFor=\"doc-regnumber\">Регистрационный номер:</label>\r\n            <input id=\"doc-regnumber\" type=\"text\" placeholder=\"Рег. номер\" value={docData.regnumber} onChange={(e) => handleChange('regnumber', e.target.value)} />\r\n\r\n            <label htmlFor=\"doc-formseries\">Серия формы:</label>\r\n            <input id=\"doc-formseries\" type=\"text\" placeholder=\"Серия\" value={docData.formseries} onChange={(e) => handleChange('formseries', e.target.value)} />\r\n\r\n            <label htmlFor=\"doc-formnumber\">Номер формы:</label>\r\n            <input id=\"doc-formnumber\" type=\"text\" placeholder=\"Номер\" value={docData.formnumber} onChange={(e) => handleChange('formnumber', e.target.value)} />\r\n\r\n             {/* Даты */}\r\n             <label htmlFor=\"doc-dateissue\">Дата выдачи:</label>\r\n             <input id=\"doc-dateissue\" type=\"date\" value={docData.DateIssue} onChange={(e) => handleChange('DateIssue', e.target.value)} />\r\n\r\n             <label htmlFor=\"doc-datastart\">Дата начала:</label>\r\n             <input id=\"doc-datastart\" type=\"date\" value={docData.DataStart} onChange={(e) => handleChange('DataStart', e.target.value)} />\r\n\r\n             <label htmlFor=\"doc-dataend\">Дата окончания:</label>\r\n             <input id=\"doc-dataend\" type=\"date\" value={docData.DataEnd} onChange={(e) => handleChange('DataEnd', e.target.value)} />\r\n\r\n            <div className=\"form-actions\">\r\n                <button type=\"submit\">Сохранить</button>\r\n                <button type=\"button\" onClick={handleCancelClick}>Отмена</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\n\r\n// --- Основной компонент AdminPanel ---\r\nfunction AdminPanel() {\r\n    // Состояния\r\n    const [activeTab, setActiveTab] = useState('programs'); // 'programs', 'organizations', 'kks', 'workers', 'documents'\r\n    const [programs, setPrograms] = useState([]);\r\n    const [organizations, setOrganizations] = useState([]);\r\n    const [kks, setKks] = useState([]);\r\n    const [workers, setWorkers] = useState([]);\r\n    const [documents, setDocuments] = useState([]); // <<< НОВОЕ СОСТОЯНИЕ ДЛЯ ДОКУМЕНТОВ\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [editingItem, setEditingItem] = useState(null);\r\n    const [addingItemType, setAddingItemType] = useState(null);\r\n    const [programTypes, setProgramTypes] = useState([]);\r\n    const [programTypesData, setProgramTypesData] = useState([]);\r\n    const [allOrganizations, setAllOrganizations] = useState([]);\r\n    const [allWorkers, setAllWorkers] = useState([]); // <<< НУЖНО ДЛЯ ФОРМЫ ДОКУМЕНТОВ\r\n    const [allPrograms, setAllPrograms] = useState([]); // <<< НУЖНО ДЛЯ ФОРМЫ ДОКУМЕНТОВ\r\n    const [sortConfig, setSortConfig] = useState({ key: null, direction: 'ascending' });\r\n\r\n    const navigate = useNavigate();\r\n    // apiUrl определен глобально выше\r\n\r\n    // Получение пользователя (без изменений)\r\n    const user = useMemo(() => { /* ... */\r\n         const storedUser = localStorage.getItem('user');\r\n         try {\r\n             return storedUser ? JSON.parse(storedUser) : null;\r\n         } catch (e) {\r\n             console.error(\"Failed to parse user from localStorage\", e);\r\n             localStorage.removeItem('user');\r\n             return null;\r\n         }\r\n     }, []);\r\n\r\n    // --- Сортировка ---\r\n    const requestSort = (key) => { /* ... */\r\n        let direction = 'ascending';\r\n        if (sortConfig.key === key && sortConfig.direction === 'ascending') {\r\n            direction = 'descending';\r\n        }\r\n        setSortConfig({ key, direction });\r\n     };\r\n    const getIdKeyForTab = (tab) => {\r\n        switch (tab) {\r\n            case 'programs': return 'ID_ProgDPO';\r\n            case 'organizations': return 'ID_Org';\r\n            case 'kks': return 'ID_KKS';\r\n            case 'workers': return 'ID_Worker';\r\n            case 'documents': return 'ID_Document';\r\n            default: return null;\r\n        }\r\n    };\r\n    useEffect(() => { /* ... сброс сортировки и форм ... */\r\n        const idKey = getIdKeyForTab(activeTab);\r\n        if (idKey) {\r\n            setSortConfig({ key: idKey, direction: 'ascending' });\r\n        } else {\r\n            setSortConfig({ key: null, direction: 'ascending' });\r\n        }\r\n        setEditingItem(null);\r\n        setAddingItemType(null);\r\n    }, [activeTab]);\r\n\r\n    // --- Загрузка данных ---\r\n    const fetchData = useCallback(async () => {\r\n        if (!user || user.role !== 1) {\r\n            console.warn(\"fetchData called without admin user, aborting.\");\r\n            setLoading(false);\r\n            setError(\"Доступ запрещен. Требуются права администратора.\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setError('');\r\n        console.log(`Fetching data for active tab: ${activeTab}`);\r\n\r\n        try {\r\n            let response;\r\n            let endpoint;\r\n            let config = {};\r\n            switch (activeTab) {\r\n                case 'programs': endpoint = `${apiUrl}/api/programs`; break;\r\n                case 'organizations': endpoint = `${apiUrl}/api/organizations`; break;\r\n                case 'kks': endpoint = `${apiUrl}/api/kks`; break;\r\n                case 'workers': endpoint = `${apiUrl}/api/workers/admin`; break;\r\n                case 'documents':\r\n                    endpoint = `${apiUrl}/api/documents`;\r\n                    if (user?.workerId && user?.role !== undefined) {\r\n                        config.params = { userId: user.workerId, role: user.role };\r\n                    }\r\n                    break;\r\n                default:\r\n                    console.warn(`Unknown activeTab: ${activeTab}`);\r\n                    setLoading(false);\r\n                    return;\r\n            }\r\n            console.log(`Attempting to fetch ${endpoint}...`, config);\r\n            response = await axios.get(endpoint, config);\r\n            console.log(`Received response from ${endpoint}`, response.status);\r\n            const responseData = Array.isArray(response.data) ? response.data : [];\r\n            if (!Array.isArray(response.data)) {\r\n                console.warn(`API endpoint ${endpoint} did not return an array.`);\r\n            }\r\n            switch (activeTab) {\r\n                case 'programs': setPrograms(responseData); break;\r\n                case 'organizations': setOrganizations(responseData); break;\r\n                case 'kks': setKks(responseData); break;\r\n                case 'workers': setWorkers(responseData); break;\r\n                case 'documents': setDocuments(responseData); break;\r\n            }\r\n        } catch (err) {\r\n            console.error(`Error fetching ${activeTab}:`, err.response || err.message || err);\r\n            const mainErrorMsg = `Ошибка загрузки данных для вкладки \"${activeTab}\".`;\r\n            setError(prev => prev ? `${prev}\\n${mainErrorMsg}` : mainErrorMsg);\r\n            switch (activeTab) {\r\n                case 'programs': setPrograms([]); break;\r\n                case 'organizations': setOrganizations([]); break;\r\n                case 'kks': setKks([]); break;\r\n                case 'workers': setWorkers([]); break;\r\n                case 'documents': setDocuments([]); break;\r\n            }\r\n        } finally {\r\n            console.log(`Setting loading to false for ${activeTab}.`);\r\n            setLoading(false);\r\n        }\r\n    }, [activeTab, user, apiUrl]); // Убрали зависимости, которые обновляются внутри\r\n\r\n    useEffect(() => {\r\n        if (!user || user.role !== 1) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n        fetchData();\r\n    }, [user, navigate, fetchData]);\r\n\r\n    useEffect(() => {\r\n        const loadAuxiliaryData = async () => {\r\n            try {\r\n                console.log(\"Fetching auxiliary data (types, orgs, workers, programs)...\");\r\n                const endpoints = [\r\n                    `${apiUrl}/api/program-types`,\r\n                    `${apiUrl}/api/programs/types`,\r\n                    `${apiUrl}/api/organizations`,\r\n                    `${apiUrl}/api/workers/admin`,\r\n                    `${apiUrl}/api/programs`,\r\n                ];\r\n                const [typesRes, typesForFormRes, orgsRes, workersRes, progsRes] = await Promise.all(\r\n                    endpoints.map(url => axios.get(url))\r\n                );\r\n                setProgramTypes(typesForFormRes.data || []); // Для dropdown в формах\r\n                setProgramTypesData(typesRes.data || []);\r\n                setAllOrganizations(orgsRes.data || []);\r\n                setAllWorkers(workersRes.data || []);\r\n                setAllPrograms(progsRes.data || []);\r\n                console.log(\"Auxiliary data fetched on mount.\");\r\n            } catch (err) {\r\n                console.error('Error fetching auxiliary data:', err);\r\n                const auxErrorMsg = 'Ошибка загрузки вспомогательных данных.';\r\n                setError(prev => prev ? `${prev}\\n${auxErrorMsg}` : auxErrorMsg);\r\n            }\r\n        };\r\n\r\n        if (user?.role === 1 && (programTypes.length === 0 || allOrganizations.length === 0 || allWorkers.length === 0 || allPrograms.length === 0)) {\r\n            loadAuxiliaryData();\r\n        }\r\n    }, [user?.role, apiUrl, programTypes.length, allOrganizations.length, allWorkers.length, allPrograms.length]);\r\n\r\n    // --- Мемоизированные отсортированные списки ---\r\n    const sortedPrograms = useMemo(() => { \r\n        let sortableItems = [...programs]; if (sortConfig.key) { sortableItems.sort((a, b) => { if (a[sortConfig.key] < b[sortConfig.key]) { return sortConfig.direction === 'ascending' ? -1 : 1; } if (a[sortConfig.key] > b[sortConfig.key]) { return sortConfig.direction === 'ascending' ? 1 : -1; } return 0; }); } return sortableItems;\r\n     }, [programs, sortConfig]);\r\n    const sortedOrganizations = useMemo(() => { \r\n        let sortableItems = [...organizations]; if (sortConfig.key) { sortableItems.sort((a, b) => { const valA = a[sortConfig.key]; const valB = b[sortConfig.key]; const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA).localeCompare(String(valB)); return sortConfig.direction === 'ascending' ? compareResult : -compareResult; }); } return sortableItems;\r\n     }, [organizations, sortConfig]);\r\n    const sortedKks = useMemo(() => { \r\n        let sortableItems = [...kks]; if (sortConfig.key) { sortableItems.sort((a, b) => { const valA = a[sortConfig.key]; const valB = b[sortConfig.key]; const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA).localeCompare(String(valB)); return sortConfig.direction === 'ascending' ? compareResult : -compareResult; }); } return sortableItems;\r\n     }, [kks, sortConfig]);\r\n    const sortedWorkers = useMemo(() => { \r\n        let sortableItems = [...workers]; if (sortConfig.key) { sortableItems.sort((a, b) => { const valA = a[sortConfig.key]; const valB = b[sortConfig.key]; if (sortConfig.key === 'Role' && typeof valA === 'number' && typeof valB === 'number') { return sortConfig.direction === 'ascending' ? valA - valB : valB - valA; } if (sortConfig.key === 'FName_Worker') { const nameA = String(valA ?? '').toLowerCase(); const nameB = String(valB ?? '').toLowerCase(); if (nameA < nameB) return sortConfig.direction === 'ascending' ? -1 : 1; if (nameA > nameB) return sortConfig.direction === 'ascending' ? 1 : -1; return 0; } const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA ?? '').localeCompare(String(valB ?? '')); return sortConfig.direction === 'ascending' ? compareResult : -compareResult; }); } return sortableItems;\r\n    }, [workers, sortConfig]);\r\n    const sortedDocuments = useMemo(() => {\r\n        let sortableItems = [...documents];\r\n        if (sortConfig.key) {\r\n            sortableItems.sort((a, b) => {\r\n                const valA = a[sortConfig.key];\r\n                const valB = b[sortConfig.key];\r\n\r\n                // Сортировка по дате\r\n                 if (['DateIssue', 'DataStart', 'DataEnd'].includes(sortConfig.key)) {\r\n                    const dateA = valA ? new Date(valA).getTime() : 0;\r\n                    const dateB = valB ? new Date(valB).getTime() : 0;\r\n                     if (isNaN(dateA) && isNaN(dateB)) return 0;\r\n                     if (isNaN(dateA)) return sortConfig.direction === 'ascending' ? -1 : 1; // nulls/invalid first or last\r\n                     if (isNaN(dateB)) return sortConfig.direction === 'ascending' ? 1 : -1;\r\n                    return sortConfig.direction === 'ascending' ? dateA - dateB : dateB - dateA;\r\n                }\r\n\r\n                 // Сортировка по имени работника или программы\r\n                if (['WorkerName', 'ProgramName'].includes(sortConfig.key)) {\r\n                     const strA = String(valA ?? '').toLowerCase();\r\n                     const strB = String(valB ?? '').toLowerCase();\r\n                     if (strA < strB) return sortConfig.direction === 'ascending' ? -1 : 1;\r\n                     if (strA > strB) return sortConfig.direction === 'ascending' ? 1 : -1;\r\n                     return 0;\r\n                }\r\n\r\n                // Общая сортировка\r\n                const compareResult = typeof valA === 'number' && typeof valB === 'number'\r\n                    ? valA - valB\r\n                    : String(valA ?? '').localeCompare(String(valB ?? ''));\r\n\r\n                return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\r\n            });\r\n        }\r\n        return sortableItems;\r\n    }, [documents, sortConfig]);\r\n\r\n    // --- Обработчики CRUD ---\r\n    const handleEdit = (item) => { setEditingItem(item); setAddingItemType(null); };\r\n    const handleCancel = () => { setEditingItem(null); };\r\n    const handleChangeInline = (field, value) => { setEditingItem(prev => ({ ...prev, [field]: value })); };\r\n    const handleSave = async (editedData) => {\r\n        const itemToSave = editedData || editingItem;\r\n        if (!itemToSave) return;\r\n        const idKey = getIdKeyForTab(activeTab);\r\n        const id = itemToSave[idKey];\r\n        if (id === undefined && activeTab !== 'documents') { // Для документов ID может не быть в itemToSave из формы\r\n             if (activeTab === 'documents' && editingItem?.ID_Document) {\r\n                 // Берем ID из исходного editingItem для документов\r\n                 id = editingItem.ID_Document;\r\n                 itemToSave.ID_Document = id; // Добавляем ID обратно для PUT запроса, если нужно\r\n             } else {\r\n                console.error(\"Cannot save item without ID\", itemToSave);\r\n                setError(\"Не удалось определить ID для сохранения.\");\r\n                return;\r\n             }\r\n        }\r\n        console.log(`Saving edited item (ID: ${id}, Tab: ${activeTab}):`, itemToSave);\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            let endpoint;\r\n            switch (activeTab) {\r\n                case 'programs': endpoint = `${apiUrl}/api/programs/${id}`; break;\r\n                case 'organizations': endpoint = `${apiUrl}/api/organizations/${id}`; break;\r\n                case 'kks': endpoint = `${apiUrl}/api/kks/${id}`; break;\r\n                case 'workers': endpoint = `${apiUrl}/api/workers/${id}`; break;\r\n                case 'documents': endpoint = `${apiUrl}/api/documents/${id}`; break; // <<< ДОБАВЛЕНО (нужен PUT /api/documents/:id)\r\n                default: throw new Error(\"Неизвестная вкладка для сохранения\");\r\n            }\r\n            await axios.put(endpoint, itemToSave);\r\n            setEditingItem(null);\r\n            await fetchData();\r\n            console.log(`Item (ID: ${id}) saved successfully.`);\r\n        } catch (err) {\r\n            console.error('Ошибка при сохранении изменений:', err.response?.data || err.message || err);\r\n            setError(err.response?.data?.error || 'Ошибка при сохранении данных');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    const handleShowAddForm = () => { setAddingItemType(activeTab); setEditingItem(null); };\r\n    const handleCancelAdd = () => { setAddingItemType(null); };\r\n    const handleAddItem = async (newItemData) => { // Добавление (POST)\r\n        const type = addingItemType;\r\n        if (!type) return;\r\n        console.log(`Adding new ${type}:`, newItemData);\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            let endpoint;\r\n            switch (type) {\r\n                case 'programs': endpoint = `${apiUrl}/api/programs`; break;\r\n                case 'organizations': endpoint = `${apiUrl}/api/organizations`; break;\r\n                case 'kks': endpoint = `${apiUrl}/api/kks`; break;\r\n                case 'workers': endpoint = `${apiUrl}/api/workers`; break;\r\n                case 'documents': endpoint = `${apiUrl}/api/documents`; break;\r\n                default: throw new Error(\"Неизвестный тип для добавления\");\r\n            }\r\n            await axios.post(endpoint, newItemData);\r\n            setAddingItemType(null);\r\n            await fetchData();\r\n            console.log(`Item of type ${type} added successfully.`);\r\n        } catch (err) {\r\n            console.error(`Ошибка при добавлении ${type}:`, err.response?.data || err.message || err);\r\n            setError(err.response?.data?.error || `Ошибка при добавлении элемента`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    const handleDelete = async (idToDelete) => { // Удаление (DELETE)\r\n        if (!window.confirm('Вы уверены, что хотите удалить этот элемент?')) { return; }\r\n        const idKey = getIdKeyForTab(activeTab);\r\n        console.log(`Deleting item with ID: ${idToDelete} (Key: ${idKey}) on tab: ${activeTab}`);\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            let endpoint;\r\n            switch (activeTab) {\r\n                case 'programs': endpoint = `${apiUrl}/api/programs/${idToDelete}`; break;\r\n                case 'organizations': endpoint = `${apiUrl}/api/organizations/${idToDelete}`; break;\r\n                case 'kks': endpoint = `${apiUrl}/api/kks/${idToDelete}`; break;\r\n                case 'workers': endpoint = `${apiUrl}/api/workers/${idToDelete}`; break;\r\n                case 'documents': endpoint = `${apiUrl}/api/documents/${idToDelete}`; break; // <<< ДОБАВЛЕНО (нужен DELETE /api/documents/:id)\r\n                default: throw new Error(\"Неизвестная вкладка для удаления\");\r\n            }\r\n            await axios.delete(endpoint);\r\n            if (editingItem && editingItem[idKey] === idToDelete) { setEditingItem(null); }\r\n            await fetchData();\r\n            console.log(`Item (ID: ${idToDelete}) deleted successfully.`);\r\n        } catch (err) {\r\n            console.error(`Ошибка при удалении элемента (ID: ${idToDelete}):`, err.response?.data || err.message || err);\r\n            setError(err.response?.data?.error || 'Ошибка при удалении элемента. Возможно, на него есть ссылки.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- Вспомогательные функции рендеринга ---\r\n    const displayRole = (roleValue) => { /* ... */ return roleValue === 1 ? 'Работник ЦДО' : roleValue === 0 ? 'Работник ОУ' : 'Неизвестно'; };\r\n    const renderSortableHeader = (label, key) => ( /* ... */ <th onClick={() => requestSort(key)} className=\"sortable-header\"> {label} {sortConfig.key === key ? (sortConfig.direction === 'ascending' ? ' ▲' : ' ▼') : ' ↕'} </th> );\r\n\r\n    // --- Основной рендеринг компонента ---\r\n    if (!user && loading) return <div className=\"loading\">Проверка авторизации и загрузка данных...</div>;\r\n    if (!user) return <div className=\"error\">Не удалось получить данные пользователя. <button onClick={() => navigate('/login')}>Войти</button></div>;\r\n    if (user.role !== 1) return <div className=\"error\">Доступ запрещен.</div>;\r\n    const showLoadingIndicator = loading && !error;\r\n\r\n    return (\r\n        <div className=\"admin-panel\">\r\n            {/* Шапка */}\r\n            <div className=\"admin-header\">\r\n                <h1>Панель администратора</h1>\r\n                <div className=\"header-buttons\">\r\n                   <button onClick={() => navigate('/admin')} className=\"back-button\">Назад</button>\r\n                   <button onClick={() => { localStorage.removeItem('user'); navigate('/login'); }} className=\"logout-button\">Выйти</button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Вкладки */}\r\n            <div className=\"admin-tabs\">\r\n                <button className={`tab-button ${activeTab === 'programs' ? 'active' : ''}`} onClick={() => setActiveTab('programs')}>Программы</button>\r\n                <button className={`tab-button ${activeTab === 'organizations' ? 'active' : ''}`} onClick={() => setActiveTab('organizations')}>Организации</button>\r\n                <button className={`tab-button ${activeTab === 'kks' ? 'active' : ''}`} onClick={() => setActiveTab('kks')}>ККС</button>\r\n                <button className={`tab-button ${activeTab === 'workers' ? 'active' : ''}`} onClick={() => setActiveTab('workers')}>Работники</button>\r\n                {/* <<< ДОБАВЛЕНА ВКЛАДКА >>> */}\r\n                <button className={`tab-button ${activeTab === 'documents' ? 'active' : ''}`} onClick={() => setActiveTab('documents')}>Документы</button>\r\n            </div>\r\n\r\n            {/* Индикатор загрузки и ошибки */}\r\n            {showLoadingIndicator && <div className=\"loading-inline\">Обновление данных...</div>}\r\n            {error && <div className=\"error-inline\">{error} <button onClick={() => setError('')} title=\"Закрыть ошибку\">×</button></div>}\r\n\r\n            {/* Основной контент */}\r\n            <div className=\"admin-content\">\r\n\r\n                 {/* Формы добавления/редактирования */}\r\n                 {(addingItemType === 'workers' || (editingItem && activeTab === 'workers')) && ( <WorkerForm key={editingItem ? editingItem.ID_Worker : 'add-worker'} initialData={editingItem || {}} onSave={editingItem ? handleSave : handleAddItem} onCancel={editingItem ? handleCancel : handleCancelAdd} isEditing={!!editingItem} /> )}\r\n                 {addingItemType && addingItemType !== 'workers' && addingItemType !== 'documents' && ( <AddItemForm key={`add-${addingItemType}`} type={addingItemType} onSave={handleAddItem} onCancel={handleCancelAdd} programTypes={programTypes} allOrganizations={allOrganizations} /> )}\r\n                 {/* <<< УСЛОВИЕ ДЛЯ ФОРМЫ ДОКУМЕНТОВ >>> */}\r\n                 {(addingItemType === 'documents' || (editingItem && activeTab === 'documents')) && (\r\n                     <DocumentForm\r\n                         key={editingItem ? editingItem.ID_Document : 'add-document'}\r\n                         initialData={editingItem || {}}\r\n                         onSave={editingItem ? handleSave : handleAddItem}\r\n                         onCancel={editingItem ? handleCancel : handleCancelAdd}\r\n                         isEditing={!!editingItem}\r\n                         allWorkers={workers} // Передаем список работников (не allWorkers, а текущий загруженный)\r\n                         allPrograms={allPrograms} // Передаем список программ\r\n                     />\r\n                 )}\r\n\r\n\r\n                {/* Кнопка \"Добавить\" */}\r\n                {!editingItem && !addingItemType && (\r\n                    <button onClick={handleShowAddForm} className=\"add-button\">\r\n                        Добавить {\r\n                            activeTab === 'programs' ? 'программу' :\r\n                            activeTab === 'organizations' ? 'организацию' :\r\n                            activeTab === 'kks' ? 'KKS' :\r\n                            activeTab === 'workers' ? 'работника' :\r\n                            activeTab === 'documents' ? 'документ' : '' // <<< ДОБАВЛЕНО\r\n                        }\r\n                    </button>\r\n                )}\r\n\r\n                {/* Таблица Программ */}\r\n                {activeTab === 'programs' && ( <table className=\"admin-table\"> {/* ... код таблицы ... */} <thead><tr> {renderSortableHeader('№', 'ID_ProgDPO')} {renderSortableHeader('Название', 'Name_ProgDPO')} {renderSortableHeader('Тип', 'Name_Type')} <th>Действия</th> </tr></thead> <tbody> {sortedPrograms.map((program, index) => ( <tr key={program.ID_ProgDPO}> {editingItem?.ID_ProgDPO === program.ID_ProgDPO ? (<> <td>{index + 1}</td> <td> <input type=\"text\" value={editingItem.Name_ProgDPO} onChange={(e) => handleChangeInline('Name_ProgDPO', e.target.value)} /> </td> <td> {program.Name_Type || 'N/A'} </td> <td> <button onClick={() => handleSave()}>Сохранить</button> <button onClick={handleCancel}>Отмена</button> </td> </>) : (<> <td>{index + 1}</td> <td>{program.Name_ProgDPO}</td> <td>{program.Name_Type || 'N/A'}</td> <td className=\"actions-cell\"> <button onClick={() => handleEdit(program)} disabled={!!addingItemType || !!editingItem}>Редакт.</button> <button onClick={() => handleDelete(program.ID_ProgDPO)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button> </td> </> )} </tr> ))} </tbody> </table> )}\r\n                 {/* Таблица Организаций */}\r\n                 {activeTab === 'organizations' && ( <table className=\"admin-table\"> {/* ... код таблицы ... */} <thead><tr> {renderSortableHeader('№', 'ID_Org')} {renderSortableHeader('Полное название', 'FName')} {renderSortableHeader('Краткое название', 'SName')} <th>Действия</th> </tr></thead> <tbody> {sortedOrganizations.map((org, index) => ( <tr key={org.ID_Org}> {editingItem?.ID_Org === org.ID_Org ? (<> <td>{index + 1}</td> <td><input type=\"text\" value={editingItem.FName} onChange={(e) => handleChangeInline('FName', e.target.value)} /></td> <td><input type=\"text\" value={editingItem.SName} onChange={(e) => handleChangeInline('SName', e.target.value)} /></td> <td> <button onClick={handleSave}>Сохранить</button> <button onClick={handleCancel}>Отмена</button> </td> </>) : (<> <td>{index + 1}</td> <td>{org.FName}</td> <td>{org.SName}</td> <td className=\"actions-cell\"> <button onClick={() => handleEdit(org)} disabled={!!addingItemType || !!editingItem}>Редакт.</button> <button onClick={() => handleDelete(org.ID_Org)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button> </td> </> )} </tr> ))} </tbody> </table> )}\r\n                 {/* Таблица KKS */}\r\n                 {activeTab === 'kks' && ( <table className=\"admin-table\"> {/* ... код таблицы ... */} <thead><tr> {renderSortableHeader('№', 'ID_KKS')} {renderSortableHeader('Название', 'Name_KKS')} {renderSortableHeader('Краткое обозначение', 'SName_KKS')} <th>Действия</th> </tr></thead> <tbody> {sortedKks.map((kksItem, index) => ( <tr key={kksItem.ID_KKS}> {editingItem?.ID_KKS === kksItem.ID_KKS ? (<> <td>{index + 1}</td> <td><input type=\"text\" value={editingItem.Name_KKS} onChange={(e) => handleChangeInline('Name_KKS', e.target.value)} /></td> <td><input type=\"text\" value={editingItem.SName_KKS} onChange={(e) => handleChangeInline('SName_KKS', e.target.value)} /></td> <td> <button onClick={handleSave}>Сохранить</button> <button onClick={handleCancel}>Отмена</button> </td> </>) : (<> <td>{index + 1}</td> <td>{kksItem.Name_KKS}</td> <td>{kksItem.SName_KKS}</td> <td className=\"actions-cell\"> <button onClick={() => handleEdit(kksItem)} disabled={!!addingItemType || !!editingItem}>Редакт.</button> <button onClick={() => handleDelete(kksItem.ID_KKS)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button> </td> </> )} </tr> ))} </tbody> </table> )}\r\n                 {/* Таблица Работников */}\r\n                 {activeTab === 'workers' && (\r\n                    <table className=\"admin-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                {renderSortableHeader('№', 'ID_Worker')}\r\n                                {renderSortableHeader('Логин', 'Login')}\r\n                                {renderSortableHeader('ФИО Работника', 'FName_Worker')}\r\n                                {renderSortableHeader('Должность', 'JobTitle')}\r\n                                {renderSortableHeader('Место работы', 'PlaceWork')}\r\n                                {renderSortableHeader('Степень', 'Degree')}\r\n                                {renderSortableHeader('Звание', 'Rank')}\r\n                                {renderSortableHeader('Роль', 'Role')}\r\n                                <th>Связанные KKS</th> {/* Новая колонка */}\r\n                                <th>Действия</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {sortedWorkers.map((w, index) => (\r\n                                <tr key={w.ID_Worker}>\r\n                                    <td>{index + 1}</td>\r\n                                    <td>{w.Login}</td>\r\n                                    <td>{w.FName_Worker}</td>\r\n                                    <td>{w.JobTitle}</td>\r\n                                    <td>{w.PlaceWork}</td>\r\n                                    <td>{w.Degree || 'N/A'}</td>\r\n                                    <td>{w.Rank || 'N/A'}</td>\r\n                                    <td>{displayRole(w.Role)}</td>\r\n                                    <td>{w.related_kks || 'Нет'}</td> {/* Отображение связанных KKS */}\r\n                                    <td className=\"actions-cell\">\r\n                                        <button onClick={() => handleEdit(w)} disabled={!!addingItemType || !!editingItem}>Редакт.</button>\r\n                                        <button onClick={() => handleDelete(w.ID_Worker)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button>\r\n                                        {/* Кнопка для редактирования KKS (реализуем позже) */}\r\n                                        {/* <button onClick={() => handleEditWorkerKKS(w.ID_Worker)}>Изменить KKS</button> */}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n                {/* <<< НОВАЯ ТАБЛИЦА ДЛЯ ДОКУМЕНТОВ >>> */}\r\n                {activeTab === 'documents' && (\r\n                    <table className=\"admin-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                {renderSortableHeader('№', 'ID_Document')}\r\n                                {renderSortableHeader('Работник', 'WorkerName')}\r\n                                {renderSortableHeader('Программа', 'ProgramName')}\r\n                                {renderSortableHeader('Рег. номер', 'regnumber')}\r\n                                {/* Можно добавить другие колонки: Серия, Номер формы */}\r\n                                {renderSortableHeader('Дата выдачи', 'DateIssue')}\r\n                                <th>Действия</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {sortedDocuments.map((doc, index) => (\r\n                                <tr key={doc.ID_Document}>\r\n                                    {/* Редактирование документов через форму, не inline */}\r\n                                    <td>{index + 1}</td>\r\n                                    <td>{doc.WorkerName || 'N/A'}</td>\r\n                                    <td>{doc.ProgramName || 'N/A'}</td>\r\n                                    <td>{doc.regnumber || 'N/A'}</td>\r\n                                    <td>{formatDate(doc.DateIssue, 'display')}</td> {/* Используем formatDate для отображения */}\r\n                                    <td className=\"actions-cell\">\r\n                                        {/* Кнопка редактирования открывает DocumentForm */}\r\n                                        <button onClick={() => handleEdit(doc)} disabled={!!addingItemType || !!editingItem}>Редакт.</button>\r\n                                        {/* Кнопка удаления */}\r\n                                        <button onClick={() => handleDelete(doc.ID_Document)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                 )}\r\n\r\n            </div> {/* admin-content */}\r\n        </div> // admin-panel\r\n    );\r\n}\r\n\r\nexport default AdminPanel;"],"mappings":";;;;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,EAAEC,WAAW,QAAQ,OAAO;AACxE,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE1B,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAAC,CAAC;;AAE9C;AACA,MAAMC,UAAU,GAAGA,CAACC,OAAO,EAAEC,IAAI,GAAG,MAAM,KAAK;EAC3C,IAAI,CAACD,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;EACzB,IAAI;IACA,MAAME,IAAI,GAAG,IAAIC,IAAI,CAACH,OAAO,CAAC;IAC9B,IAAII,KAAK,CAACF,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;;IAEtC,IAAIJ,IAAI,KAAK,gBAAgB,EAAE;MAC1B;MACA;MACA,MAAMK,MAAM,GAAGJ,IAAI,CAACK,iBAAiB,CAAC,CAAC;MACvC,MAAMC,YAAY,GAAG,IAAIL,IAAI,CAACD,IAAI,CAACG,OAAO,CAAC,CAAC,GAAIC,MAAM,GAAC,EAAE,GAAC,IAAK,CAAC;MAChE,OAAOE,YAAY,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;IACnD,CAAC,MAAM,IAAIT,IAAI,KAAK,MAAM,EAAE;MACvB;MACA,MAAMU,IAAI,GAAGT,IAAI,CAACU,WAAW,CAAC,CAAC;MAC/B,MAAMC,KAAK,GAAG,CAACX,IAAI,CAACY,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAEC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;MAC/D,MAAMC,GAAG,GAAGf,IAAI,CAACgB,OAAO,CAAC,CAAC,CAACH,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;MACtD,OAAO,GAAGL,IAAI,IAAIE,KAAK,IAAII,GAAG,EAAE;IACrC,CAAC,MAAM;MACF;MACA,OAAOf,IAAI,CAACiB,kBAAkB,CAAC,OAAO,CAAC;IAC5C;EACJ,CAAC,CAAC,OAAOC,CAAC,EAAE;IACRC,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEtB,OAAO,EAAEoB,CAAC,CAAC;IACxD,OAAO,EAAE,CAAC,CAAC;EACf;AACJ,CAAC;;AAGD;AACA,MAAMG,WAAW,GAAGA,CAAC;EAAEtB,IAAI;EAAEuB,MAAM;EAAEC,QAAQ;EAAEC,YAAY,GAAG,EAAE;EAAEC,gBAAgB,GAAG;AAAG,CAAC,KAAK;EAAAC,EAAA;EAC1F;EACA,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAG7C,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1CC,SAAS,CAAC,MAAM;IAAE4C,UAAU,CAAC,CAAC,CAAC,CAAC;EAAE,CAAC,EAAE,CAAC7B,IAAI,CAAC,CAAC;EAC5C,MAAM8B,YAAY,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;IAAEH,UAAU,CAACI,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE,CAACF,KAAK,GAAGC;IAAM,CAAC,CAAC,CAAC;EAAE,CAAC;EAC7F,MAAME,YAAY,GAAIf,CAAC,IAAK;IAAEA,CAAC,CAACgB,cAAc,CAAC,CAAC;IAAEZ,MAAM,CAACK,OAAO,CAAC;IAAEC,UAAU,CAAC,CAAC,CAAC,CAAC;EAAE,CAAC;EACpF,MAAMO,YAAY,GAAIjB,CAAC,IAAK;IAAEA,CAAC,CAACgB,cAAc,CAAC,CAAC;IAAEN,UAAU,CAAC,CAAC,CAAC,CAAC;IAAEL,QAAQ,CAAC,CAAC;EAAE,CAAC;EAE/E,IAAIxB,IAAI,KAAK,UAAU,EAAE;IACrB,oBAAST,OAAA;MAAM8C,QAAQ,EAAEH,YAAa;MAACI,SAAS,EAAC,UAAU;MAAAC,QAAA,GAAC,GAAC,eACxDhD,OAAA;QAAAgD,QAAA,EAAI;MAAkB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACxBpD,OAAA;QAAOS,IAAI,EAAC,MAAM;QAAC4C,WAAW,EAAC,yGAAoB;QAACC,QAAQ;QAACb,KAAK,EAAEJ,OAAO,CAACkB,YAAY,IAAI,EAAG;QAACC,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,cAAc,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;MAAE;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACjKpD,OAAA;QAAQsD,QAAQ;QAACb,KAAK,EAAEJ,OAAO,CAACqB,OAAO,IAAI,EAAG;QAACF,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,SAAS,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK,CAAE;QAAAO,QAAA,GAAC,GAAC,eAAAhD,OAAA;UAAQyC,KAAK,EAAC,EAAE;UAACkB,QAAQ;UAAAX,QAAA,EAAC;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAAClB,YAAY,CAAC0B,GAAG,CAACC,EAAE,iBAAI7D,OAAA;UAAyByC,KAAK,EAAEoB,EAAE,CAACH,OAAQ;UAAAV,QAAA,EAAEa,EAAE,CAACC;QAAS,GAA5CD,EAAE,CAACH,OAAO;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAA2C,CAAC,CAAC,EAAC,GAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACjQpD,OAAA;QAAQsD,QAAQ;QAACb,KAAK,EAAEJ,OAAO,CAAC0B,MAAM,IAAI,EAAG;QAACP,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,QAAQ,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK,CAAE;QAAAO,QAAA,GAAC,GAAC,eAAAhD,OAAA;UAAQyC,KAAK,EAAC,EAAE;UAACkB,QAAQ;UAAAX,QAAA,EAAC;QAAoB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAACjB,gBAAgB,CAACyB,GAAG,CAACI,GAAG,iBAAIhE,OAAA;UAAyByC,KAAK,EAAEuB,GAAG,CAACD,MAAO;UAAAf,QAAA,EAAEgB,GAAG,CAACC;QAAK,GAAzCD,GAAG,CAACD,MAAM;UAAAd,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAwC,CAAC,CAAC,EAAC,GAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACzQpD,OAAA;QAAK+C,SAAS,EAAC,cAAc;QAAAC,QAAA,GAAC,GAAC,eAAAhD,OAAA;UAAQS,IAAI,EAAC,QAAQ;UAAAuC,QAAA,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,eAAApD,OAAA;UAAQS,IAAI,EAAC,QAAQ;UAACyD,OAAO,EAAErB,YAAa;UAAAG,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,KAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAC/J;EACA,IAAI3C,IAAI,KAAK,eAAe,EAAE;IAC3B,oBAAST,OAAA;MAAM8C,QAAQ,EAAEH,YAAa;MAACI,SAAS,EAAC,UAAU;MAAAC,QAAA,GAAC,GAAC,eAC5DhD,OAAA;QAAAgD,QAAA,EAAI;MAAoB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC1BpD,OAAA;QAAOS,IAAI,EAAC,MAAM;QAAC4C,WAAW,EAAC,uFAAiB;QAACC,QAAQ;QAACb,KAAK,EAAEJ,OAAO,CAAC4B,KAAK,IAAI,EAAG;QAACT,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,OAAO,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;MAAE;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAChJpD,OAAA;QAAOS,IAAI,EAAC,MAAM;QAAC4C,WAAW,EAAC,6FAAkB;QAACC,QAAQ;QAACb,KAAK,EAAEJ,OAAO,CAAC8B,KAAK,IAAI,EAAG;QAACX,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,OAAO,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;MAAE;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACjJpD,OAAA;QAAK+C,SAAS,EAAC,cAAc;QAAAC,QAAA,GAAC,GAAC,eAAAhD,OAAA;UAAQS,IAAI,EAAC,QAAQ;UAAAuC,QAAA,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,eAAApD,OAAA;UAAQS,IAAI,EAAC,QAAQ;UAACyD,OAAO,EAAErB,YAAa;UAAAG,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,KAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAC1J;EACC,IAAI3C,IAAI,KAAK,KAAK,EAAE;IACjB,oBAAST,OAAA;MAAM8C,QAAQ,EAAEH,YAAa;MAACI,SAAS,EAAC,UAAU;MAAAC,QAAA,GAAC,GAAC,eAC7DhD,OAAA;QAAAgD,QAAA,EAAI;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAClBpD,OAAA;QAAOS,IAAI,EAAC,MAAM;QAAC4C,WAAW,EAAC,sDAAc;QAACC,QAAQ;QAACb,KAAK,EAAEJ,OAAO,CAAC+B,QAAQ,IAAI,EAAG;QAACZ,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,UAAU,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;MAAE;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACnJpD,OAAA;QAAOS,IAAI,EAAC,MAAM;QAAC4C,WAAW,EAAC,+GAAqB;QAACZ,KAAK,EAAEJ,OAAO,CAACgC,SAAS,IAAI,EAAG;QAACb,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,WAAW,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;MAAE;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACnJpD,OAAA;QAAK+C,SAAS,EAAC,cAAc;QAAAC,QAAA,GAAC,GAAC,eAAAhD,OAAA;UAAQS,IAAI,EAAC,QAAQ;UAAAuC,QAAA,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,eAAApD,OAAA;UAAQS,IAAI,EAAC,QAAQ;UAACyD,OAAO,EAAErB,YAAa;UAAAG,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,KAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAC1J;EACA,OAAO,IAAI;AACf,CAAC;;AAED;AAAAhB,EAAA,CAjCML,WAAW;AAAAuC,EAAA,GAAXvC,WAAW;AAkCjB,MAAMwC,UAAU,GAAGA,CAAC;EAAEC,WAAW,GAAG,CAAC,CAAC;EAAExC,MAAM;EAAEC,QAAQ;EAAEwC,SAAS,GAAG;AAAM,CAAC,KAAK;EAAAC,GAAA;EAC9E,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGnF,QAAQ,CAAC+E,WAAW,CAAC;EACzD,MAAM,CAACK,WAAW,EAAEC,cAAc,CAAC,GAAGrF,QAAQ,CAAC,EAAE,CAAC;EAClDC,SAAS,CAAC,MAAM;IACZkF,aAAa,CAAC;MACV,GAAGJ,WAAW;MACdO,IAAI,EAAEP,WAAW,CAACO,IAAI,KAAKC,SAAS,GAAGR,WAAW,CAACO,IAAI,GAAG,EAAE;MAC5DE,QAAQ,EAAET,WAAW,CAACS,QAAQ,IAAI,EAAE;MAAE;MACtCC,SAAS,EAAEV,WAAW,CAACU,SAAS,IAAI,EAAE;MAAE;MACxCC,MAAM,EAAEX,WAAW,CAACW,MAAM,IAAI,EAAE;MAAE;MAClCC,IAAI,EAAEZ,WAAW,CAACY,IAAI,IAAI,EAAE,CAAE;IAClC,CAAC,CAAC;IACFN,cAAc,CAAC,EAAE,CAAC;EACtB,CAAC,EAAE,CAACN,WAAW,CAAC,CAAC;EACjB,MAAMjC,YAAY,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;IACnCmC,aAAa,CAAClC,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE,CAACF,KAAK,GAAGC;IAAM,CAAC,CAAC,CAAC;EACxD,CAAC;EACD,MAAM4C,oBAAoB,GAAIzD,CAAC,IAAK;IAChCkD,cAAc,CAAClD,CAAC,CAAC6B,MAAM,CAAChB,KAAK,CAAC;EAClC,CAAC;EACD,MAAME,YAAY,GAAIf,CAAC,IAAK;IACxBA,CAAC,CAACgB,cAAc,CAAC,CAAC;IAClB,MAAM0C,UAAU,GAAG;MAAE,GAAGX;IAAW,CAAC;IACpC,IAAIE,WAAW,EAAE;MACbS,UAAU,CAACC,QAAQ,GAAGV,WAAW;IACrC,CAAC,MAAM,IAAI,CAACJ,SAAS,EAAE;MACnBe,KAAK,CAAC,8CAA8C,CAAC;MACrD;IACJ;IACAxD,MAAM,CAACsD,UAAU,CAAC;EACtB,CAAC;EACD,MAAMG,iBAAiB,GAAI7D,CAAC,IAAK;IAC7BA,CAAC,CAACgB,cAAc,CAAC,CAAC;IAClBX,QAAQ,CAAC,CAAC;EACd,CAAC;EACD,oBACIjC,OAAA;IAAM8C,QAAQ,EAAEH,YAAa;IAACI,SAAS,EAAC,oBAAoB;IAAAC,QAAA,gBACxDhD,OAAA;MAAAgD,QAAA,EAAKyB,SAAS,GAAG,gCAAgCE,UAAU,CAACe,SAAS,GAAG,GAAG;IAAoB;MAAAzC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACrGpD,OAAA;MAAOS,IAAI,EAAC,MAAM;MAAC4C,WAAW,EAAC,2EAAe;MAACC,QAAQ;MAACb,KAAK,EAAEkC,UAAU,CAACgB,YAAY,IAAI,EAAG;MAACnC,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,cAAc,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC/JpD,OAAA;MAAOS,IAAI,EAAC,MAAM;MAAC4C,WAAW,EAAC,wDAAW;MAACC,QAAQ;MAACb,KAAK,EAAEkC,UAAU,CAACM,QAAQ,IAAI,EAAG;MAACzB,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,UAAU,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,KAAC,eACpJpD,OAAA;MAAOS,IAAI,EAAC,MAAM;MAAC4C,WAAW,EAAC,qEAAc;MAACC,QAAQ;MAACb,KAAK,EAAEkC,UAAU,CAACO,SAAS,IAAI,EAAG;MAAC1B,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,WAAW,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,KAAC,eACzJpD,OAAA;MAAOS,IAAI,EAAC,MAAM;MAAC4C,WAAW,EAAC,iFAAgB;MAACZ,KAAK,EAAEkC,UAAU,CAACQ,MAAM,IAAI,EAAG;MAAC3B,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,QAAQ,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,KAAC,eAC5IpD,OAAA;MAAOS,IAAI,EAAC,MAAM;MAAC4C,WAAW,EAAC,sCAAQ;MAACZ,KAAK,EAAEkC,UAAU,CAACS,IAAI,IAAI,EAAG;MAAC5B,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,MAAM,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,KAAC,eAChIpD,OAAA;MAAOS,IAAI,EAAC,MAAM;MAAC4C,WAAW,EAAC,gCAAO;MAACC,QAAQ;MAACb,KAAK,EAAEkC,UAAU,CAACiB,KAAK,IAAI,EAAG;MAACpC,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,OAAO,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACzIpD,OAAA;MAAOS,IAAI,EAAC,UAAU;MAAC4C,WAAW,EAAEoB,SAAS,GAAG,iDAAiD,GAAG,QAAS;MAAChC,KAAK,EAAEoC,WAAY;MAACrB,QAAQ,EAAE6B,oBAAqB;MAAC/B,QAAQ,EAAE,CAACmB;IAAU;MAAAxB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eACzLpD,OAAA;MAAQsD,QAAQ;MAACb,KAAK,EAAEkC,UAAU,CAACI,IAAK;MAACvB,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,MAAM,EAAEsD,QAAQ,CAACjE,CAAC,CAAC6B,MAAM,CAAChB,KAAK,EAAE,EAAE,CAAC,CAAE;MAAAO,QAAA,gBACzGhD,OAAA;QAAQyC,KAAK,EAAC,EAAE;QAACkB,QAAQ;QAAAX,QAAA,EAAC;MAAa;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAChDpD,OAAA;QAAQyC,KAAK,EAAE,CAAE;QAAAO,QAAA,EAAC;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACtCpD,OAAA;QAAQyC,KAAK,EAAE,CAAE;QAAAO,QAAA,EAAC;MAAoB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3C,CAAC,eACTpD,OAAA;MAAK+C,SAAS,EAAC,cAAc;MAAAC,QAAA,gBACzBhD,OAAA;QAAQS,IAAI,EAAC,QAAQ;QAAAuC,QAAA,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACxCpD,OAAA;QAAQS,IAAI,EAAC,QAAQ;QAACyD,OAAO,EAAEuB,iBAAkB;QAAAzC,QAAA,EAAC;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEf,CAAC;;AAED;AAAAsB,GAAA,CA1DMH,UAAU;AAAAuB,GAAA,GAAVvB,UAAU;AA2DhB,MAAMwB,YAAY,GAAGA,CAAC;EAAEvB,WAAW,GAAG,CAAC,CAAC;EAAExC,MAAM;EAAEC,QAAQ;EAAEwC,SAAS,GAAG,KAAK;EAAEuB,UAAU,GAAG,EAAE;EAAEC,WAAW,GAAG;AAAG,CAAC,KAAK;EAAAC,GAAA;EACnH,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAG3G,QAAQ,CAAC,CAAC,CAAC,CAAC;EAE1CC,SAAS,CAAC,MAAM;IACZ;IACA;IACA0G,UAAU,CAAC;MACPV,SAAS,EAAElB,WAAW,CAACkB,SAAS,IAAI,EAAE;MACtCW,UAAU,EAAE7B,WAAW,CAAC6B,UAAU,IAAI,EAAE;MACxCC,SAAS,EAAE9B,WAAW,CAAC8B,SAAS,IAAI,EAAE;MACtCC,UAAU,EAAE/B,WAAW,CAAC+B,UAAU,IAAI,EAAE;MACxCC,UAAU,EAAEhC,WAAW,CAACgC,UAAU,IAAI,EAAE;MACxCC,SAAS,EAAElG,UAAU,CAACiE,WAAW,CAACiC,SAAS,EAAE,MAAM,CAAC;MAAE;MACtDC,SAAS,EAAEnG,UAAU,CAACiE,WAAW,CAACkC,SAAS,EAAE,MAAM,CAAC;MAAE;MACtDC,OAAO,EAAEpG,UAAU,CAACiE,WAAW,CAACmC,OAAO,EAAE,MAAM,CAAC,CAAM;IAC1D,CAAC,CAAC;EACN,CAAC,EAAE,CAACnC,WAAW,CAAC,CAAC;EAEjB,MAAMjC,YAAY,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;IACnC2D,UAAU,CAAC1D,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE,CAACF,KAAK,GAAGC;IAAM,CAAC,CAAC,CAAC;EACrD,CAAC;EAED,MAAME,YAAY,GAAIf,CAAC,IAAK;IACxBA,CAAC,CAACgB,cAAc,CAAC,CAAC;IAClB;IACA,MAAM0C,UAAU,GAAG;MAAE,GAAGa;IAAQ,CAAC;IAChC;IACD,IAAI1B,SAAS,IAAID,WAAW,CAACoC,WAAW,EAAE;MACtCtB,UAAU,CAACsB,WAAW,GAAGpC,WAAW,CAACoC,WAAW;IACpD;IACA5E,MAAM,CAACsD,UAAU,CAAC,CAAC,CAAC;EACxB,CAAC;EAED,MAAMG,iBAAiB,GAAI7D,CAAC,IAAK;IAC7BA,CAAC,CAACgB,cAAc,CAAC,CAAC;IAClBX,QAAQ,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC;EAED,oBACIjC,OAAA;IAAM8C,QAAQ,EAAEH,YAAa;IAACI,SAAS,EAAC,wBAAwB;IAAAC,QAAA,gBAC5DhD,OAAA;MAAAgD,QAAA,EAAKyB,SAAS,GAAG,+BAA+BD,WAAW,CAACoC,WAAW,GAAG,GAAG;IAAmB;MAAA3D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAGtGpD,OAAA;MAAO6G,OAAO,EAAC,YAAY;MAAA7D,QAAA,EAAC;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eAC7CpD,OAAA;MAAQ8G,EAAE,EAAC,YAAY;MAACxD,QAAQ;MAACb,KAAK,EAAE0D,OAAO,CAACT,SAAU;MAAClC,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,WAAW,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK,GAAGoD,QAAQ,CAACjE,CAAC,CAAC6B,MAAM,CAAChB,KAAK,EAAE,EAAE,CAAC,GAAG,EAAE,CAAE;MAAAO,QAAA,gBACtJhD,OAAA;QAAQyC,KAAK,EAAC,EAAE;QAACkB,QAAQ;QAAAX,QAAA,EAAC;MAAwB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EAC1D4C,UAAU,CAACpC,GAAG,CAACmD,CAAC,iBAAI/G,OAAA;QAA0ByC,KAAK,EAAEsE,CAAC,CAACrB,SAAU;QAAA1C,QAAA,GAAE+D,CAAC,CAACpB,YAAY,EAAC,QAAM,EAACoB,CAAC,CAACrB,SAAS,EAAC,GAAC;MAAA,GAArEqB,CAAC,CAACrB,SAAS;QAAAzC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAkE,CAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7G,CAAC,eAGRpD,OAAA;MAAO6G,OAAO,EAAC,aAAa;MAAA7D,QAAA,EAAC;IAAc;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACnDpD,OAAA;MAAQ8G,EAAE,EAAC,aAAa;MAACxD,QAAQ;MAACb,KAAK,EAAE0D,OAAO,CAACE,UAAW;MAAC7C,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,YAAY,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK,GAAGoD,QAAQ,CAACjE,CAAC,CAAC6B,MAAM,CAAChB,KAAK,EAAE,EAAE,CAAC,GAAG,EAAE,CAAE;MAAAO,QAAA,gBACzJhD,OAAA;QAAQyC,KAAK,EAAC,EAAE;QAACkB,QAAQ;QAAAX,QAAA,EAAC;MAAwB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EAC1D6C,WAAW,CAACrC,GAAG,CAACoD,CAAC,iBAAIhH,OAAA;QAA2ByC,KAAK,EAAEuE,CAAC,CAACX,UAAW;QAAArD,QAAA,EAAEgE,CAAC,CAACzD;MAAY,GAAlDyD,CAAC,CAACX,UAAU;QAAApD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAA+C,CAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5F,CAAC,eAGVpD,OAAA;MAAO6G,OAAO,EAAC,eAAe;MAAA7D,QAAA,EAAC;IAAsB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eAC7DpD,OAAA;MAAO8G,EAAE,EAAC,eAAe;MAACrG,IAAI,EAAC,MAAM;MAAC4C,WAAW,EAAC,oDAAY;MAACZ,KAAK,EAAE0D,OAAO,CAACG,SAAU;MAAC9C,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,WAAW,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAEvJpD,OAAA;MAAO6G,OAAO,EAAC,gBAAgB;MAAA7D,QAAA,EAAC;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACpDpD,OAAA;MAAO8G,EAAE,EAAC,gBAAgB;MAACrG,IAAI,EAAC,MAAM;MAAC4C,WAAW,EAAC,gCAAO;MAACZ,KAAK,EAAE0D,OAAO,CAACI,UAAW;MAAC/C,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,YAAY,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAErJpD,OAAA;MAAO6G,OAAO,EAAC,gBAAgB;MAAA7D,QAAA,EAAC;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACpDpD,OAAA;MAAO8G,EAAE,EAAC,gBAAgB;MAACrG,IAAI,EAAC,MAAM;MAAC4C,WAAW,EAAC,gCAAO;MAACZ,KAAK,EAAE0D,OAAO,CAACK,UAAW;MAAChD,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,YAAY,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAGpJpD,OAAA;MAAO6G,OAAO,EAAC,eAAe;MAAA7D,QAAA,EAAC;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACnDpD,OAAA;MAAO8G,EAAE,EAAC,eAAe;MAACrG,IAAI,EAAC,MAAM;MAACgC,KAAK,EAAE0D,OAAO,CAACM,SAAU;MAACjD,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,WAAW,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAE9HpD,OAAA;MAAO6G,OAAO,EAAC,eAAe;MAAA7D,QAAA,EAAC;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACnDpD,OAAA;MAAO8G,EAAE,EAAC,eAAe;MAACrG,IAAI,EAAC,MAAM;MAACgC,KAAK,EAAE0D,OAAO,CAACO,SAAU;MAAClD,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,WAAW,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAE9HpD,OAAA;MAAO6G,OAAO,EAAC,aAAa;MAAA7D,QAAA,EAAC;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACpDpD,OAAA;MAAO8G,EAAE,EAAC,aAAa;MAACrG,IAAI,EAAC,MAAM;MAACgC,KAAK,EAAE0D,OAAO,CAACQ,OAAQ;MAACnD,QAAQ,EAAG5B,CAAC,IAAKW,YAAY,CAAC,SAAS,EAAEX,CAAC,CAAC6B,MAAM,CAAChB,KAAK;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAEzHpD,OAAA;MAAK+C,SAAS,EAAC,cAAc;MAAAC,QAAA,gBACzBhD,OAAA;QAAQS,IAAI,EAAC,QAAQ;QAAAuC,QAAA,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACxCpD,OAAA;QAAQS,IAAI,EAAC,QAAQ;QAACyD,OAAO,EAAEuB,iBAAkB;QAAAzC,QAAA,EAAC;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEf,CAAC;;AAGD;AAAA8C,GAAA,CArFMH,YAAY;AAAAkB,GAAA,GAAZlB,YAAY;AAsFlB,SAASmB,UAAUA,CAAA,EAAG;EAAAC,GAAA;EAClB;EACA,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG5H,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;EACxD,MAAM,CAAC6H,QAAQ,EAAEC,WAAW,CAAC,GAAG9H,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC+H,aAAa,EAAEC,gBAAgB,CAAC,GAAGhI,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACiI,GAAG,EAAEC,MAAM,CAAC,GAAGlI,QAAQ,CAAC,EAAE,CAAC;EAClC,MAAM,CAACmI,OAAO,EAAEC,UAAU,CAAC,GAAGpI,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACqI,SAAS,EAAEC,YAAY,CAAC,GAAGtI,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAChD,MAAM,CAACuI,OAAO,EAAEC,UAAU,CAAC,GAAGxI,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACqC,KAAK,EAAEoG,QAAQ,CAAC,GAAGzI,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC0I,WAAW,EAAEC,cAAc,CAAC,GAAG3I,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAAC4I,cAAc,EAAEC,iBAAiB,CAAC,GAAG7I,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACyC,YAAY,EAAEqG,eAAe,CAAC,GAAG9I,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAAC+I,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGhJ,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAAC0C,gBAAgB,EAAEuG,mBAAmB,CAAC,GAAGjJ,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACuG,UAAU,EAAE2C,aAAa,CAAC,GAAGlJ,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAClD,MAAM,CAACwG,WAAW,EAAE2C,cAAc,CAAC,GAAGnJ,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACpD,MAAM,CAACoJ,UAAU,EAAEC,aAAa,CAAC,GAAGrJ,QAAQ,CAAC;IAAEsJ,GAAG,EAAE,IAAI;IAAEC,SAAS,EAAE;EAAY,CAAC,CAAC;EAEnF,MAAMC,QAAQ,GAAGnJ,WAAW,CAAC,CAAC;EAC9B;;EAEA;EACA,MAAMoJ,IAAI,GAAGvJ,OAAO,CAAC,MAAM;IAAE;IACxB,MAAMwJ,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC/C,IAAI;MACA,OAAOF,UAAU,GAAGG,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC,GAAG,IAAI;IACrD,CAAC,CAAC,OAAOvH,CAAC,EAAE;MACRC,OAAO,CAACC,KAAK,CAAC,wCAAwC,EAAEF,CAAC,CAAC;MAC1DwH,YAAY,CAACI,UAAU,CAAC,MAAM,CAAC;MAC/B,OAAO,IAAI;IACf;EACJ,CAAC,EAAE,EAAE,CAAC;;EAEP;EACA,MAAMC,WAAW,GAAIV,GAAG,IAAK;IAAE;IAC3B,IAAIC,SAAS,GAAG,WAAW;IAC3B,IAAIH,UAAU,CAACE,GAAG,KAAKA,GAAG,IAAIF,UAAU,CAACG,SAAS,KAAK,WAAW,EAAE;MAChEA,SAAS,GAAG,YAAY;IAC5B;IACAF,aAAa,CAAC;MAAEC,GAAG;MAAEC;IAAU,CAAC,CAAC;EACpC,CAAC;EACF,MAAMU,cAAc,GAAIC,GAAG,IAAK;IAC5B,QAAQA,GAAG;MACP,KAAK,UAAU;QAAE,OAAO,YAAY;MACpC,KAAK,eAAe;QAAE,OAAO,QAAQ;MACrC,KAAK,KAAK;QAAE,OAAO,QAAQ;MAC3B,KAAK,SAAS;QAAE,OAAO,WAAW;MAClC,KAAK,WAAW;QAAE,OAAO,aAAa;MACtC;QAAS,OAAO,IAAI;IACxB;EACJ,CAAC;EACDjK,SAAS,CAAC,MAAM;IAAE;IACd,MAAMkK,KAAK,GAAGF,cAAc,CAACtC,SAAS,CAAC;IACvC,IAAIwC,KAAK,EAAE;MACPd,aAAa,CAAC;QAAEC,GAAG,EAAEa,KAAK;QAAEZ,SAAS,EAAE;MAAY,CAAC,CAAC;IACzD,CAAC,MAAM;MACHF,aAAa,CAAC;QAAEC,GAAG,EAAE,IAAI;QAAEC,SAAS,EAAE;MAAY,CAAC,CAAC;IACxD;IACAZ,cAAc,CAAC,IAAI,CAAC;IACpBE,iBAAiB,CAAC,IAAI,CAAC;EAC3B,CAAC,EAAE,CAAClB,SAAS,CAAC,CAAC;;EAEf;EACA,MAAMyC,SAAS,GAAGjK,WAAW,CAAC,YAAY;IACtC,IAAI,CAACsJ,IAAI,IAAIA,IAAI,CAACY,IAAI,KAAK,CAAC,EAAE;MAC1BjI,OAAO,CAACkI,IAAI,CAAC,gDAAgD,CAAC;MAC9D9B,UAAU,CAAC,KAAK,CAAC;MACjBC,QAAQ,CAAC,kDAAkD,CAAC;MAC5D;IACJ;IACAD,UAAU,CAAC,IAAI,CAAC;IAChBC,QAAQ,CAAC,EAAE,CAAC;IACZrG,OAAO,CAACmI,GAAG,CAAC,iCAAiC5C,SAAS,EAAE,CAAC;IAEzD,IAAI;MACA,IAAI6C,QAAQ;MACZ,IAAIC,QAAQ;MACZ,IAAIC,MAAM,GAAG,CAAC,CAAC;MACf,QAAQ/C,SAAS;QACb,KAAK,UAAU;UAAE8C,QAAQ,GAAG,GAAG/J,MAAM,eAAe;UAAE;QACtD,KAAK,eAAe;UAAE+J,QAAQ,GAAG,GAAG/J,MAAM,oBAAoB;UAAE;QAChE,KAAK,KAAK;UAAE+J,QAAQ,GAAG,GAAG/J,MAAM,UAAU;UAAE;QAC5C,KAAK,SAAS;UAAE+J,QAAQ,GAAG,GAAG/J,MAAM,oBAAoB;UAAE;QAC1D,KAAK,WAAW;UACZ+J,QAAQ,GAAG,GAAG/J,MAAM,gBAAgB;UACpC,IAAI+I,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEkB,QAAQ,IAAI,CAAAlB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEY,IAAI,MAAK9E,SAAS,EAAE;YAC5CmF,MAAM,CAACE,MAAM,GAAG;cAAEC,MAAM,EAAEpB,IAAI,CAACkB,QAAQ;cAAEN,IAAI,EAAEZ,IAAI,CAACY;YAAK,CAAC;UAC9D;UACA;QACJ;UACIjI,OAAO,CAACkI,IAAI,CAAC,sBAAsB3C,SAAS,EAAE,CAAC;UAC/Ca,UAAU,CAAC,KAAK,CAAC;UACjB;MACR;MACApG,OAAO,CAACmI,GAAG,CAAC,uBAAuBE,QAAQ,KAAK,EAAEC,MAAM,CAAC;MACzDF,QAAQ,GAAG,MAAMpK,KAAK,CAAC0K,GAAG,CAACL,QAAQ,EAAEC,MAAM,CAAC;MAC5CtI,OAAO,CAACmI,GAAG,CAAC,0BAA0BE,QAAQ,EAAE,EAAED,QAAQ,CAACO,MAAM,CAAC;MAClE,MAAMC,YAAY,GAAGC,KAAK,CAACC,OAAO,CAACV,QAAQ,CAACW,IAAI,CAAC,GAAGX,QAAQ,CAACW,IAAI,GAAG,EAAE;MACtE,IAAI,CAACF,KAAK,CAACC,OAAO,CAACV,QAAQ,CAACW,IAAI,CAAC,EAAE;QAC/B/I,OAAO,CAACkI,IAAI,CAAC,gBAAgBG,QAAQ,2BAA2B,CAAC;MACrE;MACA,QAAQ9C,SAAS;QACb,KAAK,UAAU;UAAEG,WAAW,CAACkD,YAAY,CAAC;UAAE;QAC5C,KAAK,eAAe;UAAEhD,gBAAgB,CAACgD,YAAY,CAAC;UAAE;QACtD,KAAK,KAAK;UAAE9C,MAAM,CAAC8C,YAAY,CAAC;UAAE;QAClC,KAAK,SAAS;UAAE5C,UAAU,CAAC4C,YAAY,CAAC;UAAE;QAC1C,KAAK,WAAW;UAAE1C,YAAY,CAAC0C,YAAY,CAAC;UAAE;MAClD;IACJ,CAAC,CAAC,OAAOI,GAAG,EAAE;MACVhJ,OAAO,CAACC,KAAK,CAAC,kBAAkBsF,SAAS,GAAG,EAAEyD,GAAG,CAACZ,QAAQ,IAAIY,GAAG,CAACC,OAAO,IAAID,GAAG,CAAC;MACjF,MAAME,YAAY,GAAG,uCAAuC3D,SAAS,IAAI;MACzEc,QAAQ,CAACxF,IAAI,IAAIA,IAAI,GAAG,GAAGA,IAAI,KAAKqI,YAAY,EAAE,GAAGA,YAAY,CAAC;MAClE,QAAQ3D,SAAS;QACb,KAAK,UAAU;UAAEG,WAAW,CAAC,EAAE,CAAC;UAAE;QAClC,KAAK,eAAe;UAAEE,gBAAgB,CAAC,EAAE,CAAC;UAAE;QAC5C,KAAK,KAAK;UAAEE,MAAM,CAAC,EAAE,CAAC;UAAE;QACxB,KAAK,SAAS;UAAEE,UAAU,CAAC,EAAE,CAAC;UAAE;QAChC,KAAK,WAAW;UAAEE,YAAY,CAAC,EAAE,CAAC;UAAE;MACxC;IACJ,CAAC,SAAS;MACNlG,OAAO,CAACmI,GAAG,CAAC,gCAAgC5C,SAAS,GAAG,CAAC;MACzDa,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC,EAAE,CAACb,SAAS,EAAE8B,IAAI,EAAE/I,MAAM,CAAC,CAAC,CAAC,CAAC;;EAE/BT,SAAS,CAAC,MAAM;IACZ,IAAI,CAACwJ,IAAI,IAAIA,IAAI,CAACY,IAAI,KAAK,CAAC,EAAE;MAC1Bb,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACJ;IACAY,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,CAACX,IAAI,EAAED,QAAQ,EAAEY,SAAS,CAAC,CAAC;EAE/BnK,SAAS,CAAC,MAAM;IACZ,MAAMsL,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MAClC,IAAI;QACAnJ,OAAO,CAACmI,GAAG,CAAC,6DAA6D,CAAC;QAC1E,MAAMiB,SAAS,GAAG,CACd,GAAG9K,MAAM,oBAAoB,EAC7B,GAAGA,MAAM,qBAAqB,EAC9B,GAAGA,MAAM,oBAAoB,EAC7B,GAAGA,MAAM,oBAAoB,EAC7B,GAAGA,MAAM,eAAe,CAC3B;QACD,MAAM,CAAC+K,QAAQ,EAAEC,eAAe,EAAEC,OAAO,EAAEC,UAAU,EAAEC,QAAQ,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAChFP,SAAS,CAACrH,GAAG,CAAC6H,GAAG,IAAI5L,KAAK,CAAC0K,GAAG,CAACkB,GAAG,CAAC,CACvC,CAAC;QACDlD,eAAe,CAAC4C,eAAe,CAACP,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;QAC7CnC,mBAAmB,CAACyC,QAAQ,CAACN,IAAI,IAAI,EAAE,CAAC;QACxClC,mBAAmB,CAAC0C,OAAO,CAACR,IAAI,IAAI,EAAE,CAAC;QACvCjC,aAAa,CAAC0C,UAAU,CAACT,IAAI,IAAI,EAAE,CAAC;QACpChC,cAAc,CAAC0C,QAAQ,CAACV,IAAI,IAAI,EAAE,CAAC;QACnC/I,OAAO,CAACmI,GAAG,CAAC,kCAAkC,CAAC;MACnD,CAAC,CAAC,OAAOa,GAAG,EAAE;QACVhJ,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAE+I,GAAG,CAAC;QACpD,MAAMa,WAAW,GAAG,yCAAyC;QAC7DxD,QAAQ,CAACxF,IAAI,IAAIA,IAAI,GAAG,GAAGA,IAAI,KAAKgJ,WAAW,EAAE,GAAGA,WAAW,CAAC;MACpE;IACJ,CAAC;IAED,IAAI,CAAAxC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEY,IAAI,MAAK,CAAC,KAAK5H,YAAY,CAACyJ,MAAM,KAAK,CAAC,IAAIxJ,gBAAgB,CAACwJ,MAAM,KAAK,CAAC,IAAI3F,UAAU,CAAC2F,MAAM,KAAK,CAAC,IAAI1F,WAAW,CAAC0F,MAAM,KAAK,CAAC,CAAC,EAAE;MACzIX,iBAAiB,CAAC,CAAC;IACvB;EACJ,CAAC,EAAE,CAAC9B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEY,IAAI,EAAE3J,MAAM,EAAE+B,YAAY,CAACyJ,MAAM,EAAExJ,gBAAgB,CAACwJ,MAAM,EAAE3F,UAAU,CAAC2F,MAAM,EAAE1F,WAAW,CAAC0F,MAAM,CAAC,CAAC;;EAE7G;EACA,MAAMC,cAAc,GAAGjM,OAAO,CAAC,MAAM;IACjC,IAAIkM,aAAa,GAAG,CAAC,GAAGvE,QAAQ,CAAC;IAAE,IAAIuB,UAAU,CAACE,GAAG,EAAE;MAAE8C,aAAa,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAAE,IAAID,CAAC,CAAClD,UAAU,CAACE,GAAG,CAAC,GAAGiD,CAAC,CAACnD,UAAU,CAACE,GAAG,CAAC,EAAE;UAAE,OAAOF,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC;QAAE;QAAE,IAAI+C,CAAC,CAAClD,UAAU,CAACE,GAAG,CAAC,GAAGiD,CAAC,CAACnD,UAAU,CAACE,GAAG,CAAC,EAAE;UAAE,OAAOF,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC;QAAE;QAAE,OAAO,CAAC;MAAE,CAAC,CAAC;IAAE;IAAE,OAAO6C,aAAa;EACzU,CAAC,EAAE,CAACvE,QAAQ,EAAEuB,UAAU,CAAC,CAAC;EAC3B,MAAMoD,mBAAmB,GAAGtM,OAAO,CAAC,MAAM;IACtC,IAAIkM,aAAa,GAAG,CAAC,GAAGrE,aAAa,CAAC;IAAE,IAAIqB,UAAU,CAACE,GAAG,EAAE;MAAE8C,aAAa,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAAE,MAAME,IAAI,GAAGH,CAAC,CAAClD,UAAU,CAACE,GAAG,CAAC;QAAE,MAAMoD,IAAI,GAAGH,CAAC,CAACnD,UAAU,CAACE,GAAG,CAAC;QAAE,MAAMqD,aAAa,GAAG,OAAOF,IAAI,KAAK,QAAQ,IAAI,OAAOC,IAAI,KAAK,QAAQ,GAAGD,IAAI,GAAGC,IAAI,GAAGE,MAAM,CAACH,IAAI,CAAC,CAACI,aAAa,CAACD,MAAM,CAACF,IAAI,CAAC,CAAC;QAAE,OAAOtD,UAAU,CAACG,SAAS,KAAK,WAAW,GAAGoD,aAAa,GAAG,CAACA,aAAa;MAAE,CAAC,CAAC;IAAE;IAAE,OAAOP,aAAa;EAC7Y,CAAC,EAAE,CAACrE,aAAa,EAAEqB,UAAU,CAAC,CAAC;EAChC,MAAM0D,SAAS,GAAG5M,OAAO,CAAC,MAAM;IAC5B,IAAIkM,aAAa,GAAG,CAAC,GAAGnE,GAAG,CAAC;IAAE,IAAImB,UAAU,CAACE,GAAG,EAAE;MAAE8C,aAAa,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAAE,MAAME,IAAI,GAAGH,CAAC,CAAClD,UAAU,CAACE,GAAG,CAAC;QAAE,MAAMoD,IAAI,GAAGH,CAAC,CAACnD,UAAU,CAACE,GAAG,CAAC;QAAE,MAAMqD,aAAa,GAAG,OAAOF,IAAI,KAAK,QAAQ,IAAI,OAAOC,IAAI,KAAK,QAAQ,GAAGD,IAAI,GAAGC,IAAI,GAAGE,MAAM,CAACH,IAAI,CAAC,CAACI,aAAa,CAACD,MAAM,CAACF,IAAI,CAAC,CAAC;QAAE,OAAOtD,UAAU,CAACG,SAAS,KAAK,WAAW,GAAGoD,aAAa,GAAG,CAACA,aAAa;MAAE,CAAC,CAAC;IAAE;IAAE,OAAOP,aAAa;EACnY,CAAC,EAAE,CAACnE,GAAG,EAAEmB,UAAU,CAAC,CAAC;EACtB,MAAM2D,aAAa,GAAG7M,OAAO,CAAC,MAAM;IAChC,IAAIkM,aAAa,GAAG,CAAC,GAAGjE,OAAO,CAAC;IAAE,IAAIiB,UAAU,CAACE,GAAG,EAAE;MAAE8C,aAAa,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAAE,MAAME,IAAI,GAAGH,CAAC,CAAClD,UAAU,CAACE,GAAG,CAAC;QAAE,MAAMoD,IAAI,GAAGH,CAAC,CAACnD,UAAU,CAACE,GAAG,CAAC;QAAE,IAAIF,UAAU,CAACE,GAAG,KAAK,MAAM,IAAI,OAAOmD,IAAI,KAAK,QAAQ,IAAI,OAAOC,IAAI,KAAK,QAAQ,EAAE;UAAE,OAAOtD,UAAU,CAACG,SAAS,KAAK,WAAW,GAAGkD,IAAI,GAAGC,IAAI,GAAGA,IAAI,GAAGD,IAAI;QAAE;QAAE,IAAIrD,UAAU,CAACE,GAAG,KAAK,cAAc,EAAE;UAAE,MAAM0D,KAAK,GAAGJ,MAAM,CAACH,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,EAAE,CAAC,CAACQ,WAAW,CAAC,CAAC;UAAE,MAAMC,KAAK,GAAGN,MAAM,CAACF,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,EAAE,CAAC,CAACO,WAAW,CAAC,CAAC;UAAE,IAAID,KAAK,GAAGE,KAAK,EAAE,OAAO9D,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC;UAAE,IAAIyD,KAAK,GAAGE,KAAK,EAAE,OAAO9D,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC;UAAE,OAAO,CAAC;QAAE;QAAE,MAAMoD,aAAa,GAAG,OAAOF,IAAI,KAAK,QAAQ,IAAI,OAAOC,IAAI,KAAK,QAAQ,GAAGD,IAAI,GAAGC,IAAI,GAAGE,MAAM,CAACH,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,EAAE,CAAC,CAACI,aAAa,CAACD,MAAM,CAACF,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,EAAE,CAAC,CAAC;QAAE,OAAOtD,UAAU,CAACG,SAAS,KAAK,WAAW,GAAGoD,aAAa,GAAG,CAACA,aAAa;MAAE,CAAC,CAAC;IAAE;IAAE,OAAOP,aAAa;EAC/1B,CAAC,EAAE,CAACjE,OAAO,EAAEiB,UAAU,CAAC,CAAC;EACzB,MAAM+D,eAAe,GAAGjN,OAAO,CAAC,MAAM;IAClC,IAAIkM,aAAa,GAAG,CAAC,GAAG/D,SAAS,CAAC;IAClC,IAAIe,UAAU,CAACE,GAAG,EAAE;MAChB8C,aAAa,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QACzB,MAAME,IAAI,GAAGH,CAAC,CAAClD,UAAU,CAACE,GAAG,CAAC;QAC9B,MAAMoD,IAAI,GAAGH,CAAC,CAACnD,UAAU,CAACE,GAAG,CAAC;;QAE9B;QACC,IAAI,CAAC,WAAW,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC8D,QAAQ,CAAChE,UAAU,CAACE,GAAG,CAAC,EAAE;UACjE,MAAM+D,KAAK,GAAGZ,IAAI,GAAG,IAAIvL,IAAI,CAACuL,IAAI,CAAC,CAACrL,OAAO,CAAC,CAAC,GAAG,CAAC;UACjD,MAAMkM,KAAK,GAAGZ,IAAI,GAAG,IAAIxL,IAAI,CAACwL,IAAI,CAAC,CAACtL,OAAO,CAAC,CAAC,GAAG,CAAC;UAChD,IAAID,KAAK,CAACkM,KAAK,CAAC,IAAIlM,KAAK,CAACmM,KAAK,CAAC,EAAE,OAAO,CAAC;UAC1C,IAAInM,KAAK,CAACkM,KAAK,CAAC,EAAE,OAAOjE,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;UACxE,IAAIpI,KAAK,CAACmM,KAAK,CAAC,EAAE,OAAOlE,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC;UACvE,OAAOH,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG8D,KAAK,GAAGC,KAAK,GAAGA,KAAK,GAAGD,KAAK;QAC/E;;QAEC;QACD,IAAI,CAAC,YAAY,EAAE,aAAa,CAAC,CAACD,QAAQ,CAAChE,UAAU,CAACE,GAAG,CAAC,EAAE;UACvD,MAAMiE,IAAI,GAAGX,MAAM,CAACH,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,EAAE,CAAC,CAACQ,WAAW,CAAC,CAAC;UAC7C,MAAMO,IAAI,GAAGZ,MAAM,CAACF,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,EAAE,CAAC,CAACO,WAAW,CAAC,CAAC;UAC7C,IAAIM,IAAI,GAAGC,IAAI,EAAE,OAAOpE,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC;UACrE,IAAIgE,IAAI,GAAGC,IAAI,EAAE,OAAOpE,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC;UACrE,OAAO,CAAC;QACb;;QAEA;QACA,MAAMoD,aAAa,GAAG,OAAOF,IAAI,KAAK,QAAQ,IAAI,OAAOC,IAAI,KAAK,QAAQ,GACpED,IAAI,GAAGC,IAAI,GACXE,MAAM,CAACH,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,EAAE,CAAC,CAACI,aAAa,CAACD,MAAM,CAACF,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,EAAE,CAAC,CAAC;QAE1D,OAAOtD,UAAU,CAACG,SAAS,KAAK,WAAW,GAAGoD,aAAa,GAAG,CAACA,aAAa;MAChF,CAAC,CAAC;IACN;IACA,OAAOP,aAAa;EACxB,CAAC,EAAE,CAAC/D,SAAS,EAAEe,UAAU,CAAC,CAAC;;EAE3B;EACA,MAAMqE,UAAU,GAAIC,IAAI,IAAK;IAAE/E,cAAc,CAAC+E,IAAI,CAAC;IAAE7E,iBAAiB,CAAC,IAAI,CAAC;EAAE,CAAC;EAC/E,MAAMzF,YAAY,GAAGA,CAAA,KAAM;IAAEuF,cAAc,CAAC,IAAI,CAAC;EAAE,CAAC;EACpD,MAAMgF,kBAAkB,GAAGA,CAAC5K,KAAK,EAAEC,KAAK,KAAK;IAAE2F,cAAc,CAAC1F,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE,CAACF,KAAK,GAAGC;IAAM,CAAC,CAAC,CAAC;EAAE,CAAC;EACvG,MAAM4K,UAAU,GAAG,MAAOC,UAAU,IAAK;IACrC,MAAMC,UAAU,GAAGD,UAAU,IAAInF,WAAW;IAC5C,IAAI,CAACoF,UAAU,EAAE;IACjB,MAAM3D,KAAK,GAAGF,cAAc,CAACtC,SAAS,CAAC;IACvC,MAAMN,EAAE,GAAGyG,UAAU,CAAC3D,KAAK,CAAC;IAC5B,IAAI9C,EAAE,KAAK9B,SAAS,IAAIoC,SAAS,KAAK,WAAW,EAAE;MAAE;MAChD,IAAIA,SAAS,KAAK,WAAW,IAAIe,WAAW,aAAXA,WAAW,eAAXA,WAAW,CAAEvB,WAAW,EAAE;QACvD;QACAE,EAAE,GAAGqB,WAAW,CAACvB,WAAW;QAC5B2G,UAAU,CAAC3G,WAAW,GAAGE,EAAE,CAAC,CAAC;MACjC,CAAC,MAAM;QACJjF,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEyL,UAAU,CAAC;QACxDrF,QAAQ,CAAC,0CAA0C,CAAC;QACpD;MACH;IACL;IACArG,OAAO,CAACmI,GAAG,CAAC,2BAA2BlD,EAAE,UAAUM,SAAS,IAAI,EAAEmG,UAAU,CAAC;IAC7EtF,UAAU,CAAC,IAAI,CAAC;IAChBC,QAAQ,CAAC,EAAE,CAAC;IACZ,IAAI;MACA,IAAIgC,QAAQ;MACZ,QAAQ9C,SAAS;QACb,KAAK,UAAU;UAAE8C,QAAQ,GAAG,GAAG/J,MAAM,iBAAiB2G,EAAE,EAAE;UAAE;QAC5D,KAAK,eAAe;UAAEoD,QAAQ,GAAG,GAAG/J,MAAM,sBAAsB2G,EAAE,EAAE;UAAE;QACtE,KAAK,KAAK;UAAEoD,QAAQ,GAAG,GAAG/J,MAAM,YAAY2G,EAAE,EAAE;UAAE;QAClD,KAAK,SAAS;UAAEoD,QAAQ,GAAG,GAAG/J,MAAM,gBAAgB2G,EAAE,EAAE;UAAE;QAC1D,KAAK,WAAW;UAAEoD,QAAQ,GAAG,GAAG/J,MAAM,kBAAkB2G,EAAE,EAAE;UAAE;QAAO;QACrE;UAAS,MAAM,IAAI0G,KAAK,CAAC,oCAAoC,CAAC;MAClE;MACA,MAAM3N,KAAK,CAAC4N,GAAG,CAACvD,QAAQ,EAAEqD,UAAU,CAAC;MACrCnF,cAAc,CAAC,IAAI,CAAC;MACpB,MAAMyB,SAAS,CAAC,CAAC;MACjBhI,OAAO,CAACmI,GAAG,CAAC,aAAalD,EAAE,uBAAuB,CAAC;IACvD,CAAC,CAAC,OAAO+D,GAAG,EAAE;MAAA,IAAA6C,aAAA,EAAAC,cAAA,EAAAC,mBAAA;MACV/L,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAE,EAAA4L,aAAA,GAAA7C,GAAG,CAACZ,QAAQ,cAAAyD,aAAA,uBAAZA,aAAA,CAAc9C,IAAI,KAAIC,GAAG,CAACC,OAAO,IAAID,GAAG,CAAC;MAC3F3C,QAAQ,CAAC,EAAAyF,cAAA,GAAA9C,GAAG,CAACZ,QAAQ,cAAA0D,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc/C,IAAI,cAAAgD,mBAAA,uBAAlBA,mBAAA,CAAoB9L,KAAK,KAAI,8BAA8B,CAAC;IACzE,CAAC,SAAS;MACNmG,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EACD,MAAM4F,iBAAiB,GAAGA,CAAA,KAAM;IAAEvF,iBAAiB,CAAClB,SAAS,CAAC;IAAEgB,cAAc,CAAC,IAAI,CAAC;EAAE,CAAC;EACvF,MAAM0F,eAAe,GAAGA,CAAA,KAAM;IAAExF,iBAAiB,CAAC,IAAI,CAAC;EAAE,CAAC;EAC1D,MAAMyF,aAAa,GAAG,MAAOC,WAAW,IAAK;IAAE;IAC3C,MAAMvN,IAAI,GAAG4H,cAAc;IAC3B,IAAI,CAAC5H,IAAI,EAAE;IACXoB,OAAO,CAACmI,GAAG,CAAC,cAAcvJ,IAAI,GAAG,EAAEuN,WAAW,CAAC;IAC/C/F,UAAU,CAAC,IAAI,CAAC;IAChBC,QAAQ,CAAC,EAAE,CAAC;IACZ,IAAI;MACA,IAAIgC,QAAQ;MACZ,QAAQzJ,IAAI;QACR,KAAK,UAAU;UAAEyJ,QAAQ,GAAG,GAAG/J,MAAM,eAAe;UAAE;QACtD,KAAK,eAAe;UAAE+J,QAAQ,GAAG,GAAG/J,MAAM,oBAAoB;UAAE;QAChE,KAAK,KAAK;UAAE+J,QAAQ,GAAG,GAAG/J,MAAM,UAAU;UAAE;QAC5C,KAAK,SAAS;UAAE+J,QAAQ,GAAG,GAAG/J,MAAM,cAAc;UAAE;QACpD,KAAK,WAAW;UAAE+J,QAAQ,GAAG,GAAG/J,MAAM,gBAAgB;UAAE;QACxD;UAAS,MAAM,IAAIqN,KAAK,CAAC,gCAAgC,CAAC;MAC9D;MACA,MAAM3N,KAAK,CAACoO,IAAI,CAAC/D,QAAQ,EAAE8D,WAAW,CAAC;MACvC1F,iBAAiB,CAAC,IAAI,CAAC;MACvB,MAAMuB,SAAS,CAAC,CAAC;MACjBhI,OAAO,CAACmI,GAAG,CAAC,gBAAgBvJ,IAAI,sBAAsB,CAAC;IAC3D,CAAC,CAAC,OAAOoK,GAAG,EAAE;MAAA,IAAAqD,cAAA,EAAAC,cAAA,EAAAC,mBAAA;MACVvM,OAAO,CAACC,KAAK,CAAC,yBAAyBrB,IAAI,GAAG,EAAE,EAAAyN,cAAA,GAAArD,GAAG,CAACZ,QAAQ,cAAAiE,cAAA,uBAAZA,cAAA,CAActD,IAAI,KAAIC,GAAG,CAACC,OAAO,IAAID,GAAG,CAAC;MACzF3C,QAAQ,CAAC,EAAAiG,cAAA,GAAAtD,GAAG,CAACZ,QAAQ,cAAAkE,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcvD,IAAI,cAAAwD,mBAAA,uBAAlBA,mBAAA,CAAoBtM,KAAK,KAAI,gCAAgC,CAAC;IAC3E,CAAC,SAAS;MACNmG,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EACD,MAAMoG,YAAY,GAAG,MAAOC,UAAU,IAAK;IAAE;IACzC,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,8CAA8C,CAAC,EAAE;MAAE;IAAQ;IAC/E,MAAM5E,KAAK,GAAGF,cAAc,CAACtC,SAAS,CAAC;IACvCvF,OAAO,CAACmI,GAAG,CAAC,0BAA0BsE,UAAU,UAAU1E,KAAK,aAAaxC,SAAS,EAAE,CAAC;IACxFa,UAAU,CAAC,IAAI,CAAC;IAChBC,QAAQ,CAAC,EAAE,CAAC;IACZ,IAAI;MACA,IAAIgC,QAAQ;MACZ,QAAQ9C,SAAS;QACb,KAAK,UAAU;UAAE8C,QAAQ,GAAG,GAAG/J,MAAM,iBAAiBmO,UAAU,EAAE;UAAE;QACpE,KAAK,eAAe;UAAEpE,QAAQ,GAAG,GAAG/J,MAAM,sBAAsBmO,UAAU,EAAE;UAAE;QAC9E,KAAK,KAAK;UAAEpE,QAAQ,GAAG,GAAG/J,MAAM,YAAYmO,UAAU,EAAE;UAAE;QAC1D,KAAK,SAAS;UAAEpE,QAAQ,GAAG,GAAG/J,MAAM,gBAAgBmO,UAAU,EAAE;UAAE;QAClE,KAAK,WAAW;UAAEpE,QAAQ,GAAG,GAAG/J,MAAM,kBAAkBmO,UAAU,EAAE;UAAE;QAAO;QAC7E;UAAS,MAAM,IAAId,KAAK,CAAC,kCAAkC,CAAC;MAChE;MACA,MAAM3N,KAAK,CAAC4O,MAAM,CAACvE,QAAQ,CAAC;MAC5B,IAAI/B,WAAW,IAAIA,WAAW,CAACyB,KAAK,CAAC,KAAK0E,UAAU,EAAE;QAAElG,cAAc,CAAC,IAAI,CAAC;MAAE;MAC9E,MAAMyB,SAAS,CAAC,CAAC;MACjBhI,OAAO,CAACmI,GAAG,CAAC,aAAasE,UAAU,yBAAyB,CAAC;IACjE,CAAC,CAAC,OAAOzD,GAAG,EAAE;MAAA,IAAA6D,cAAA,EAAAC,cAAA,EAAAC,mBAAA;MACV/M,OAAO,CAACC,KAAK,CAAC,qCAAqCwM,UAAU,IAAI,EAAE,EAAAI,cAAA,GAAA7D,GAAG,CAACZ,QAAQ,cAAAyE,cAAA,uBAAZA,cAAA,CAAc9D,IAAI,KAAIC,GAAG,CAACC,OAAO,IAAID,GAAG,CAAC;MAC5G3C,QAAQ,CAAC,EAAAyG,cAAA,GAAA9D,GAAG,CAACZ,QAAQ,cAAA0E,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc/D,IAAI,cAAAgE,mBAAA,uBAAlBA,mBAAA,CAAoB9M,KAAK,KAAI,8DAA8D,CAAC;IACzG,CAAC,SAAS;MACNmG,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;;EAED;EACA,MAAM4G,WAAW,GAAIC,SAAS,IAAK;IAAE,SAAU,OAAOA,SAAS,KAAK,CAAC,GAAG,cAAc,GAAGA,SAAS,KAAK,CAAC,GAAG,aAAa,GAAG,YAAY;EAAE,CAAC;EAC1I,MAAMC,oBAAoB,GAAGA,CAACC,KAAK,EAAEjG,GAAG;EAAA;EAAO;EAAU/I,OAAA;IAAIkE,OAAO,EAAEA,CAAA,KAAMuF,WAAW,CAACV,GAAG,CAAE;IAAChG,SAAS,EAAC,iBAAiB;IAAAC,QAAA,GAAC,GAAC,EAACgM,KAAK,EAAC,GAAC,EAACnG,UAAU,CAACE,GAAG,KAAKA,GAAG,GAAIF,UAAU,CAACG,SAAS,KAAK,WAAW,GAAG,IAAI,GAAG,IAAI,GAAI,IAAI,EAAC,GAAC;EAAA;IAAA/F,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAI,CAAG;;EAEjO;EACA,IAAI,CAAC8F,IAAI,IAAIlB,OAAO,EAAE,oBAAOhI,OAAA;IAAK+C,SAAS,EAAC,SAAS;IAAAC,QAAA,EAAC;EAAyC;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EACrG,IAAI,CAAC8F,IAAI,EAAE,oBAAOlJ,OAAA;IAAK+C,SAAS,EAAC,OAAO;IAAAC,QAAA,GAAC,0NAAyC,eAAAhD,OAAA;MAAQkE,OAAO,EAAEA,CAAA,KAAM+E,QAAQ,CAAC,QAAQ,CAAE;MAAAjG,QAAA,EAAC;IAAK;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EACjJ,IAAI8F,IAAI,CAACY,IAAI,KAAK,CAAC,EAAE,oBAAO9J,OAAA;IAAK+C,SAAS,EAAC,OAAO;IAAAC,QAAA,EAAC;EAAgB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EACzE,MAAM6L,oBAAoB,GAAGjH,OAAO,IAAI,CAAClG,KAAK;EAE9C,oBACI9B,OAAA;IAAK+C,SAAS,EAAC,aAAa;IAAAC,QAAA,gBAExBhD,OAAA;MAAK+C,SAAS,EAAC,cAAc;MAAAC,QAAA,gBACzBhD,OAAA;QAAAgD,QAAA,EAAI;MAAqB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC9BpD,OAAA;QAAK+C,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC5BhD,OAAA;UAAQkE,OAAO,EAAEA,CAAA,KAAM+E,QAAQ,CAAC,QAAQ,CAAE;UAAClG,SAAS,EAAC,aAAa;UAAAC,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACjFpD,OAAA;UAAQkE,OAAO,EAAEA,CAAA,KAAM;YAAEkF,YAAY,CAACI,UAAU,CAAC,MAAM,CAAC;YAAEP,QAAQ,CAAC,QAAQ,CAAC;UAAE,CAAE;UAAClG,SAAS,EAAC,eAAe;UAAAC,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGNpD,OAAA;MAAK+C,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACvBhD,OAAA;QAAQ+C,SAAS,EAAE,cAAcqE,SAAS,KAAK,UAAU,GAAG,QAAQ,GAAG,EAAE,EAAG;QAAClD,OAAO,EAAEA,CAAA,KAAMmD,YAAY,CAAC,UAAU,CAAE;QAAArE,QAAA,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACxIpD,OAAA;QAAQ+C,SAAS,EAAE,cAAcqE,SAAS,KAAK,eAAe,GAAG,QAAQ,GAAG,EAAE,EAAG;QAAClD,OAAO,EAAEA,CAAA,KAAMmD,YAAY,CAAC,eAAe,CAAE;QAAArE,QAAA,EAAC;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACpJpD,OAAA;QAAQ+C,SAAS,EAAE,cAAcqE,SAAS,KAAK,KAAK,GAAG,QAAQ,GAAG,EAAE,EAAG;QAAClD,OAAO,EAAEA,CAAA,KAAMmD,YAAY,CAAC,KAAK,CAAE;QAAArE,QAAA,EAAC;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACxHpD,OAAA;QAAQ+C,SAAS,EAAE,cAAcqE,SAAS,KAAK,SAAS,GAAG,QAAQ,GAAG,EAAE,EAAG;QAAClD,OAAO,EAAEA,CAAA,KAAMmD,YAAY,CAAC,SAAS,CAAE;QAAArE,QAAA,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAEtIpD,OAAA;QAAQ+C,SAAS,EAAE,cAAcqE,SAAS,KAAK,WAAW,GAAG,QAAQ,GAAG,EAAE,EAAG;QAAClD,OAAO,EAAEA,CAAA,KAAMmD,YAAY,CAAC,WAAW,CAAE;QAAArE,QAAA,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzI,CAAC,EAGL6L,oBAAoB,iBAAIjP,OAAA;MAAK+C,SAAS,EAAC,gBAAgB;MAAAC,QAAA,EAAC;IAAoB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,EAClFtB,KAAK,iBAAI9B,OAAA;MAAK+C,SAAS,EAAC,cAAc;MAAAC,QAAA,GAAElB,KAAK,EAAC,GAAC,eAAA9B,OAAA;QAAQkE,OAAO,EAAEA,CAAA,KAAMgE,QAAQ,CAAC,EAAE,CAAE;QAACgH,KAAK,EAAC,iFAAgB;QAAAlM,QAAA,EAAC;MAAC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAG5HpD,OAAA;MAAK+C,SAAS,EAAC,eAAe;MAAAC,QAAA,GAGxB,CAACqF,cAAc,KAAK,SAAS,IAAKF,WAAW,IAAIf,SAAS,KAAK,SAAU,kBAAOpH,OAAA,CAACuE,UAAU;QAA0DC,WAAW,EAAE2D,WAAW,IAAI,CAAC,CAAE;QAACnG,MAAM,EAAEmG,WAAW,GAAGkF,UAAU,GAAGU,aAAc;QAAC9L,QAAQ,EAAEkG,WAAW,GAAGtF,YAAY,GAAGiL,eAAgB;QAACrJ,SAAS,EAAE,CAAC,CAAC0D;MAAY,GAAvNA,WAAW,GAAGA,WAAW,CAACzC,SAAS,GAAG,YAAY;QAAAzC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAuK,CAAG,EAC7TiF,cAAc,IAAIA,cAAc,KAAK,SAAS,IAAIA,cAAc,KAAK,WAAW,iBAAMrI,OAAA,CAAC+B,WAAW;QAA+BtB,IAAI,EAAE4H,cAAe;QAACrG,MAAM,EAAE+L,aAAc;QAAC9L,QAAQ,EAAE6L,eAAgB;QAAC5L,YAAY,EAAEA,YAAa;QAACC,gBAAgB,EAAEA;MAAiB,GAAhK,OAAOkG,cAAc,EAAE;QAAApF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAA2I,CAAG,EAE7Q,CAACiF,cAAc,KAAK,WAAW,IAAKF,WAAW,IAAIf,SAAS,KAAK,WAAY,kBAC1EpH,OAAA,CAAC+F,YAAY;QAETvB,WAAW,EAAE2D,WAAW,IAAI,CAAC,CAAE;QAC/BnG,MAAM,EAAEmG,WAAW,GAAGkF,UAAU,GAAGU,aAAc;QACjD9L,QAAQ,EAAEkG,WAAW,GAAGtF,YAAY,GAAGiL,eAAgB;QACvDrJ,SAAS,EAAE,CAAC,CAAC0D,WAAY;QACzBnC,UAAU,EAAE4B,OAAQ,CAAC;QAAA;QACrB3B,WAAW,EAAEA,WAAY,CAAC;MAAA,GANrBkC,WAAW,GAAGA,WAAW,CAACvB,WAAW,GAAG,cAAc;QAAA3D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAO9D,CACJ,EAID,CAAC+E,WAAW,IAAI,CAACE,cAAc,iBAC5BrI,OAAA;QAAQkE,OAAO,EAAE2J,iBAAkB;QAAC9K,SAAS,EAAC,YAAY;QAAAC,QAAA,GAAC,mDAC9C,EACLoE,SAAS,KAAK,UAAU,GAAG,WAAW,GACtCA,SAAS,KAAK,eAAe,GAAG,aAAa,GAC7CA,SAAS,KAAK,KAAK,GAAG,KAAK,GAC3BA,SAAS,KAAK,SAAS,GAAG,WAAW,GACrCA,SAAS,KAAK,WAAW,GAAG,UAAU,GAAG,EAAE,CAAC;QAAA;MAAA;QAAAnE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAE5C,CACX,EAGAgE,SAAS,KAAK,UAAU,iBAAMpH,OAAA;QAAO+C,SAAS,EAAC,aAAa;QAAAC,QAAA,GAAC,GAAC,EAA2B,GAAC,eAAAhD,OAAA;UAAAgD,QAAA,eAAOhD,OAAA;YAAAgD,QAAA,GAAI,GAAC,EAAC+L,oBAAoB,CAAC,GAAG,EAAE,YAAY,CAAC,EAAC,GAAC,EAACA,oBAAoB,CAAC,UAAU,EAAE,cAAc,CAAC,EAAC,GAAC,EAACA,oBAAoB,CAAC,KAAK,EAAE,WAAW,CAAC,EAAC,GAAC,eAAA/O,OAAA;cAAAgD,QAAA,EAAI;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,KAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,KAAC,eAAApD,OAAA;UAAAgD,QAAA,GAAO,GAAC,EAAC4I,cAAc,CAAChI,GAAG,CAAC,CAACuL,OAAO,EAAEC,KAAK,kBAAOpP,OAAA;YAAAgD,QAAA,GAA6B,GAAC,EAAC,CAAAmF,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAE9B,UAAU,MAAK8I,OAAO,CAAC9I,UAAU,gBAAIrG,OAAA,CAAAE,SAAA;cAAA8C,QAAA,GAAE,GAAC,eAAAhD,OAAA;gBAAAgD,QAAA,EAAKoM,KAAK,GAAG;cAAC;gBAAAnM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,GAAI,GAAC,eAAAhD,OAAA;kBAAOS,IAAI,EAAC,MAAM;kBAACgC,KAAK,EAAE0F,WAAW,CAAC5E,YAAa;kBAACC,QAAQ,EAAG5B,CAAC,IAAKwL,kBAAkB,CAAC,cAAc,EAAExL,CAAC,CAAC6B,MAAM,CAAChB,KAAK;gBAAE;kBAAAQ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,KAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,GAAI,GAAC,EAACmM,OAAO,CAACrL,SAAS,IAAI,KAAK,EAAC,GAAC;cAAA;gBAAAb,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,GAAI,GAAC,eAAAhD,OAAA;kBAAQkE,OAAO,EAAEA,CAAA,KAAMmJ,UAAU,CAAC,CAAE;kBAAArK,QAAA,EAAC;gBAAS;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,eAAApD,OAAA;kBAAQkE,OAAO,EAAErB,YAAa;kBAAAG,QAAA,EAAC;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC;YAAA,eAAE,CAAC,gBAAKpD,OAAA,CAAAE,SAAA;cAAA8C,QAAA,GAAE,GAAC,eAAAhD,OAAA;gBAAAgD,QAAA,EAAKoM,KAAK,GAAG;cAAC;gBAAAnM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,EAAKmM,OAAO,CAAC5L;cAAY;gBAAAN,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,EAAKmM,OAAO,CAACrL,SAAS,IAAI;cAAK;gBAAAb,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAI+C,SAAS,EAAC,cAAc;gBAAAC,QAAA,GAAC,GAAC,eAAAhD,OAAA;kBAAQkE,OAAO,EAAEA,CAAA,KAAMgJ,UAAU,CAACiC,OAAO,CAAE;kBAACxL,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;kBAAAnF,QAAA,EAAC;gBAAO;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,eAAApD,OAAA;kBAAQkE,OAAO,EAAEA,CAAA,KAAMmK,YAAY,CAACc,OAAO,CAAC9I,UAAU,CAAE;kBAACtD,SAAS,EAAC,eAAe;kBAACY,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;kBAAAnF,QAAA,EAAC;gBAAO;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC;YAAA,eAAE,CAAG,EAAC,GAAC;UAAA,GAA7wB+L,OAAO,CAAC9I,UAAU;YAAApD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAA+vB,CAAG,CAAC,EAAC,GAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,KAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAG,EAElnCgE,SAAS,KAAK,eAAe,iBAAMpH,OAAA;QAAO+C,SAAS,EAAC,aAAa;QAAAC,QAAA,GAAC,GAAC,EAA2B,GAAC,eAAAhD,OAAA;UAAAgD,QAAA,eAAOhD,OAAA;YAAAgD,QAAA,GAAI,GAAC,EAAC+L,oBAAoB,CAAC,GAAG,EAAE,QAAQ,CAAC,EAAC,GAAC,EAACA,oBAAoB,CAAC,iBAAiB,EAAE,OAAO,CAAC,EAAC,GAAC,EAACA,oBAAoB,CAAC,kBAAkB,EAAE,OAAO,CAAC,EAAC,GAAC,eAAA/O,OAAA;cAAAgD,QAAA,EAAI;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,KAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,KAAC,eAAApD,OAAA;UAAAgD,QAAA,GAAO,GAAC,EAACiJ,mBAAmB,CAACrI,GAAG,CAAC,CAACI,GAAG,EAAEoL,KAAK,kBAAOpP,OAAA;YAAAgD,QAAA,GAAqB,GAAC,EAAC,CAAAmF,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEpE,MAAM,MAAKC,GAAG,CAACD,MAAM,gBAAI/D,OAAA,CAAAE,SAAA;cAAA8C,QAAA,GAAE,GAAC,eAAAhD,OAAA;gBAAAgD,QAAA,EAAKoM,KAAK,GAAG;cAAC;gBAAAnM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,eAAIhD,OAAA;kBAAOS,IAAI,EAAC,MAAM;kBAACgC,KAAK,EAAE0F,WAAW,CAAClE,KAAM;kBAACT,QAAQ,EAAG5B,CAAC,IAAKwL,kBAAkB,CAAC,OAAO,EAAExL,CAAC,CAAC6B,MAAM,CAAChB,KAAK;gBAAE;kBAAAQ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,eAAIhD,OAAA;kBAAOS,IAAI,EAAC,MAAM;kBAACgC,KAAK,EAAE0F,WAAW,CAAChE,KAAM;kBAACX,QAAQ,EAAG5B,CAAC,IAAKwL,kBAAkB,CAAC,OAAO,EAAExL,CAAC,CAAC6B,MAAM,CAAChB,KAAK;gBAAE;kBAAAQ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,GAAI,GAAC,eAAAhD,OAAA;kBAAQkE,OAAO,EAAEmJ,UAAW;kBAAArK,QAAA,EAAC;gBAAS;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,eAAApD,OAAA;kBAAQkE,OAAO,EAAErB,YAAa;kBAAAG,QAAA,EAAC;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC;YAAA,eAAE,CAAC,gBAAKpD,OAAA,CAAAE,SAAA;cAAA8C,QAAA,GAAE,GAAC,eAAAhD,OAAA;gBAAAgD,QAAA,EAAKoM,KAAK,GAAG;cAAC;gBAAAnM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,EAAKgB,GAAG,CAACC;cAAK;gBAAAhB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,EAAKgB,GAAG,CAACG;cAAK;gBAAAlB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAI+C,SAAS,EAAC,cAAc;gBAAAC,QAAA,GAAC,GAAC,eAAAhD,OAAA;kBAAQkE,OAAO,EAAEA,CAAA,KAAMgJ,UAAU,CAAClJ,GAAG,CAAE;kBAACL,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;kBAAAnF,QAAA,EAAC;gBAAO;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,eAAApD,OAAA;kBAAQkE,OAAO,EAAEA,CAAA,KAAMmK,YAAY,CAACrK,GAAG,CAACD,MAAM,CAAE;kBAAChB,SAAS,EAAC,eAAe;kBAACY,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;kBAAAnF,QAAA,EAAC;gBAAO;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC;YAAA,eAAE,CAAG,EAAC,GAAC;UAAA,GAAxwBY,GAAG,CAACD,MAAM;YAAAd,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAkwB,CAAG,CAAC,EAAC,GAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,KAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAG,EAEznCgE,SAAS,KAAK,KAAK,iBAAMpH,OAAA;QAAO+C,SAAS,EAAC,aAAa;QAAAC,QAAA,GAAC,GAAC,EAA2B,GAAC,eAAAhD,OAAA;UAAAgD,QAAA,eAAOhD,OAAA;YAAAgD,QAAA,GAAI,GAAC,EAAC+L,oBAAoB,CAAC,GAAG,EAAE,QAAQ,CAAC,EAAC,GAAC,EAACA,oBAAoB,CAAC,UAAU,EAAE,UAAU,CAAC,EAAC,GAAC,EAACA,oBAAoB,CAAC,qBAAqB,EAAE,WAAW,CAAC,EAAC,GAAC,eAAA/O,OAAA;cAAAgD,QAAA,EAAI;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,KAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,KAAC,eAAApD,OAAA;UAAAgD,QAAA,GAAO,GAAC,EAACuJ,SAAS,CAAC3I,GAAG,CAAC,CAACyL,OAAO,EAAED,KAAK,kBAAOpP,OAAA;YAAAgD,QAAA,GAAyB,GAAC,EAAC,CAAAmF,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEmH,MAAM,MAAKD,OAAO,CAACC,MAAM,gBAAItP,OAAA,CAAAE,SAAA;cAAA8C,QAAA,GAAE,GAAC,eAAAhD,OAAA;gBAAAgD,QAAA,EAAKoM,KAAK,GAAG;cAAC;gBAAAnM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,eAAIhD,OAAA;kBAAOS,IAAI,EAAC,MAAM;kBAACgC,KAAK,EAAE0F,WAAW,CAAC/D,QAAS;kBAACZ,QAAQ,EAAG5B,CAAC,IAAKwL,kBAAkB,CAAC,UAAU,EAAExL,CAAC,CAAC6B,MAAM,CAAChB,KAAK;gBAAE;kBAAAQ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,eAAIhD,OAAA;kBAAOS,IAAI,EAAC,MAAM;kBAACgC,KAAK,EAAE0F,WAAW,CAAC9D,SAAU;kBAACb,QAAQ,EAAG5B,CAAC,IAAKwL,kBAAkB,CAAC,WAAW,EAAExL,CAAC,CAAC6B,MAAM,CAAChB,KAAK;gBAAE;kBAAAQ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,GAAI,GAAC,eAAAhD,OAAA;kBAAQkE,OAAO,EAAEmJ,UAAW;kBAAArK,QAAA,EAAC;gBAAS;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,eAAApD,OAAA;kBAAQkE,OAAO,EAAErB,YAAa;kBAAAG,QAAA,EAAC;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC;YAAA,eAAE,CAAC,gBAAKpD,OAAA,CAAAE,SAAA;cAAA8C,QAAA,GAAE,GAAC,eAAAhD,OAAA;gBAAAgD,QAAA,EAAKoM,KAAK,GAAG;cAAC;gBAAAnM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,EAAKqM,OAAO,CAACjL;cAAQ;gBAAAnB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAAgD,QAAA,EAAKqM,OAAO,CAAChL;cAAS;gBAAApB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,KAAC,eAAApD,OAAA;gBAAI+C,SAAS,EAAC,cAAc;gBAAAC,QAAA,GAAC,GAAC,eAAAhD,OAAA;kBAAQkE,OAAO,EAAEA,CAAA,KAAMgJ,UAAU,CAACmC,OAAO,CAAE;kBAAC1L,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;kBAAAnF,QAAA,EAAC;gBAAO;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,eAAApD,OAAA;kBAAQkE,OAAO,EAAEA,CAAA,KAAMmK,YAAY,CAACgB,OAAO,CAACC,MAAM,CAAE;kBAACvM,SAAS,EAAC,eAAe;kBAACY,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;kBAAAnF,QAAA,EAAC;gBAAO;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,KAAC;YAAA,eAAE,CAAG,EAAC,GAAC;UAAA,GAArzBiM,OAAO,CAACC,MAAM;YAAArM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAA2yB,CAAG,CAAC,EAAC,GAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,KAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAG,EAEzpCgE,SAAS,KAAK,SAAS,iBACrBpH,OAAA;QAAO+C,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BhD,OAAA;UAAAgD,QAAA,eACIhD,OAAA;YAAAgD,QAAA,GACK+L,oBAAoB,CAAC,GAAG,EAAE,WAAW,CAAC,EACtCA,oBAAoB,CAAC,OAAO,EAAE,OAAO,CAAC,EACtCA,oBAAoB,CAAC,eAAe,EAAE,cAAc,CAAC,EACrDA,oBAAoB,CAAC,WAAW,EAAE,UAAU,CAAC,EAC7CA,oBAAoB,CAAC,cAAc,EAAE,WAAW,CAAC,EACjDA,oBAAoB,CAAC,SAAS,EAAE,QAAQ,CAAC,EACzCA,oBAAoB,CAAC,QAAQ,EAAE,MAAM,CAAC,EACtCA,oBAAoB,CAAC,MAAM,EAAE,MAAM,CAAC,eACrC/O,OAAA;cAAAgD,QAAA,EAAI;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,KAAC,eACvBpD,OAAA;cAAAgD,QAAA,EAAI;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC,eACRpD,OAAA;UAAAgD,QAAA,EACKwJ,aAAa,CAAC5I,GAAG,CAAC,CAACmD,CAAC,EAAEqI,KAAK,kBACxBpP,OAAA;YAAAgD,QAAA,gBACIhD,OAAA;cAAAgD,QAAA,EAAKoM,KAAK,GAAG;YAAC;cAAAnM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACpBpD,OAAA;cAAAgD,QAAA,EAAK+D,CAAC,CAACnB;YAAK;cAAA3C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAClBpD,OAAA;cAAAgD,QAAA,EAAK+D,CAAC,CAACpB;YAAY;cAAA1C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACzBpD,OAAA;cAAAgD,QAAA,EAAK+D,CAAC,CAAC9B;YAAQ;cAAAhC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACrBpD,OAAA;cAAAgD,QAAA,EAAK+D,CAAC,CAAC7B;YAAS;cAAAjC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACtBpD,OAAA;cAAAgD,QAAA,EAAK+D,CAAC,CAAC5B,MAAM,IAAI;YAAK;cAAAlC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAC5BpD,OAAA;cAAAgD,QAAA,EAAK+D,CAAC,CAAC3B,IAAI,IAAI;YAAK;cAAAnC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAC1BpD,OAAA;cAAAgD,QAAA,EAAK6L,WAAW,CAAC9H,CAAC,CAAChC,IAAI;YAAC;cAAA9B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAC9BpD,OAAA;cAAAgD,QAAA,EAAK+D,CAAC,CAACwI,WAAW,IAAI;YAAK;cAAAtM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,KAAC,eAClCpD,OAAA;cAAI+C,SAAS,EAAC,cAAc;cAAAC,QAAA,gBACxBhD,OAAA;gBAAQkE,OAAO,EAAEA,CAAA,KAAMgJ,UAAU,CAACnG,CAAC,CAAE;gBAACpD,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;gBAAAnF,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACnGpD,OAAA;gBAAQkE,OAAO,EAAEA,CAAA,KAAMmK,YAAY,CAACtH,CAAC,CAACrB,SAAS,CAAE;gBAAC3C,SAAS,EAAC,eAAe;gBAACY,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;gBAAAnF,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAGzI,CAAC;UAAA,GAfA2D,CAAC,CAACrB,SAAS;YAAAzC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAgBhB,CACP;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACV,EAEAgE,SAAS,KAAK,WAAW,iBACtBpH,OAAA;QAAO+C,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BhD,OAAA;UAAAgD,QAAA,eACIhD,OAAA;YAAAgD,QAAA,GACK+L,oBAAoB,CAAC,GAAG,EAAE,aAAa,CAAC,EACxCA,oBAAoB,CAAC,UAAU,EAAE,YAAY,CAAC,EAC9CA,oBAAoB,CAAC,WAAW,EAAE,aAAa,CAAC,EAChDA,oBAAoB,CAAC,YAAY,EAAE,WAAW,CAAC,EAE/CA,oBAAoB,CAAC,aAAa,EAAE,WAAW,CAAC,eACjD/O,OAAA;cAAAgD,QAAA,EAAI;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC,eACRpD,OAAA;UAAAgD,QAAA,EACK4J,eAAe,CAAChJ,GAAG,CAAC,CAAC4L,GAAG,EAAEJ,KAAK,kBAC5BpP,OAAA;YAAAgD,QAAA,gBAEIhD,OAAA;cAAAgD,QAAA,EAAKoM,KAAK,GAAG;YAAC;cAAAnM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACpBpD,OAAA;cAAAgD,QAAA,EAAKwM,GAAG,CAACC,UAAU,IAAI;YAAK;cAAAxM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAClCpD,OAAA;cAAAgD,QAAA,EAAKwM,GAAG,CAACE,WAAW,IAAI;YAAK;cAAAzM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACnCpD,OAAA;cAAAgD,QAAA,EAAKwM,GAAG,CAAClJ,SAAS,IAAI;YAAK;cAAArD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACjCpD,OAAA;cAAAgD,QAAA,EAAKzC,UAAU,CAACiP,GAAG,CAAC/I,SAAS,EAAE,SAAS;YAAC;cAAAxD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,KAAC,eAChDpD,OAAA;cAAI+C,SAAS,EAAC,cAAc;cAAAC,QAAA,gBAExBhD,OAAA;gBAAQkE,OAAO,EAAEA,CAAA,KAAMgJ,UAAU,CAACsC,GAAG,CAAE;gBAAC7L,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;gBAAAnF,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAErGpD,OAAA;gBAAQkE,OAAO,EAAEA,CAAA,KAAMmK,YAAY,CAACmB,GAAG,CAAC5I,WAAW,CAAE;gBAAC7D,SAAS,EAAC,eAAe;gBAACY,QAAQ,EAAE,CAAC,CAAC0E,cAAc,IAAI,CAAC,CAACF,WAAY;gBAAAnF,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7I,CAAC;UAAA,GAZAoM,GAAG,CAAC5I,WAAW;YAAA3D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAapB,CACP;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAED,CAAC,KAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC,CAAC;EAAA;AAEf;AAAC+D,GAAA,CArdQD,UAAU;EAAA,QAmBEpH,WAAW;AAAA;AAAA6P,GAAA,GAnBvBzI,UAAU;AAudnB,eAAeA,UAAU;AAAC,IAAA5C,EAAA,EAAAwB,GAAA,EAAAmB,GAAA,EAAA0I,GAAA;AAAAC,YAAA,CAAAtL,EAAA;AAAAsL,YAAA,CAAA9J,GAAA;AAAA8J,YAAA,CAAA3I,GAAA;AAAA2I,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}