{"ast":null,"code":"var _jsxFileName = \"D:\\\\Amina\\\\VScode\\\\FQW_new\\\\src\\\\components\\\\AdminPanel.js\",\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport './AdminPanel.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AdminPanel() {\n  _s3();\n  var _s2 = $RefreshSig$();\n  const [activeTab, setActiveTab] = useState('programs');\n  const [programs, setPrograms] = useState([]);\n  const [organizations, setOrganizations] = useState([]);\n  const [kks, setKks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [editingItem, setEditingItem] = useState(null);\n  const [addingItemType, setAddingItemType] = useState(null);\n  const [programTypes, setProgramTypes] = useState([]);\n  const [allOrganizations, setAllOrganizations] = useState([]);\n  const navigate = useNavigate();\n  const apiUrl = process.env.REACT_APP_API_URL;\n  const [users, setUsers] = useState([]); // Состояние для пользователей (добавим позже)\n  const [sortConfig, setSortConfig] = useState({\n    key: null,\n    direction: 'ascending'\n  }); // Состояние для сортировки\n\n  const user = useMemo(() => {\n    const storedUser = localStorage.getItem('user');\n    try {\n      return storedUser ? JSON.parse(storedUser) : null;\n    } catch (e) {\n      console.error(\"Failed to parse user from localStorage\", e);\n      return null;\n    }\n  }, []);\n\n  // --- Функция запроса сортировки ---\n  const requestSort = key => {\n    let direction = 'ascending';\n    if (sortConfig.key === key && sortConfig.direction === 'ascending') {\n      direction = 'descending';\n    }\n    setSortConfig({\n      key,\n      direction\n    });\n  };\n\n  // --- Функция получения ключа ID для текущей вкладки ---\n  const getIdKeyForTab = tab => {\n    switch (tab) {\n      case 'programs':\n        return 'ID_ProgDPO';\n      case 'organizations':\n        return 'ID_Org';\n      case 'kks':\n        return 'ID_KKS';\n      case 'users':\n        return 'ID_User';\n      // Для будущей вкладки\n      default:\n        return null;\n    }\n  };\n  const AddItemForm = ({\n    type,\n    onSave,\n    onCancel,\n    programTypes = [],\n    allOrganizations = []\n  }) => {\n    _s2();\n    var _s = $RefreshSig$();\n    const [newItem, setNewItem] = useState({});\n    useEffect(() => {\n      // Сброс формы при смене типа\n      setNewItem({});\n    }, [type]);\n    const AddItemForm = ({\n      type,\n      onSave,\n      onCancel,\n      programTypes = [],\n      allOrganizations = []\n    }) => {\n      _s();\n      const [newItem, setNewItem] = useState({});\n      useEffect(() => {\n        // Сброс формы при смене типа\n        setNewItem({});\n      }, [type]);\n      const handleChange = (field, value) => {\n        setNewItem(prev => ({\n          ...prev,\n          [field]: value\n        }));\n      };\n      const handleSubmit = e => {\n        e.preventDefault();\n        onSave(newItem);\n        setNewItem({}); // Очистка формы после сохранения\n      };\n      const handleCancel = e => {\n        e.preventDefault();\n        setNewItem({});\n        onCancel();\n      };\n      if (type === 'program') {\n        return /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"add-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0443\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u044B\",\n            required: true,\n            value: newItem.Name_ProgDPO || '',\n            onChange: e => handleChange('Name_ProgDPO', e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            required: true,\n            value: newItem.id_type || '',\n            onChange: e => handleChange('id_type', e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              disabled: true,\n              children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0438\\u043F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 19\n            }, this), programTypes.map(pt => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: pt.id_type,\n              children: pt.Name_Type\n            }, pt.id_type, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 43\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            required: true,\n            value: newItem.ID_Org || '',\n            onChange: e => handleChange('ID_Org', e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              disabled: true,\n              children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 19\n            }, this), allOrganizations.map(org => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: org.ID_Org,\n              children: org.FName\n            }, org.ID_Org, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 48\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleCancel,\n              children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this);\n      }\n      if (type === 'organization') {\n        return /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"add-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",\n            required: true,\n            value: newItem.FName || '',\n            onChange: e => handleChange('FName', e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",\n            required: true,\n            value: newItem.SName || '',\n            onChange: e => handleChange('SName', e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleCancel,\n              children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this);\n      }\n      if (type === 'kks') {\n        return /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"add-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C KKS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 KKS\",\n            required: true,\n            value: newItem.Name_KKS || '' // Используем Name_KKS как на фронте\n            ,\n            onChange: e => handleChange('Name_KKS', e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E\\u0435 \\u043E\\u0431\\u043E\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435\",\n            value: newItem.SName_KKS || '' // Используем SName_KKS как на фронте\n            ,\n            onChange: e => handleChange('SName_KKS', e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleCancel,\n              children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this);\n      }\n\n      // Добавить форму для Users позже\n\n      return null; // Если тип не определен\n    };\n    _s(AddItemForm, \"Ma3KGYVnITn2jfncCAugbkt84zE=\");\n    useEffect(() => {\n      const idKey = getIdKeyForTab(activeTab);\n      if (idKey) {\n        setSortConfig({\n          key: idKey,\n          direction: 'ascending'\n        });\n      } else {\n        setSortConfig({\n          key: null,\n          direction: 'ascending'\n        }); // Сброс для неизвестных вкладок\n      }\n      // fetchData будет вызван следующим useEffect\n    }, [activeTab]);\n    useEffect(() => {\n      if ((user === null || user === void 0 ? void 0 : user.role) !== 1) {\n        navigate('/login');\n        return;\n      }\n      fetchData();\n    }, [activeTab, user, navigate]);\n    const fetchData = async () => {\n      if (!user || user.role !== 1) {\n        console.warn(\"fetchData called without admin user, aborting.\");\n        setLoading(false);\n        return;\n      }\n      setLoading(true);\n      setError('');\n      try {\n        setLoading(true);\n        let response;\n        let endpoint;\n        switch (activeTab) {\n          case 'programs':\n            endpoint = `${apiUrl}/api/programs`;\n            break;\n          case 'organizations':\n            endpoint = `${apiUrl}/api/organizations`;\n            break;\n          case 'kks':\n            endpoint = `${apiUrl}/api/kks`;\n            break;\n          case 'users':\n            endpoint = `${apiUrl}/api/users`;\n            break;\n          default:\n            console.warn(`Unknown activeTab: ${activeTab}`);\n            setLoading(false);\n            return;\n        }\n        console.log(`Attempting to fetch ${endpoint}...`);\n        response = await axios.get(endpoint);\n        console.log(`Received response from ${endpoint}`, response.status);\n        switch (activeTab) {\n          case 'programs':\n            setPrograms(response.data);\n            break;\n          case 'organizations':\n            setOrganizations(response.data);\n            break;\n          case 'kks':\n            setKks(response.data);\n            break;\n          case 'users':\n            setUsers(response.data);\n            break;\n          // Для будущей вкладки\n        }\n        setError('');\n      } catch (err) {\n        var _err$response, _err$response$data;\n        console.error(`Error fetching ${activeTab}:`, err.response || err.message || err);\n        setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || `Ошибка при загрузке данных для ${activeTab}`);\n      } finally {\n        console.log(`Setting loading to false for ${activeTab}.`);\n        setLoading(false);\n      }\n    };\n\n    // --- Мемоизированные отсортированные данные ---\n    const sortedPrograms = useMemo(() => {\n      let sortableItems = [...programs];\n      if (sortConfig.key) {\n        sortableItems.sort((a, b) => {\n          if (a[sortConfig.key] < b[sortConfig.key]) {\n            return sortConfig.direction === 'ascending' ? -1 : 1;\n          }\n          if (a[sortConfig.key] > b[sortConfig.key]) {\n            return sortConfig.direction === 'ascending' ? 1 : -1;\n          }\n          return 0;\n        });\n      }\n      return sortableItems;\n    }, [programs, sortConfig]);\n    const sortedOrganizations = useMemo(() => {\n      // ... аналогично для organizations ...\n      let sortableItems = [...organizations];\n      if (sortConfig.key) {\n        sortableItems.sort((a, b) => {\n          // Проверка на число (для ID) или строку\n          const valA = a[sortConfig.key];\n          const valB = b[sortConfig.key];\n          const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA).localeCompare(String(valB));\n          return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\n        });\n      }\n      return sortableItems;\n    }, [organizations, sortConfig]);\n    const sortedKks = useMemo(() => {\n      // ... аналогично для kks ...\n      let sortableItems = [...kks];\n      if (sortConfig.key) {\n        sortableItems.sort((a, b) => {\n          const valA = a[sortConfig.key];\n          const valB = b[sortConfig.key];\n          const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA).localeCompare(String(valB));\n          return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\n        });\n      }\n      return sortableItems;\n    }, [kks, sortConfig]);\n    const sortedUsers = useMemo(() => {\n      // Для будущей вкладки\n      // ... аналогично для users ...\n      let sortableItems = [...users];\n      if (sortConfig.key) {\n        sortableItems.sort((a, b) => {\n          const valA = a[sortConfig.key];\n          const valB = b[sortConfig.key];\n          // Пример обработки роли как числа\n          if (sortConfig.key === 'Role' && typeof valA === 'number' && typeof valB === 'number') {\n            const compareResult = valA - valB;\n            return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\n          }\n          // Стандартное сравнение для остальных полей\n          const compareResult = String(valA !== null && valA !== void 0 ? valA : '').localeCompare(String(valB !== null && valB !== void 0 ? valB : '')); // Добавим ?? '' для null/undefined\n          return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\n        });\n      }\n      return sortableItems;\n    }, [users, sortConfig]);\n    const handleEdit = item => {\n      setEditingItem(item);\n    };\n    const handleSave = async () => {\n      try {\n        let endpoint;\n        switch (activeTab) {\n          case 'programs':\n            endpoint = `${apiUrl}/api/programs/${editingItem.ID_ProgDPO}`;\n            await axios.put(endpoint, editingItem);\n            break;\n          case 'organizations':\n            endpoint = `${apiUrl}/api/organizations/${editingItem.ID_Org}`;\n            await axios.put(endpoint, editingItem);\n            break;\n          case 'kks':\n            endpoint = `${apiUrl}/api/kks/${editingItem.ID_KKS}`;\n            await axios.put(endpoint, editingItem);\n            break;\n          default:\n            break;\n        }\n        setEditingItem(null);\n        fetchData();\n      } catch (err) {\n        var _err$response2, _err$response2$data;\n        setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Ошибка при сохранении данных');\n      }\n    };\n    const handleCancel = () => {\n      setEditingItem(null);\n    };\n    const handleBack = () => {\n      // Navigate back based on user role\n      navigate((user === null || user === void 0 ? void 0 : user.role) === 1 ? '/admin' : '/user'); // Navigate to admin or user dashboard\n    };\n    const handleChange = (field, value) => {\n      setEditingItem(prev => ({\n        ...prev,\n        [field]: value\n      }));\n    };\n    const handleLogout = () => {\n      localStorage.removeItem('user');\n      navigate('/login');\n    };\n    if (!user && loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430 \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 32\n    }, this);\n    if (!user) return null;\n    if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 23\n    }, this);\n    if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 21\n    }, this);\n    const renderSortableHeader = (label, key) => /*#__PURE__*/_jsxDEV(\"th\", {\n      onClick: () => requestSort(key),\n      className: \"sortable-header\",\n      children: [label, sortConfig.key === key ? sortConfig.direction === 'ascending' ? ' ▲' : ' ▼' : ' ↕']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 5\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleBack,\n            className: \"back-button\",\n            children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: \"logout-button\",\n            children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'programs' ? 'active' : ''}`,\n          onClick: () => setActiveTab('programs'),\n          children: \"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'organizations' ? 'active' : ''}`,\n          onClick: () => setActiveTab('organizations'),\n          children: \"\\u041E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'kks' ? 'active' : ''}`,\n          onClick: () => setActiveTab('kks'),\n          children: \"\\u041A\\u041A\\u0421\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-content\",\n        children: [activeTab === 'programs' && /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"admin-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [renderSortableHeader('ID', 'ID_ProgDPO'), renderSortableHeader('Название', 'Name_ProgDPO'), renderSortableHeader('Тип', 'Name_Type'), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: sortedPrograms.map(program => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: (editingItem === null || editingItem === void 0 ? void 0 : editingItem.ID_ProgDPO) === program.ID_ProgDPO ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: program.ID_ProgDPO\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editingItem.Name_ProgDPO,\n                    onChange: e => handleChange('Name_ProgDPO', e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 399,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editingItem.Name_Type,\n                    onChange: e => handleChange('Name_Type', e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 406,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 405,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleSave,\n                    children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleCancel,\n                    children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: program.ID_ProgDPO\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: program.Name_ProgDPO\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: program.Name_Type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleEdit(program),\n                    children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 423,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, program.ID_ProgDPO, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), activeTab === 'organizations' && /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"admin-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [renderSortableHeader('ID', 'ID_Org'), renderSortableHeader('Полное название', 'FName'), renderSortableHeader('Краткое название', 'SName'), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: sortedOrganizations.map(org => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: (editingItem === null || editingItem === void 0 ? void 0 : editingItem.ID_Org) === org.ID_Org ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: org.ID_Org\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editingItem.FName,\n                    onChange: e => handleChange('FName', e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 450,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editingItem.SName,\n                    onChange: e => handleChange('SName', e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleSave,\n                    children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 464,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleCancel,\n                    children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 465,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: org.ID_Org\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: org.FName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: org.SName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 472,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleEdit(org),\n                    children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 474,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, org.ID_Org, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this), activeTab === 'kks' && /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"admin-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [renderSortableHeader('ID', 'ID_KKS'), renderSortableHeader('Название', 'Name_KKS'), renderSortableHeader('Краткое обозначение', 'SName_KKS'), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: sortedKks.map(kksItem => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: (editingItem === null || editingItem === void 0 ? void 0 : editingItem.ID_KKS) === kksItem.ID_KKS ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: kksItem.ID_KKS\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editingItem.Name_KKS,\n                    onChange: e => handleChange('Name_KKS', e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 501,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editingItem.SName_KKS,\n                    onChange: e => handleChange('SName_KKS', e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 508,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 507,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleSave,\n                    children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 515,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleCancel,\n                    children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 516,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: kksItem.ID_KKS\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: kksItem.Name_KKS\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: kksItem.SName_KKS\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleEdit(kksItem),\n                    children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, kksItem.ID_KKS, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 5\n    }, this);\n  };\n  _s2(AddItemForm, \"Ij3PLCocnp6RXsivsDEgCtG1SEk=\");\n}\n_s3(AdminPanel, \"7vujteV4vVPAFJZCJB1AJqFxd38=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminPanel;\nexport default AdminPanel;\nvar _c;\n$RefreshReg$(_c, \"AdminPanel\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","axios","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminPanel","_s3","_s2","$RefreshSig$","activeTab","setActiveTab","programs","setPrograms","organizations","setOrganizations","kks","setKks","loading","setLoading","error","setError","editingItem","setEditingItem","addingItemType","setAddingItemType","programTypes","setProgramTypes","allOrganizations","setAllOrganizations","navigate","apiUrl","process","env","REACT_APP_API_URL","users","setUsers","sortConfig","setSortConfig","key","direction","user","storedUser","localStorage","getItem","JSON","parse","e","console","requestSort","getIdKeyForTab","tab","AddItemForm","type","onSave","onCancel","_s","newItem","setNewItem","handleChange","field","value","prev","handleSubmit","preventDefault","handleCancel","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","required","Name_ProgDPO","onChange","target","id_type","disabled","map","pt","Name_Type","ID_Org","org","FName","onClick","SName","Name_KKS","SName_KKS","idKey","role","fetchData","warn","response","endpoint","log","get","status","data","err","_err$response","_err$response$data","message","sortedPrograms","sortableItems","sort","a","b","sortedOrganizations","valA","valB","compareResult","String","localeCompare","sortedKks","sortedUsers","handleEdit","item","handleSave","ID_ProgDPO","put","ID_KKS","_err$response2","_err$response2$data","handleBack","handleLogout","removeItem","renderSortableHeader","label","program","kksItem","_c","$RefreshReg$"],"sources":["D:/Amina/VScode/FQW_new/src/components/AdminPanel.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './AdminPanel.css';\r\n\r\nfunction AdminPanel() {\r\n  const [activeTab, setActiveTab] = useState('programs');\r\n  const [programs, setPrograms] = useState([]);\r\n  const [organizations, setOrganizations] = useState([]);\r\n  const [kks, setKks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [addingItemType, setAddingItemType] = useState(null);\r\n  const [programTypes, setProgramTypes] = useState([]);\r\n  const [allOrganizations, setAllOrganizations] = useState([]);\r\n  const navigate = useNavigate();\r\n  const apiUrl = process.env.REACT_APP_API_URL\r\n  const [users, setUsers] = useState([]); // Состояние для пользователей (добавим позже)\r\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: 'ascending' }); // Состояние для сортировки\r\n\r\nconst user = useMemo(() => {\r\n  const storedUser = localStorage.getItem('user');\r\n  try {\r\n      return storedUser ? JSON.parse(storedUser) : null;\r\n  } catch (e) {\r\n      console.error(\"Failed to parse user from localStorage\", e);\r\n      return null;\r\n  }\r\n}, []);\r\n\r\n// --- Функция запроса сортировки ---\r\nconst requestSort = (key) => {\r\n  let direction = 'ascending';\r\n  if (sortConfig.key === key && sortConfig.direction === 'ascending') {\r\n      direction = 'descending';\r\n  }\r\n  setSortConfig({ key, direction });\r\n};\r\n\r\n// --- Функция получения ключа ID для текущей вкладки ---\r\nconst getIdKeyForTab = (tab) => {\r\n  switch (tab) {\r\n      case 'programs': return 'ID_ProgDPO';\r\n      case 'organizations': return 'ID_Org';\r\n      case 'kks': return 'ID_KKS';\r\n      case 'users': return 'ID_User'; // Для будущей вкладки\r\n      default: return null;\r\n  }\r\n};\r\n\r\nconst AddItemForm = ({ type, onSave, onCancel, programTypes = [], allOrganizations = [] }) => {\r\n  const [newItem, setNewItem] = useState({});\r\n\r\nuseEffect(() => {\r\n  // Сброс формы при смене типа\r\n  setNewItem({});\r\n}, [type]);\r\n\r\nconst AddItemForm = ({ type, onSave, onCancel, programTypes = [], allOrganizations = [] }) => {\r\n  const [newItem, setNewItem] = useState({});\r\n\r\n  useEffect(() => {\r\n      // Сброс формы при смене типа\r\n      setNewItem({});\r\n  }, [type]);\r\n\r\n  const handleChange = (field, value) => {\r\n      setNewItem(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n      e.preventDefault();\r\n      onSave(newItem);\r\n      setNewItem({}); // Очистка формы после сохранения\r\n  };\r\n\r\n  const handleCancel = (e) => {\r\n      e.preventDefault();\r\n      setNewItem({});\r\n      onCancel();\r\n  };\r\n\r\n\r\n  if (type === 'program') {\r\n      return (\r\n          <form onSubmit={handleSubmit} className=\"add-form\">\r\n              <h4>Добавить программу</h4>\r\n              <input\r\n                  type=\"text\" placeholder=\"Название программы\" required\r\n                  value={newItem.Name_ProgDPO || ''}\r\n                  onChange={(e) => handleChange('Name_ProgDPO', e.target.value)} />\r\n              <select required value={newItem.id_type || ''} onChange={(e) => handleChange('id_type', e.target.value)}>\r\n                  <option value=\"\" disabled>Выберите тип</option>\r\n                  {programTypes.map(pt => <option key={pt.id_type} value={pt.id_type}>{pt.Name_Type}</option>)}\r\n              </select>\r\n              <select required value={newItem.ID_Org || ''} onChange={(e) => handleChange('ID_Org', e.target.value)}>\r\n                  <option value=\"\" disabled>Выберите организацию</option>\r\n                  {allOrganizations.map(org => <option key={org.ID_Org} value={org.ID_Org}>{org.FName}</option>)}\r\n              </select>\r\n              <div className=\"form-actions\">\r\n                 <button type=\"submit\">Сохранить</button>\r\n                 <button type=\"button\" onClick={handleCancel}>Отмена</button>\r\n              </div>\r\n          </form>\r\n      );\r\n  }\r\n\r\n  if (type === 'organization') {\r\n       return (\r\n          <form onSubmit={handleSubmit} className=\"add-form\">\r\n              <h4>Добавить организацию</h4>\r\n              <input\r\n                  type=\"text\" placeholder=\"Полное название\" required\r\n                  value={newItem.FName || ''}\r\n                  onChange={(e) => handleChange('FName', e.target.value)} />\r\n               <input\r\n                  type=\"text\" placeholder=\"Краткое название\" required\r\n                  value={newItem.SName || ''}\r\n                  onChange={(e) => handleChange('SName', e.target.value)} />\r\n               <div className=\"form-actions\">\r\n                 <button type=\"submit\">Сохранить</button>\r\n                 <button type=\"button\" onClick={handleCancel}>Отмена</button>\r\n              </div>\r\n          </form>\r\n      );\r\n  }\r\n\r\n   if (type === 'kks') {\r\n      return (\r\n          <form onSubmit={handleSubmit} className=\"add-form\">\r\n              <h4>Добавить KKS</h4>\r\n              <input\r\n                  type=\"text\" placeholder=\"Название KKS\" required\r\n                  value={newItem.Name_KKS || ''} // Используем Name_KKS как на фронте\r\n                  onChange={(e) => handleChange('Name_KKS', e.target.value)} />\r\n               <input\r\n                  type=\"text\" placeholder=\"Краткое обозначение\"\r\n                  value={newItem.SName_KKS || ''} // Используем SName_KKS как на фронте\r\n                  onChange={(e) => handleChange('SName_KKS', e.target.value)} />\r\n               <div className=\"form-actions\">\r\n                 <button type=\"submit\">Сохранить</button>\r\n                 <button type=\"button\" onClick={handleCancel}>Отмена</button>\r\n              </div>\r\n          </form>\r\n      );\r\n  }\r\n\r\n  // Добавить форму для Users позже\r\n\r\n  return null; // Если тип не определен\r\n};\r\n\r\nuseEffect(() => {\r\n  const idKey = getIdKeyForTab(activeTab);\r\n  if (idKey) {\r\n      setSortConfig({ key: idKey, direction: 'ascending' });\r\n  } else {\r\n      setSortConfig({ key: null, direction: 'ascending' }); // Сброс для неизвестных вкладок\r\n  }\r\n  // fetchData будет вызван следующим useEffect\r\n}, [activeTab]);\r\n\r\n  useEffect(() => {\r\n    if (user?.role !== 1) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    fetchData();\r\n  }, [activeTab, user, navigate]);\r\n\r\n  const fetchData = async () => {\r\n    if (!user || user.role !== 1) {\r\n      console.warn(\"fetchData called without admin user, aborting.\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      setLoading(true);\r\n      let response;\r\n      let endpoint;\r\n      switch (activeTab) {\r\n        case 'programs': endpoint = `${apiUrl}/api/programs`; break;\r\n        case 'organizations': endpoint = `${apiUrl}/api/organizations`; break;\r\n        case 'kks': endpoint = `${apiUrl}/api/kks`; break;\r\n        case 'users': endpoint = `${apiUrl}/api/users`; break;\r\n        default:\r\n          console.warn(`Unknown activeTab: ${activeTab}`);\r\n          setLoading(false);\r\n          return;\r\n      }\r\n      console.log(`Attempting to fetch ${endpoint}...`);\r\n      response = await axios.get(endpoint);\r\n      console.log(`Received response from ${endpoint}`, response.status);\r\n      switch (activeTab) {\r\n        case 'programs': setPrograms(response.data); break;\r\n        case 'organizations': setOrganizations(response.data); break;\r\n        case 'kks': setKks(response.data); break;\r\n        case 'users': setUsers(response.data); break; // Для будущей вкладки\r\n      }\r\n      setError('');\r\n    } catch (err) {\r\n      console.error(`Error fetching ${activeTab}:`, err.response || err.message || err);\r\n      setError(err.response?.data?.error || `Ошибка при загрузке данных для ${activeTab}`);\r\n    } finally {\r\n        console.log(`Setting loading to false for ${activeTab}.`);\r\n        setLoading(false);\r\n    }\r\n  };\r\n\r\n// --- Мемоизированные отсортированные данные ---\r\nconst sortedPrograms = useMemo(() => {\r\n  let sortableItems = [...programs];\r\n  if (sortConfig.key) {\r\n      sortableItems.sort((a, b) => {\r\n          if (a[sortConfig.key] < b[sortConfig.key]) {\r\n              return sortConfig.direction === 'ascending' ? -1 : 1;\r\n          }\r\n          if (a[sortConfig.key] > b[sortConfig.key]) {\r\n              return sortConfig.direction === 'ascending' ? 1 : -1;\r\n          }\r\n          return 0;\r\n      });\r\n  }\r\n  return sortableItems;\r\n}, [programs, sortConfig]);\r\n\r\nconst sortedOrganizations = useMemo(() => {\r\n  // ... аналогично для organizations ...\r\n  let sortableItems = [...organizations];\r\n  if (sortConfig.key) {\r\n       sortableItems.sort((a, b) => {\r\n          // Проверка на число (для ID) или строку\r\n          const valA = a[sortConfig.key];\r\n          const valB = b[sortConfig.key];\r\n          const compareResult = typeof valA === 'number' && typeof valB === 'number'\r\n              ? valA - valB\r\n              : String(valA).localeCompare(String(valB));\r\n\r\n          return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\r\n      });\r\n  }\r\n  return sortableItems;\r\n}, [organizations, sortConfig]);\r\n\r\nconst sortedKks = useMemo(() => {\r\n  // ... аналогично для kks ...\r\n   let sortableItems = [...kks];\r\n  if (sortConfig.key) {\r\n       sortableItems.sort((a, b) => {\r\n          const valA = a[sortConfig.key];\r\n          const valB = b[sortConfig.key];\r\n          const compareResult = typeof valA === 'number' && typeof valB === 'number'\r\n              ? valA - valB\r\n              : String(valA).localeCompare(String(valB));\r\n          return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\r\n      });\r\n  }\r\n  return sortableItems;\r\n}, [kks, sortConfig]);\r\n\r\nconst sortedUsers = useMemo(() => { // Для будущей вкладки\r\n  // ... аналогично для users ...\r\n   let sortableItems = [...users];\r\n  if (sortConfig.key) {\r\n       sortableItems.sort((a, b) => {\r\n          const valA = a[sortConfig.key];\r\n          const valB = b[sortConfig.key];\r\n           // Пример обработки роли как числа\r\n           if (sortConfig.key === 'Role' && typeof valA === 'number' && typeof valB === 'number') {\r\n              const compareResult = valA - valB;\r\n               return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\r\n           }\r\n           // Стандартное сравнение для остальных полей\r\n          const compareResult = String(valA ?? '').localeCompare(String(valB ?? '')); // Добавим ?? '' для null/undefined\r\n          return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\r\n      });\r\n  }\r\n  return sortableItems;\r\n}, [users, sortConfig]);\r\n\r\n  const handleEdit = (item) => {\r\n    setEditingItem(item);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      let endpoint;\r\n      switch (activeTab) {\r\n        case 'programs':\r\n          endpoint = `${apiUrl}/api/programs/${editingItem.ID_ProgDPO}`;\r\n          await axios.put(endpoint, editingItem);\r\n          break;\r\n        case 'organizations':\r\n          endpoint = `${apiUrl}/api/organizations/${editingItem.ID_Org}`;\r\n          await axios.put(endpoint, editingItem);\r\n          break;\r\n        case 'kks':\r\n          endpoint = `${apiUrl}/api/kks/${editingItem.ID_KKS}`;\r\n          await axios.put(endpoint, editingItem);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setEditingItem(null);\r\n      fetchData();\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Ошибка при сохранении данных');\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingItem(null);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    // Navigate back based on user role\r\n    navigate(user?.role === 1 ? '/admin' : '/user'); // Navigate to admin or user dashboard\r\n};\r\n\r\n  const handleChange = (field, value) => {\r\n    setEditingItem(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    navigate('/login');\r\n  };\r\n\r\n  if (!user && loading) return <div className=\"loading\">Проверка авторизации...</div>;\r\n  if (!user) return null;\r\n  if (loading) return <div className=\"loading\">Загрузка...</div>;\r\n  if (error) return <div className=\"error\">{error}</div>;\r\n\r\n  const renderSortableHeader = (label, key) => (\r\n    <th onClick={() => requestSort(key)} className=\"sortable-header\">\r\n        {label}\r\n        {/* Отображение иконки сортировки (если используете react-icons) */}\r\n        {/* {sortConfig.key === key ? <SortIcon direction={sortConfig.direction} /> : <FaSort />} */}\r\n        {/* Просто текстом: */}\r\n        {sortConfig.key === key ? (sortConfig.direction === 'ascending' ? ' ▲' : ' ▼') : ' ↕'}\r\n    </th>\r\n);\r\n  \r\n  return (\r\n    <div className=\"admin-panel\">\r\n      <div className=\"admin-header\">\r\n        <h1>Панель администратора</h1>\r\n        <div className=\"header-buttons\">\r\n            <button onClick={handleBack} className=\"back-button\">Назад</button>\r\n            <button onClick={handleLogout} className=\"logout-button\">Выйти</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"admin-tabs\">\r\n        <button \r\n          className={`tab-button ${activeTab === 'programs' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('programs')}\r\n        >\r\n          Программы\r\n        </button>\r\n        <button \r\n          className={`tab-button ${activeTab === 'organizations' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('organizations')}\r\n        >\r\n          Организации\r\n        </button>\r\n        <button \r\n          className={`tab-button ${activeTab === 'kks' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('kks')}\r\n        >\r\n          ККС\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"admin-content\">\r\n        {activeTab === 'programs' && (\r\n          <table className=\"admin-table\">\r\n            <thead>\r\n              <tr>\r\n                {renderSortableHeader('ID', 'ID_ProgDPO')}\r\n                {renderSortableHeader('Название', 'Name_ProgDPO')}\r\n                {renderSortableHeader('Тип', 'Name_Type')}\r\n                <th>Действия</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {sortedPrograms.map(program => (\r\n                <tr key={program.ID_ProgDPO}>\r\n                  {editingItem?.ID_ProgDPO === program.ID_ProgDPO ? (\r\n                    <>\r\n                      <td>{program.ID_ProgDPO}</td>\r\n                      <td>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingItem.Name_ProgDPO}\r\n                          onChange={(e) => handleChange('Name_ProgDPO', e.target.value)}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingItem.Name_Type}\r\n                          onChange={(e) => handleChange('Name_Type', e.target.value)}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <button onClick={handleSave}>Сохранить</button>\r\n                        <button onClick={handleCancel}>Отмена</button>\r\n                      </td>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <td>{program.ID_ProgDPO}</td>\r\n                      <td>{program.Name_ProgDPO}</td>\r\n                      <td>{program.Name_Type}</td>\r\n                      <td>\r\n                        <button onClick={() => handleEdit(program)}>Редактировать</button>\r\n                      </td>\r\n                    </>\r\n                  )}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n\r\n        {activeTab === 'organizations' && (\r\n          <table className=\"admin-table\">\r\n            <thead>\r\n              <tr>\r\n                {renderSortableHeader('ID', 'ID_Org')}\r\n                {renderSortableHeader('Полное название', 'FName')}\r\n                {renderSortableHeader('Краткое название', 'SName')}\r\n                <th>Действия</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {sortedOrganizations.map(org => (\r\n                <tr key={org.ID_Org}>\r\n                  {editingItem?.ID_Org === org.ID_Org ? (\r\n                    <>\r\n                      <td>{org.ID_Org}</td>\r\n                      <td>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingItem.FName}\r\n                          onChange={(e) => handleChange('FName', e.target.value)}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingItem.SName}\r\n                          onChange={(e) => handleChange('SName', e.target.value)}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <button onClick={handleSave}>Сохранить</button>\r\n                        <button onClick={handleCancel}>Отмена</button>\r\n                      </td>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <td>{org.ID_Org}</td>\r\n                      <td>{org.FName}</td>\r\n                      <td>{org.SName}</td>\r\n                      <td>\r\n                        <button onClick={() => handleEdit(org)}>Редактировать</button>\r\n                      </td>\r\n                    </>\r\n                  )}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n\r\n        {activeTab === 'kks' && (\r\n          <table className=\"admin-table\">\r\n            <thead>\r\n              <tr>\r\n              {renderSortableHeader('ID', 'ID_KKS')}\r\n                                    {renderSortableHeader('Название', 'Name_KKS')}\r\n                                    {renderSortableHeader('Краткое обозначение', 'SName_KKS')}\r\n                <th>Действия</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {sortedKks.map(kksItem => (\r\n                <tr key={kksItem.ID_KKS}>\r\n                  {editingItem?.ID_KKS === kksItem.ID_KKS ? (\r\n                    <>\r\n                      <td>{kksItem.ID_KKS}</td>\r\n                      <td>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingItem.Name_KKS}\r\n                          onChange={(e) => handleChange('Name_KKS', e.target.value)}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingItem.SName_KKS}\r\n                          onChange={(e) => handleChange('SName_KKS', e.target.value)}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <button onClick={handleSave}>Сохранить</button>\r\n                        <button onClick={handleCancel}>Отмена</button>\r\n                      </td>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <td>{kksItem.ID_KKS}</td>\r\n                      <td>{kksItem.Name_KKS}</td>\r\n                      <td>{kksItem.SName_KKS}</td>\r\n                      <td>\r\n                        <button onClick={() => handleEdit(kksItem)}>Редактировать</button>\r\n                      </td>\r\n                    </>\r\n                  )}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n}\r\nexport default AdminPanel; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}