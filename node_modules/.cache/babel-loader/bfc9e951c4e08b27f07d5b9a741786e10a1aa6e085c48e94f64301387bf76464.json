{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./Documents.css';// Убедитесь, что CSS файл существует\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL;// Вспомогательная функция для форматирования даты (как в User.js/DocumentAnalysis.js)\nconst formatDate=dateStr=>{if(!dateStr)return'Нет данных';try{const date=new Date(dateStr);if(isNaN(date.getTime()))return'Некорректная дата';// Формат DD.MM.YYYY\nreturn date.toLocaleDateString('ru-RU');}catch(e){console.error(\"Ошибка форматирования даты:\",dateStr,e);return'Ошибка формата';}};function Documents(){const[documents,setDocuments]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();// Используем useState для user, чтобы избежать ошибок при первом рендере, если localStorage пуст\nconst[user,setUser]=useState(null);// Эффект для загрузки пользователя из localStorage\nuseEffect(()=>{const storedUser=localStorage.getItem('user');if(storedUser){try{setUser(JSON.parse(storedUser));}catch(e){console.error(\"Ошибка парсинга пользователя из localStorage:\",e);localStorage.removeItem('user');setError(\"Ошибка данных пользователя. Пожалуйста, войдите снова.\");setLoading(false);// Завершаем загрузку с ошибкой\n}}else{setError(\"Пользователь не аутентифицирован.\");setLoading(false);// Завершаем загрузку с ошибкой\n// Можно добавить navigate('/login');\n}},[]);// Выполняется один раз при монтировании\n// Функция загрузки документов\nconst fetchDocuments=useCallback(async()=>{// Проверяем, что user загружен и содержит workerId\nif(!user||user.workerId===undefined){console.log('Данные пользователя или workerId недоступны для запроса документов.');// Устанавливаем ошибку, только если это не первоначальное состояние (когда user еще null)\nif(user!==null){setError('Не удалось получить ID пользователя для загрузки документов.');}setLoading(false);// Завершаем загрузку\nreturn;// Выход, если нет workerId\n}setLoading(true);// Начинаем загрузку здесь\nsetError('');// Сброс ошибки\ntry{console.log('Отправка запроса документов:',{userId:user.workerId,role:user.role});// ИЗМЕНЕНО: user.id -> user.workerId\nconst response=await axios.get(`${apiUrl}/api/documents`,{params:{userId:user.workerId,// ИЗМЕНЕНО: user.id -> user.workerId\nrole:user.role}});console.log('Получены документы:',response.data);// Проверка, что получен массив\nif(!Array.isArray(response.data)){console.error(\"API /api/documents не вернул массив:\",response.data);throw new Error(\"Получен неверный формат данных документов.\");}// Логирование номеров для отладки (опционально)\nresponse.data.forEach((doc,index)=>{console.log(`Документ ${index+1} IDs:`,{regnumber:doc.regnumber,formseries:doc.formseries,formnumber:doc.formnumber});});setDocuments(response.data);}catch(err){var _err$response,_err$response$data;console.error('Ошибка при загрузке документов:',err.response||err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Ошибка при загрузке документов');setDocuments([]);// Очистка документов при ошибке\n}finally{setLoading(false);// Завершаем загрузку в любом случае\n}// Зависимости useCallback теперь user.workerId и user.role\n},[user,apiUrl]);// Зависимость от всего объекта user и apiUrl\n// Эффект для вызова fetchDocuments при изменении user или fetchDocuments\nuseEffect(()=>{// Вызываем fetchDocuments только после того, как user был успешно загружен из localStorage\nif(user){fetchDocuments();}},[user,fetchDocuments]);// Зависимость от user и fetchDocuments\n// Обработчики кнопок\nconst handleLogout=()=>{localStorage.removeItem('user');setUser(null);// Очищаем состояние пользователя\nnavigate('/login');};const handleBack=()=>{// Проверяем user перед использованием role\nif(user){navigate(user.role===1?'/admin':'/user');}else{navigate('/login');// Направляем на логин, если user не определен\n}};// --- Рендеринг ---\n// Состояние начальной загрузки (когда user еще null)\nif(user===null&&loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F...\"});}// Состояние ошибки (если user не загрузился или при запросе документов)\nif(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"documents-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"documents-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBack,className:\"back-button\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});}// Состояние загрузки документов (user уже есть)\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432...\"});}// Проверка на случай, если user все еще null после загрузки (не должно быть, но для надежности)\nif(!user){return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F. \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/login'),children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]});}// Основной рендеринг списка документов\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"documents-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"documents-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:user.role===1?'Все документы':'Мои документы'}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBack,className:\"back-button\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"documents-list\",children:documents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-documents\",children:\"\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"documents-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[user.role===1&&/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u043E\\u043D\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u0435\\u0440\\u0438\\u044F \\u0444\\u043E\\u0440\\u043C\\u044B\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0444\\u043E\\u0440\\u043C\\u044B\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u0432\\u044B\\u0434\\u0430\\u0447\\u0438\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:documents.map(doc=>/*#__PURE__*/_jsxs(\"tr\",{children:[user.role===1&&/*#__PURE__*/_jsx(\"td\",{children:doc.WorkerName||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:doc.ProgramName||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:doc.regnumber||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:doc.formseries||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:doc.formnumber||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(doc.DateIssue)}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(doc.DataStart)}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(doc.DataEnd)})]},doc.ID_Document))})]})})]});}export default Documents;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","apiUrl","process","env","REACT_APP_API_URL","formatDate","dateStr","date","Date","isNaN","getTime","toLocaleDateString","e","console","error","Documents","documents","setDocuments","loading","setLoading","setError","navigate","user","setUser","storedUser","localStorage","getItem","JSON","parse","removeItem","fetchDocuments","workerId","undefined","log","userId","role","response","get","params","data","Array","isArray","Error","forEach","doc","index","regnumber","formseries","formnumber","err","_err$response","_err$response$data","handleLogout","handleBack","className","children","onClick","length","map","WorkerName","ProgramName","DateIssue","DataStart","DataEnd","ID_Document"],"sources":["D:/Amina/VScode/FQW_new/src/components/Documents.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport './Documents.css'; // Убедитесь, что CSS файл существует\n\nconst apiUrl = process.env.REACT_APP_API_URL;\n\n// Вспомогательная функция для форматирования даты (как в User.js/DocumentAnalysis.js)\nconst formatDate = (dateStr) => {\n    if (!dateStr) return 'Нет данных';\n    try {\n        const date = new Date(dateStr);\n        if (isNaN(date.getTime())) return 'Некорректная дата';\n        // Формат DD.MM.YYYY\n        return date.toLocaleDateString('ru-RU');\n    } catch (e) {\n        console.error(\"Ошибка форматирования даты:\", dateStr, e);\n        return 'Ошибка формата';\n    }\n};\n\nfunction Documents() {\n    const [documents, setDocuments] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState('');\n    const navigate = useNavigate();\n    // Используем useState для user, чтобы избежать ошибок при первом рендере, если localStorage пуст\n    const [user, setUser] = useState(null);\n\n    // Эффект для загрузки пользователя из localStorage\n    useEffect(() => {\n        const storedUser = localStorage.getItem('user');\n        if (storedUser) {\n            try {\n                setUser(JSON.parse(storedUser));\n            } catch (e) {\n                console.error(\"Ошибка парсинга пользователя из localStorage:\", e);\n                localStorage.removeItem('user');\n                setError(\"Ошибка данных пользователя. Пожалуйста, войдите снова.\");\n                setLoading(false); // Завершаем загрузку с ошибкой\n            }\n        } else {\n             setError(\"Пользователь не аутентифицирован.\");\n             setLoading(false); // Завершаем загрузку с ошибкой\n             // Можно добавить navigate('/login');\n        }\n    }, []); // Выполняется один раз при монтировании\n\n\n    // Функция загрузки документов\n    const fetchDocuments = useCallback(async () => {\n        // Проверяем, что user загружен и содержит workerId\n        if (!user || user.workerId === undefined) {\n            console.log('Данные пользователя или workerId недоступны для запроса документов.');\n             // Устанавливаем ошибку, только если это не первоначальное состояние (когда user еще null)\n            if (user !== null) {\n                 setError('Не удалось получить ID пользователя для загрузки документов.');\n            }\n            setLoading(false); // Завершаем загрузку\n            return; // Выход, если нет workerId\n        }\n\n        setLoading(true); // Начинаем загрузку здесь\n        setError(''); // Сброс ошибки\n\n        try {\n            console.log('Отправка запроса документов:', { userId: user.workerId, role: user.role }); // ИЗМЕНЕНО: user.id -> user.workerId\n            const response = await axios.get(`${apiUrl}/api/documents`, {\n                params: {\n                    userId: user.workerId, // ИЗМЕНЕНО: user.id -> user.workerId\n                    role: user.role\n                }\n            });\n            console.log('Получены документы:', response.data);\n\n            // Проверка, что получен массив\n             if (!Array.isArray(response.data)) {\n                console.error(\"API /api/documents не вернул массив:\", response.data);\n                throw new Error(\"Получен неверный формат данных документов.\");\n            }\n\n            // Логирование номеров для отладки (опционально)\n            response.data.forEach((doc, index) => {\n                console.log(`Документ ${index + 1} IDs:`, {\n                    regnumber: doc.regnumber,\n                    formseries: doc.formseries,\n                    formnumber: doc.formnumber\n                });\n            });\n\n            setDocuments(response.data);\n\n        } catch (err) {\n            console.error('Ошибка при загрузке документов:', err.response || err);\n            setError(err.response?.data?.error || 'Ошибка при загрузке документов');\n             setDocuments([]); // Очистка документов при ошибке\n        } finally {\n            setLoading(false); // Завершаем загрузку в любом случае\n        }\n        // Зависимости useCallback теперь user.workerId и user.role\n    }, [user, apiUrl]); // Зависимость от всего объекта user и apiUrl\n\n    // Эффект для вызова fetchDocuments при изменении user или fetchDocuments\n    useEffect(() => {\n        // Вызываем fetchDocuments только после того, как user был успешно загружен из localStorage\n        if (user) {\n            fetchDocuments();\n        }\n    }, [user, fetchDocuments]); // Зависимость от user и fetchDocuments\n\n\n    // Обработчики кнопок\n    const handleLogout = () => {\n        localStorage.removeItem('user');\n        setUser(null); // Очищаем состояние пользователя\n        navigate('/login');\n    };\n\n    const handleBack = () => {\n         // Проверяем user перед использованием role\n        if (user) {\n            navigate(user.role === 1 ? '/admin' : '/user');\n        } else {\n            navigate('/login'); // Направляем на логин, если user не определен\n        }\n    };\n\n    // --- Рендеринг ---\n\n    // Состояние начальной загрузки (когда user еще null)\n    if (user === null && loading) {\n         return <div className=\"loading\">Загрузка данных пользователя...</div>;\n    }\n\n     // Состояние ошибки (если user не загрузился или при запросе документов)\n     if (error) {\n         return (\n            <div className=\"documents-container\">\n                 <div className=\"documents-header\">\n                     <h1>Ошибка</h1>\n                     <div className=\"header-buttons\">\n                          {/* Кнопка Назад может работать даже при ошибке */}\n                         <button onClick={handleBack} className=\"back-button\">Назад</button>\n                         <button onClick={handleLogout} className=\"logout-button\">Выйти</button>\n                     </div>\n                 </div>\n                 <div className=\"error\">{error}</div>\n            </div>\n         );\n     }\n\n    // Состояние загрузки документов (user уже есть)\n    if (loading) {\n        return <div className=\"loading\">Загрузка документов...</div>;\n    }\n\n     // Проверка на случай, если user все еще null после загрузки (не должно быть, но для надежности)\n     if (!user) {\n         return <div className=\"error\">Не удалось загрузить данные пользователя. <button onClick={() => navigate('/login')}>Войти</button></div>;\n     }\n\n\n    // Основной рендеринг списка документов\n    return (\n        <div className=\"documents-container\">\n            <div className=\"documents-header\">\n                <h1>{user.role === 1 ? 'Все документы' : 'Мои документы'}</h1>\n                <div className=\"header-buttons\">\n                    <button onClick={handleBack} className=\"back-button\">Назад</button>\n                    <button onClick={handleLogout} className=\"logout-button\">Выйти</button>\n                </div>\n            </div>\n\n            <div className=\"documents-list\">\n                {documents.length === 0 ? (\n                    <p className=\"no-documents\">Документы не найдены</p>\n                ) : (\n                    <table className=\"documents-table\">\n                        <thead>\n                            <tr>\n                                {user.role === 1 && <th>Сотрудник</th>}\n                                <th>Программа</th>\n                                <th>Регистрационный номер</th>\n                                <th>Серия формы</th>\n                                <th>Номер формы</th>\n                                <th>Дата выдачи</th>\n                                <th>Дата начала</th>\n                                <th>Дата окончания</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {documents.map((doc) => (\n                                <tr key={doc.ID_Document}>\n                                    {/* Отображение имени работника для админа */}\n                                    {user.role === 1 && <td>{doc.WorkerName || 'N/A'}</td>}\n                                    {/* Данные документа */}\n                                    <td>{doc.ProgramName || 'N/A'}</td>\n                                    <td>{doc.regnumber || 'N/A'}</td>\n                                    <td>{doc.formseries || 'N/A'}</td>\n                                    <td>{doc.formnumber || 'N/A'}</td>\n                                    {/* ИСПОЛЬЗУЕМ БЕЗОПАСНОЕ ФОРМАТИРОВАНИЕ ДАТ */}\n                                    <td>{formatDate(doc.DateIssue)}</td>\n                                    <td>{formatDate(doc.DataStart)}</td>\n                                    <td>{formatDate(doc.DataEnd)}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default Documents;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}