{"ast":null,"code":"import React,{useState,useEffect,useMemo,useCallback}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./AdminPanel.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL;// Вынесем в глобальную область видимости файла\n// --- Вспомогательная функция для форматирования даты ---\nconst formatDate=function(dateStr){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'date';if(!dateStr)return'';// Возвращаем пустую строку для input[type=date] или для отображения\ntry{const date=new Date(dateStr);if(isNaN(date.getTime()))return'';// Некорректная дата\nif(type==='datetime-local'){// Формат YYYY-MM-DDTHH:mm (пример) - нужен для input type=\"datetime-local\"\n// Корректируем под часовой пояс, чтобы избежать смещения на день назад/вперед\nconst offset=date.getTimezoneOffset();const adjustedDate=new Date(date.getTime()-offset*60*1000);return adjustedDate.toISOString().slice(0,16);}else if(type==='date'){// Формат YYYY-MM-DD (нужен для input type=\"date\")\nconst year=date.getFullYear();const month=(date.getMonth()+1).toString().padStart(2,'0');const day=date.getDate().toString().padStart(2,'0');return`${year}-${month}-${day}`;}else{// Формат DD.MM.YYYY (для отображения в таблице)\nreturn date.toLocaleDateString('ru-RU');}}catch(e){console.error(\"Ошибка форматирования даты:\",dateStr,e);return'';// Возвращаем пустую строку при ошибке\n}};// --- Компонент AddItemForm (БЕЗ ИЗМЕНЕНИЙ) ---\nconst AddItemForm=_ref=>{let{type,onSave,onCancel,programTypes=[],allOrganizations=[]}=_ref;// ... (код AddItemForm остается прежним) ...\nconst[newItem,setNewItem]=useState({});useEffect(()=>{setNewItem({});},[type]);const handleChange=(field,value)=>{setNewItem(prev=>({...prev,[field]:value}));};const handleSubmit=e=>{e.preventDefault();onSave(newItem);setNewItem({});};const handleCancel=e=>{e.preventDefault();setNewItem({});onCancel();};if(type==='programs'){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"add-form\",children:[\" \",/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0443\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u044B\",required:true,value:newItem.Name_ProgDPO||'',onChange:e=>handleChange('Name_ProgDPO',e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:newItem.id_type||'',onChange:e=>handleChange('id_type',e.target.value),children:[\" \",/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0438\\u043F\"}),\" \",programTypes.map(pt=>/*#__PURE__*/_jsx(\"option\",{value:pt.id_type,children:pt.Name_Type},pt.id_type)),\" \"]}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:newItem.ID_Org||'',onChange:e=>handleChange('ID_Org',e.target.value),children:[\" \",/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044E\"}),\" \",allOrganizations.map(org=>/*#__PURE__*/_jsx(\"option\",{value:org.ID_Org,children:org.FName},org.ID_Org)),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),\" \"]}),\" \"]});}if(type==='organizations'){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"add-form\",children:[\" \",/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",required:true,value:newItem.FName||'',onChange:e=>handleChange('FName',e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",required:true,value:newItem.SName||'',onChange:e=>handleChange('SName',e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),\" \"]}),\" \"]});}if(type==='kks'){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"add-form\",children:[\" \",/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C KKS\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 KKS\",required:true,value:newItem.Name_KKS||'',onChange:e=>handleChange('Name_KKS',e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E\\u0435 \\u043E\\u0431\\u043E\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435\",value:newItem.SName_KKS||'',onChange:e=>handleChange('SName_KKS',e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),\" \"]}),\" \"]});}return null;};// --- Компонент WorkerForm (БЕЗ ИЗМЕНЕНИЙ) ---\nconst WorkerForm=_ref2=>{let{initialData={},onSave,onCancel,isEditing=false}=_ref2;// ... (код WorkerForm остается прежним) ...\nconst[workerData,setWorkerData]=useState(initialData);const[newPassword,setNewPassword]=useState('');useEffect(()=>{setWorkerData({...initialData,Role:initialData.Role!==undefined?initialData.Role:''});setNewPassword('');},[initialData]);const handleChange=(field,value)=>{setWorkerData(prev=>({...prev,[field]:value}));};const handlePasswordChange=e=>{setNewPassword(e.target.value);};const handleSubmit=e=>{e.preventDefault();const dataToSend={...workerData};if(newPassword){dataToSend.Password=newPassword;}else if(!isEditing){alert('Пароль обязателен при создании пользователя.');return;}onSave(dataToSend);};const handleCancelClick=e=>{e.preventDefault();onCancel();};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"add-form user-form\",children:[\" \",/*#__PURE__*/_jsx(\"h4\",{children:isEditing?`Редактировать работника (ID: ${workerData.ID_Worker})`:'Добавить работника'}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0424\\u0418\\u041E \\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A\\u0430\",required:true,value:workerData.FName_Worker||'',onChange:e=>handleChange('FName_Worker',e.target.value)}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041B\\u043E\\u0433\\u0438\\u043D\",required:true,value:workerData.Login||'',onChange:e=>handleChange('Login',e.target.value)}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:isEditing?'Новый пароль (оставьте пустым, чтобы не менять)':'Пароль',value:newPassword,onChange:handlePasswordChange,required:!isEditing}),\" \",/*#__PURE__*/_jsxs(\"select\",{required:true,value:workerData.Role,onChange:e=>handleChange('Role',parseInt(e.target.value,10)),children:[\" \",/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u043E\\u043B\\u044C\"}),\" \",/*#__PURE__*/_jsx(\"option\",{value:0,children:\"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A \\u041E\\u0423\"}),\" \",/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A \\u0426\\u0414\\u041E (\\u0410\\u0434\\u043C\\u0438\\u043D)\"}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancelClick,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),\" \"]}),\" \"]});};// --- НОВЫЙ Компонент формы для Документов ---\nconst DocumentForm=_ref3=>{let{initialData={},onSave,onCancel,isEditing=false,allWorkers=[],allPrograms=[]}=_ref3;const[docData,setDocData]=useState({});useEffect(()=>{// Инициализация формы данными для редактирования или пустыми значениями\n// Преобразуем даты в формат YYYY-MM-DD для input type=\"date\"\nsetDocData({ID_Worker:initialData.ID_Worker||'',ID_ProgDPO:initialData.ID_ProgDPO||'',regnumber:initialData.regnumber||'',formseries:initialData.formseries||'',formnumber:initialData.formnumber||'',DateIssue:formatDate(initialData.DateIssue,'date'),// Преобразование\nDataStart:formatDate(initialData.DataStart,'date'),// Преобразование\nDataEnd:formatDate(initialData.DataEnd,'date')// Преобразование\n});},[initialData]);const handleChange=(field,value)=>{setDocData(prev=>({...prev,[field]:value}));};const handleSubmit=e=>{e.preventDefault();// Перед отправкой можно добавить валидацию, если нужно\nconst dataToSend={...docData};// Если ID есть (при редактировании), добавляем его\nif(isEditing&&initialData.ID_Document){dataToSend.ID_Document=initialData.ID_Document;}onSave(dataToSend);// Вызываем колбэк сохранения\n};const handleCancelClick=e=>{e.preventDefault();onCancel();// Вызываем колбэк отмены\n};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"add-form document-form\",children:[/*#__PURE__*/_jsx(\"h4\",{children:isEditing?`Редактировать документ (ID: ${initialData.ID_Document})`:'Добавить документ'}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"doc-worker\",children:\"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"doc-worker\",required:true,value:docData.ID_Worker,onChange:e=>handleChange('ID_Worker',e.target.value?parseInt(e.target.value,10):''),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"-- \\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A\\u0430 --\"}),allWorkers.map(w=>/*#__PURE__*/_jsxs(\"option\",{value:w.ID_Worker,children:[w.FName_Worker,\" (ID: \",w.ID_Worker,\")\"]},w.ID_Worker))]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"doc-program\",children:\"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0430 \\u0414\\u041F\\u041E:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"doc-program\",required:true,value:docData.ID_ProgDPO,onChange:e=>handleChange('ID_ProgDPO',e.target.value?parseInt(e.target.value,10):''),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"-- \\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0443 --\"}),allPrograms.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p.ID_ProgDPO,children:p.Name_ProgDPO},p.ID_ProgDPO))]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"doc-regnumber\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u043E\\u043D\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"doc-regnumber\",type:\"text\",placeholder:\"\\u0420\\u0435\\u0433. \\u043D\\u043E\\u043C\\u0435\\u0440\",value:docData.regnumber,onChange:e=>handleChange('regnumber',e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"doc-formseries\",children:\"\\u0421\\u0435\\u0440\\u0438\\u044F \\u0444\\u043E\\u0440\\u043C\\u044B:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"doc-formseries\",type:\"text\",placeholder:\"\\u0421\\u0435\\u0440\\u0438\\u044F\",value:docData.formseries,onChange:e=>handleChange('formseries',e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"doc-formnumber\",children:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0444\\u043E\\u0440\\u043C\\u044B:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"doc-formnumber\",type:\"text\",placeholder:\"\\u041D\\u043E\\u043C\\u0435\\u0440\",value:docData.formnumber,onChange:e=>handleChange('formnumber',e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"doc-dateissue\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u0432\\u044B\\u0434\\u0430\\u0447\\u0438:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"doc-dateissue\",type:\"date\",value:docData.DateIssue,onChange:e=>handleChange('DateIssue',e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"doc-datastart\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"doc-datastart\",type:\"date\",value:docData.DataStart,onChange:e=>handleChange('DataStart',e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"doc-dataend\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"doc-dataend\",type:\"date\",value:docData.DataEnd,onChange:e=>handleChange('DataEnd',e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancelClick,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]});};// --- Основной компонент AdminPanel ---\nfunction AdminPanel(){// Состояния\nconst[activeTab,setActiveTab]=useState('programs');// 'programs', 'organizations', 'kks', 'workers', 'documents'\nconst[programs,setPrograms]=useState([]);const[organizations,setOrganizations]=useState([]);const[kks,setKks]=useState([]);const[workers,setWorkers]=useState([]);const[documents,setDocuments]=useState([]);// <<< НОВОЕ СОСТОЯНИЕ ДЛЯ ДОКУМЕНТОВ\nconst[loading,setLoading]=useState(true);const[error,setError]=useState('');const[editingItem,setEditingItem]=useState(null);const[addingItemType,setAddingItemType]=useState(null);const[programTypes,setProgramTypes]=useState([]);const[programTypesData,setProgramTypesData]=useState([]);const[allOrganizations,setAllOrganizations]=useState([]);const[allWorkers,setAllWorkers]=useState([]);// <<< НУЖНО ДЛЯ ФОРМЫ ДОКУМЕНТОВ\nconst[allPrograms,setAllPrograms]=useState([]);// <<< НУЖНО ДЛЯ ФОРМЫ ДОКУМЕНТОВ\nconst[sortConfig,setSortConfig]=useState({key:null,direction:'ascending'});const navigate=useNavigate();// apiUrl определен глобально выше\n// Получение пользователя (без изменений)\nconst user=useMemo(()=>{/* ... */const storedUser=localStorage.getItem('user');try{return storedUser?JSON.parse(storedUser):null;}catch(e){console.error(\"Failed to parse user from localStorage\",e);localStorage.removeItem('user');return null;}},[]);// --- Сортировка ---\nconst requestSort=key=>{/* ... */let direction='ascending';if(sortConfig.key===key&&sortConfig.direction==='ascending'){direction='descending';}setSortConfig({key,direction});};const getIdKeyForTab=tab=>{switch(tab){case'programs':return'ID_ProgDPO';case'organizations':return'ID_Org';case'kks':return'ID_KKS';case'workers':return'ID_Worker';case'documents':return'ID_Document';default:return null;}};useEffect(()=>{/* ... сброс сортировки и форм ... */const idKey=getIdKeyForTab(activeTab);if(idKey){setSortConfig({key:idKey,direction:'ascending'});}else{setSortConfig({key:null,direction:'ascending'});}setEditingItem(null);setAddingItemType(null);},[activeTab]);// --- Загрузка данных ---\nconst fetchData=useCallback(async function(){let forceAux=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!user||user.role!==1){/* ... проверка админа ... */console.warn(\"fetchData called without admin user, aborting.\");setLoading(false);setError(\"Доступ запрещен. Требуются права администратора.\");return;}setLoading(true);setError('');console.log(`Workspaceing data. Active tab: ${activeTab}`);// Загрузка вспомогательных данных (типы, орг, работники, программы)\n// Добавили allPrograms и allWorkers\nif(forceAux||programTypes.length===0||allOrganizations.length===0||allWorkers.length===0||allPrograms.length===0){try{console.log(\"Fetching auxiliary data (types, orgs, workers, programs)...\");const endpoints=[`${apiUrl}/api/program-types`,`${apiUrl}/api/programs/types`,`${apiUrl}/api/organizations`,`${apiUrl}/api/workers/admin`,// Эндпоинт для ВСЕХ работников\n`${apiUrl}/api/programs`// Эндпоинт для ВСЕХ программ\n];// Обновляем Promise.all для 4х запросов\nconst[typesRes,orgsRes,workersRes,progsRes]=await Promise.all(endpoints.map(url=>axios.get(url)));const fetchedTypes=typesRes.data||[];setProgramTypes(fetchedTypes);// Для dropdown в формах\nsetProgramTypesData(fetchedTypes);setProgramTypes(typesRes.data||[]);setAllOrganizations(orgsRes.data||[]);setAllWorkers(workersRes.data||[]);// Сохраняем всех работников\nsetAllPrograms(progsRes.data||[]);// Сохраняем все программы\nconsole.log(\"Auxiliary data fetched.\");}catch(err){console.error('Error fetching auxiliary data:',err);const auxErrorMsg='Ошибка загрузки вспомогательных данных (типы, организации, работники, программы).';setError(prev=>prev?`<span class=\"math-inline\">\\{prev\\}\\\\n</span>{auxErrorMsg}`:auxErrorMsg);// Сброс состояний при ошибке загрузки вспомогательных данных\nsetProgramTypes([]);setProgramTypesData([]);// <<< ДОБАВИТЬ\nsetAllOrganizations([]);setAllWorkers([]);setAllPrograms([]);}}// Загрузка основных данных\ntry{let response;let endpoint;let config={};switch(activeTab){case'programs':endpoint=`${apiUrl}/api/programs`;break;case'organizations':endpoint=`${apiUrl}/api/organizations`;break;case'kks':endpoint=`${apiUrl}/api/kks`;break;case'workers':endpoint=`${apiUrl}/api/workers/admin`;break;case'documents':endpoint=`${apiUrl}/api/documents`;// <<< ДОБАВЛЯЕМ ПАРАМЕТРЫ ДЛЯ ЗАПРОСА ДОКУМЕНТОВ >>>\nif(user!==null&&user!==void 0&&user.workerId&&(user===null||user===void 0?void 0:user.role)!==undefined){config.params={userId:user.workerId,// ID текущего админа\nrole:user.role// Роль текущего админа (должна быть 1)\n};}else{// Если вдруг нет данных админа, прерываем (хотя проверка есть выше)\nconsole.error(\"Admin user data (workerId, role) is missing for documents fetch.\");setError(\"Не удалось получить данные администратора для запроса.\");setLoading(false);return;}break;default:console.warn(`Unknown activeTab: ${activeTab}`);setLoading(false);return;}console.log(`Attempting to fetch ${endpoint}...`,config);// Логируем конфиг\n// <<< ИСПОЛЬЗУЕМ config В ЗАПРОСЕ >>>\nresponse=await axios.get(endpoint,config);console.log(`Received response from ${endpoint}`,response.status);// Проверка на массив перед обновлением состояния\nconst responseData=Array.isArray(response.data)?response.data:[];if(!Array.isArray(response.data)){console.warn(`API endpoint ${endpoint} did not return an array.`);}switch(activeTab){case'programs':setPrograms(responseData);break;case'organizations':setOrganizations(responseData);setAllOrganizations(responseData);break;case'kks':setKks(responseData);break;case'workers':setWorkers(responseData);break;case'documents':setDocuments(responseData);break;}}catch(err){console.error(`Error fetching ${activeTab}:`,err.response||err.message||err);const mainErrorMsg=`Ошибка загрузки данных для вкладки \"${activeTab}\".`;setError(prev=>prev?`${prev}\\n${mainErrorMsg}`:mainErrorMsg);// Очищаем соответствующее состояние при ошибке\nswitch(activeTab){case'programs':setPrograms([]);break;case'organizations':setOrganizations([]);break;case'kks':setKks([]);break;case'workers':setWorkers([]);break;case'documents':setDocuments([]);break;}}finally{console.log(`Setting loading to false for ${activeTab}.`);setLoading(false);}},[activeTab,user,apiUrl,programTypes.length,allOrganizations.length,allWorkers.length,allPrograms.length]);// Добавили зависимости\nuseEffect(()=>{if(!user||user.role!==1){navigate('/login');return;}fetchData(true);},[user,navigate,fetchData]);// --- Мемоизированные отсортированные списки ---\nconst sortedPrograms=useMemo(()=>{let sortableItems=[...programs];if(sortConfig.key){sortableItems.sort((a,b)=>{if(a[sortConfig.key]<b[sortConfig.key]){return sortConfig.direction==='ascending'?-1:1;}if(a[sortConfig.key]>b[sortConfig.key]){return sortConfig.direction==='ascending'?1:-1;}return 0;});}return sortableItems;},[programs,sortConfig]);const sortedOrganizations=useMemo(()=>{let sortableItems=[...organizations];if(sortConfig.key){sortableItems.sort((a,b)=>{const valA=a[sortConfig.key];const valB=b[sortConfig.key];const compareResult=typeof valA==='number'&&typeof valB==='number'?valA-valB:String(valA).localeCompare(String(valB));return sortConfig.direction==='ascending'?compareResult:-compareResult;});}return sortableItems;},[organizations,sortConfig]);const sortedKks=useMemo(()=>{let sortableItems=[...kks];if(sortConfig.key){sortableItems.sort((a,b)=>{const valA=a[sortConfig.key];const valB=b[sortConfig.key];const compareResult=typeof valA==='number'&&typeof valB==='number'?valA-valB:String(valA).localeCompare(String(valB));return sortConfig.direction==='ascending'?compareResult:-compareResult;});}return sortableItems;},[kks,sortConfig]);const sortedWorkers=useMemo(()=>{let sortableItems=[...workers];if(sortConfig.key){sortableItems.sort((a,b)=>{const valA=a[sortConfig.key];const valB=b[sortConfig.key];if(sortConfig.key==='Role'&&typeof valA==='number'&&typeof valB==='number'){return sortConfig.direction==='ascending'?valA-valB:valB-valA;}if(sortConfig.key==='FName_Worker'){const nameA=String(valA!==null&&valA!==void 0?valA:'').toLowerCase();const nameB=String(valB!==null&&valB!==void 0?valB:'').toLowerCase();if(nameA<nameB)return sortConfig.direction==='ascending'?-1:1;if(nameA>nameB)return sortConfig.direction==='ascending'?1:-1;return 0;}const compareResult=typeof valA==='number'&&typeof valB==='number'?valA-valB:String(valA!==null&&valA!==void 0?valA:'').localeCompare(String(valB!==null&&valB!==void 0?valB:''));return sortConfig.direction==='ascending'?compareResult:-compareResult;});}return sortableItems;},[workers,sortConfig]);const sortedDocuments=useMemo(()=>{let sortableItems=[...documents];if(sortConfig.key){sortableItems.sort((a,b)=>{const valA=a[sortConfig.key];const valB=b[sortConfig.key];// Сортировка по дате\nif(['DateIssue','DataStart','DataEnd'].includes(sortConfig.key)){const dateA=valA?new Date(valA).getTime():0;const dateB=valB?new Date(valB).getTime():0;if(isNaN(dateA)&&isNaN(dateB))return 0;if(isNaN(dateA))return sortConfig.direction==='ascending'?-1:1;// nulls/invalid first or last\nif(isNaN(dateB))return sortConfig.direction==='ascending'?1:-1;return sortConfig.direction==='ascending'?dateA-dateB:dateB-dateA;}// Сортировка по имени работника или программы\nif(['WorkerName','ProgramName'].includes(sortConfig.key)){const strA=String(valA!==null&&valA!==void 0?valA:'').toLowerCase();const strB=String(valB!==null&&valB!==void 0?valB:'').toLowerCase();if(strA<strB)return sortConfig.direction==='ascending'?-1:1;if(strA>strB)return sortConfig.direction==='ascending'?1:-1;return 0;}// Общая сортировка\nconst compareResult=typeof valA==='number'&&typeof valB==='number'?valA-valB:String(valA!==null&&valA!==void 0?valA:'').localeCompare(String(valB!==null&&valB!==void 0?valB:''));return sortConfig.direction==='ascending'?compareResult:-compareResult;});}return sortableItems;},[documents,sortConfig]);// --- Обработчики CRUD ---\nconst handleEdit=item=>{setEditingItem(item);setAddingItemType(null);};const handleCancel=()=>{setEditingItem(null);};const handleChangeInline=(field,value)=>{setEditingItem(prev=>({...prev,[field]:value}));};const handleSave=async editedData=>{const itemToSave=editedData||editingItem;if(!itemToSave)return;const idKey=getIdKeyForTab(activeTab);const id=itemToSave[idKey];if(id===undefined&&activeTab!=='documents'){// Для документов ID может не быть в itemToSave из формы\nif(activeTab==='documents'&&editingItem!==null&&editingItem!==void 0&&editingItem.ID_Document){// Берем ID из исходного editingItem для документов\nid=editingItem.ID_Document;itemToSave.ID_Document=id;// Добавляем ID обратно для PUT запроса, если нужно\n}else{console.error(\"Cannot save item without ID\",itemToSave);setError(\"Не удалось определить ID для сохранения.\");return;}}console.log(`Saving edited item (ID: ${id}, Tab: ${activeTab}):`,itemToSave);setLoading(true);setError('');try{let endpoint;switch(activeTab){case'programs':endpoint=`${apiUrl}/api/programs/${id}`;break;case'organizations':endpoint=`${apiUrl}/api/organizations/${id}`;break;case'kks':endpoint=`${apiUrl}/api/kks/${id}`;break;case'workers':endpoint=`${apiUrl}/api/workers/${id}`;break;case'documents':endpoint=`${apiUrl}/api/documents/${id}`;break;// <<< ДОБАВЛЕНО (нужен PUT /api/documents/:id)\ndefault:throw new Error(\"Неизвестная вкладка для сохранения\");}await axios.put(endpoint,itemToSave);setEditingItem(null);await fetchData();console.log(`Item (ID: ${id}) saved successfully.`);}catch(err){var _err$response,_err$response2,_err$response2$data;console.error('Ошибка при сохранении изменений:',((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message||err);setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Ошибка при сохранении данных');}finally{setLoading(false);}};const handleShowAddForm=()=>{setAddingItemType(activeTab);setEditingItem(null);};const handleCancelAdd=()=>{setAddingItemType(null);};const handleAddItem=async newItemData=>{// Добавление (POST)\nconst type=addingItemType;if(!type)return;console.log(`Adding new ${type}:`,newItemData);setLoading(true);setError('');try{let endpoint;switch(type){case'programs':endpoint=`${apiUrl}/api/programs`;break;case'organizations':endpoint=`${apiUrl}/api/organizations`;break;case'kks':endpoint=`${apiUrl}/api/kks`;break;case'workers':endpoint=`${apiUrl}/api/workers`;break;case'documents':endpoint=`${apiUrl}/api/documents`;break;default:throw new Error(\"Неизвестный тип для добавления\");}await axios.post(endpoint,newItemData);setAddingItemType(null);await fetchData();console.log(`Item of type ${type} added successfully.`);}catch(err){var _err$response3,_err$response4,_err$response4$data;console.error(`Ошибка при добавлении ${type}:`,((_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.data)||err.message||err);setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.error)||`Ошибка при добавлении элемента`);}finally{setLoading(false);}};const handleDelete=async idToDelete=>{// Удаление (DELETE)\nif(!window.confirm('Вы уверены, что хотите удалить этот элемент?')){return;}const idKey=getIdKeyForTab(activeTab);console.log(`Deleting item with ID: ${idToDelete} (Key: ${idKey}) on tab: ${activeTab}`);setLoading(true);setError('');try{let endpoint;switch(activeTab){case'programs':endpoint=`${apiUrl}/api/programs/${idToDelete}`;break;case'organizations':endpoint=`${apiUrl}/api/organizations/${idToDelete}`;break;case'kks':endpoint=`${apiUrl}/api/kks/${idToDelete}`;break;case'workers':endpoint=`${apiUrl}/api/workers/${idToDelete}`;break;case'documents':endpoint=`${apiUrl}/api/documents/${idToDelete}`;break;// <<< ДОБАВЛЕНО (нужен DELETE /api/documents/:id)\ndefault:throw new Error(\"Неизвестная вкладка для удаления\");}await axios.delete(endpoint);if(editingItem&&editingItem[idKey]===idToDelete){setEditingItem(null);}await fetchData();console.log(`Item (ID: ${idToDelete}) deleted successfully.`);}catch(err){var _err$response5,_err$response6,_err$response6$data;console.error(`Ошибка при удалении элемента (ID: ${idToDelete}):`,((_err$response5=err.response)===null||_err$response5===void 0?void 0:_err$response5.data)||err.message||err);setError(((_err$response6=err.response)===null||_err$response6===void 0?void 0:(_err$response6$data=_err$response6.data)===null||_err$response6$data===void 0?void 0:_err$response6$data.error)||'Ошибка при удалении элемента. Возможно, на него есть ссылки.');}finally{setLoading(false);}};// --- Вспомогательные функции рендеринга ---\nconst displayRole=roleValue=>{/* ... */return roleValue===1?'Работник ЦДО':roleValue===0?'Работник ОУ':'Неизвестно';};const renderSortableHeader=(label,key)=>/*#__PURE__*//* ... */_jsxs(\"th\",{onClick:()=>requestSort(key),className:\"sortable-header\",children:[\" \",label,\" \",sortConfig.key===key?sortConfig.direction==='ascending'?' ▲':' ▼':' ↕',\" \"]});// --- Основной рендеринг компонента ---\nif(!user&&loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430 \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438 \\u0438 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"});if(!user)return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F. \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/login'),children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]});if(user.role!==1)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F \\u0437\\u0430\\u043F\\u0440\\u0435\\u0449\\u0435\\u043D.\"});const showLoadingIndicator=loading&&!error;return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin'),className:\"back-button\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{localStorage.removeItem('user');navigate('/login');},className:\"logout-button\",children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:`tab-button ${activeTab==='programs'?'active':''}`,onClick:()=>setActiveTab('programs'),children:\"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u044B\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab-button ${activeTab==='organizations'?'active':''}`,onClick:()=>setActiveTab('organizations'),children:\"\\u041E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab-button ${activeTab==='kks'?'active':''}`,onClick:()=>setActiveTab('kks'),children:\"\\u041A\\u041A\\u0421\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab-button ${activeTab==='workers'?'active':''}`,onClick:()=>setActiveTab('workers'),children:\"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab-button ${activeTab==='documents'?'active':''}`,onClick:()=>setActiveTab('documents'),children:\"\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\"})]}),showLoadingIndicator&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-inline\",children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-inline\",children:[error,\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(''),title:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u043E\\u0448\\u0438\\u0431\\u043A\\u0443\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content\",children:[(addingItemType==='workers'||editingItem&&activeTab==='workers')&&/*#__PURE__*/_jsx(WorkerForm,{initialData:editingItem||{},onSave:editingItem?handleSave:handleAddItem,onCancel:editingItem?handleCancel:handleCancelAdd,isEditing:!!editingItem},editingItem?editingItem.ID_Worker:'add-worker'),addingItemType&&addingItemType!=='workers'&&addingItemType!=='documents'&&/*#__PURE__*/_jsx(AddItemForm,{type:addingItemType,onSave:handleAddItem,onCancel:handleCancelAdd,programTypes:programTypes,allOrganizations:allOrganizations},`add-${addingItemType}`),(addingItemType==='documents'||editingItem&&activeTab==='documents')&&/*#__PURE__*/_jsx(DocumentForm,{initialData:editingItem||{},onSave:editingItem?handleSave:handleAddItem,onCancel:editingItem?handleCancel:handleCancelAdd,isEditing:!!editingItem,allWorkers:workers// Передаем список работников (не allWorkers, а текущий загруженный)\n,allPrograms:allPrograms// Передаем список программ\n},editingItem?editingItem.ID_Document:'add-document'),!editingItem&&!addingItemType&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleShowAddForm,className:\"add-button\",children:[\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \",activeTab==='programs'?'программу':activeTab==='organizations'?'организацию':activeTab==='kks'?'KKS':activeTab==='workers'?'работника':activeTab==='documents'?'документ':''// <<< ДОБАВЛЕНО\n]}),activeTab==='programs'&&/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[\" \",\" \",/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",renderSortableHeader('№','ID_ProgDPO'),\" \",renderSortableHeader('Название','Name_ProgDPO'),\" \",renderSortableHeader('Тип','Name_Type'),\" \",/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"}),\" \"]})}),\" \",/*#__PURE__*/_jsxs(\"tbody\",{children:[\" \",sortedPrograms.map((program,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",(editingItem===null||editingItem===void 0?void 0:editingItem.ID_ProgDPO)===program.ID_ProgDPO?/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"td\",{children:index+1}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingItem.Name_ProgDPO,onChange:e=>handleChangeInline('Name_ProgDPO',e.target.value)}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",program.Name_Type||'N/A',\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSave(),children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),\" \"]}),\" \"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"td\",{children:index+1}),\" \",/*#__PURE__*/_jsx(\"td\",{children:program.Name_ProgDPO}),\" \",/*#__PURE__*/_jsx(\"td\",{children:program.Name_Type||'N/A'}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"actions-cell\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(program),disabled:!!addingItemType||!!editingItem,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(program.ID_ProgDPO),className:\"delete-button\",disabled:!!addingItemType||!!editingItem,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"}),\" \"]}),\" \"]}),\" \"]},program.ID_ProgDPO)),\" \"]}),\" \"]}),activeTab==='organizations'&&/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[\" \",\" \",/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",renderSortableHeader('№','ID_Org'),\" \",renderSortableHeader('Полное название','FName'),\" \",renderSortableHeader('Краткое название','SName'),\" \",/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"}),\" \"]})}),\" \",/*#__PURE__*/_jsxs(\"tbody\",{children:[\" \",sortedOrganizations.map((org,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",(editingItem===null||editingItem===void 0?void 0:editingItem.ID_Org)===org.ID_Org?/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"td\",{children:index+1}),\" \",/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingItem.FName,onChange:e=>handleChangeInline('FName',e.target.value)})}),\" \",/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingItem.SName,onChange:e=>handleChangeInline('SName',e.target.value)})}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),\" \"]}),\" \"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"td\",{children:index+1}),\" \",/*#__PURE__*/_jsx(\"td\",{children:org.FName}),\" \",/*#__PURE__*/_jsx(\"td\",{children:org.SName}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"actions-cell\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(org),disabled:!!addingItemType||!!editingItem,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(org.ID_Org),className:\"delete-button\",disabled:!!addingItemType||!!editingItem,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"}),\" \"]}),\" \"]}),\" \"]},org.ID_Org)),\" \"]}),\" \"]}),activeTab==='kks'&&/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[\" \",\" \",/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",renderSortableHeader('№','ID_KKS'),\" \",renderSortableHeader('Название','Name_KKS'),\" \",renderSortableHeader('Краткое обозначение','SName_KKS'),\" \",/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"}),\" \"]})}),\" \",/*#__PURE__*/_jsxs(\"tbody\",{children:[\" \",sortedKks.map((kksItem,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",(editingItem===null||editingItem===void 0?void 0:editingItem.ID_KKS)===kksItem.ID_KKS?/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"td\",{children:index+1}),\" \",/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingItem.Name_KKS,onChange:e=>handleChangeInline('Name_KKS',e.target.value)})}),\" \",/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingItem.SName_KKS,onChange:e=>handleChangeInline('SName_KKS',e.target.value)})}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),\" \"]}),\" \"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"td\",{children:index+1}),\" \",/*#__PURE__*/_jsx(\"td\",{children:kksItem.Name_KKS}),\" \",/*#__PURE__*/_jsx(\"td\",{children:kksItem.SName_KKS}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"actions-cell\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(kksItem),disabled:!!addingItemType||!!editingItem,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(kksItem.ID_KKS),className:\"delete-button\",disabled:!!addingItemType||!!editingItem,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"}),\" \"]}),\" \"]}),\" \"]},kksItem.ID_KKS)),\" \"]}),\" \"]}),activeTab==='workers'&&/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[\" \",\" \",/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",renderSortableHeader('№','ID_Worker'),\" \",renderSortableHeader('Логин','Login'),\" \",renderSortableHeader('ФИО Работника','FName_Worker'),\" \",renderSortableHeader('Роль','Role'),\" \",/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"}),\" \"]})}),\" \",/*#__PURE__*/_jsxs(\"tbody\",{children:[\" \",sortedWorkers.map((w,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",/*#__PURE__*/_jsx(\"td\",{children:index+1}),\" \",/*#__PURE__*/_jsx(\"td\",{children:w.Login}),\" \",/*#__PURE__*/_jsx(\"td\",{children:w.FName_Worker}),\" \",/*#__PURE__*/_jsx(\"td\",{children:displayRole(w.Role)}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"actions-cell\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(w),disabled:!!addingItemType||!!editingItem,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(w.ID_Worker),className:\"delete-button\",disabled:!!addingItemType||!!editingItem,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"}),\" \"]}),\" \"]},w.ID_Worker)),\" \"]}),\" \"]}),activeTab==='documents'&&/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[renderSortableHeader('№','ID_Document'),renderSortableHeader('Работник','WorkerName'),renderSortableHeader('Программа','ProgramName'),renderSortableHeader('Рег. номер','regnumber'),renderSortableHeader('Дата выдачи','DateIssue'),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedDocuments.map((doc,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:doc.WorkerName||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:doc.ProgramName||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:doc.regnumber||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(doc.DateIssue,'display')}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"actions-cell\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(doc),disabled:!!addingItemType||!!editingItem,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(doc.ID_Document),className:\"delete-button\",disabled:!!addingItemType||!!editingItem,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]},doc.ID_Document))})]})]}),\" \"]})// admin-panel\n;}export default AdminPanel;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","apiUrl","process","env","REACT_APP_API_URL","formatDate","dateStr","type","arguments","length","undefined","date","Date","isNaN","getTime","offset","getTimezoneOffset","adjustedDate","toISOString","slice","year","getFullYear","month","getMonth","toString","padStart","day","getDate","toLocaleDateString","e","console","error","AddItemForm","_ref","onSave","onCancel","programTypes","allOrganizations","newItem","setNewItem","handleChange","field","value","prev","handleSubmit","preventDefault","handleCancel","onSubmit","className","children","placeholder","required","Name_ProgDPO","onChange","target","id_type","disabled","map","pt","Name_Type","ID_Org","org","FName","onClick","SName","Name_KKS","SName_KKS","WorkerForm","_ref2","initialData","isEditing","workerData","setWorkerData","newPassword","setNewPassword","Role","handlePasswordChange","dataToSend","Password","alert","handleCancelClick","ID_Worker","FName_Worker","Login","parseInt","DocumentForm","_ref3","allWorkers","allPrograms","docData","setDocData","ID_ProgDPO","regnumber","formseries","formnumber","DateIssue","DataStart","DataEnd","ID_Document","htmlFor","id","w","p","AdminPanel","activeTab","setActiveTab","programs","setPrograms","organizations","setOrganizations","kks","setKks","workers","setWorkers","documents","setDocuments","loading","setLoading","setError","editingItem","setEditingItem","addingItemType","setAddingItemType","setProgramTypes","programTypesData","setProgramTypesData","setAllOrganizations","setAllWorkers","setAllPrograms","sortConfig","setSortConfig","key","direction","navigate","user","storedUser","localStorage","getItem","JSON","parse","removeItem","requestSort","getIdKeyForTab","tab","idKey","fetchData","forceAux","role","warn","log","endpoints","typesRes","orgsRes","workersRes","progsRes","Promise","all","url","get","fetchedTypes","data","err","auxErrorMsg","response","endpoint","config","workerId","params","userId","status","responseData","Array","isArray","message","mainErrorMsg","sortedPrograms","sortableItems","sort","a","b","sortedOrganizations","valA","valB","compareResult","String","localeCompare","sortedKks","sortedWorkers","nameA","toLowerCase","nameB","sortedDocuments","includes","dateA","dateB","strA","strB","handleEdit","item","handleChangeInline","handleSave","editedData","itemToSave","Error","put","_err$response","_err$response2","_err$response2$data","handleShowAddForm","handleCancelAdd","handleAddItem","newItemData","post","_err$response3","_err$response4","_err$response4$data","handleDelete","idToDelete","window","confirm","delete","_err$response5","_err$response6","_err$response6$data","displayRole","roleValue","renderSortableHeader","label","showLoadingIndicator","title","program","index","kksItem","ID_KKS","doc","WorkerName","ProgramName"],"sources":["D:/Amina/VScode/FQW_new/src/components/AdminPanel.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './AdminPanel.css';\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL; // Вынесем в глобальную область видимости файла\r\n\r\n// --- Вспомогательная функция для форматирования даты ---\r\nconst formatDate = (dateStr, type = 'date') => {\r\n    if (!dateStr) return ''; // Возвращаем пустую строку для input[type=date] или для отображения\r\n    try {\r\n        const date = new Date(dateStr);\r\n        if (isNaN(date.getTime())) return ''; // Некорректная дата\r\n\r\n        if (type === 'datetime-local') {\r\n             // Формат YYYY-MM-DDTHH:mm (пример) - нужен для input type=\"datetime-local\"\r\n             // Корректируем под часовой пояс, чтобы избежать смещения на день назад/вперед\r\n             const offset = date.getTimezoneOffset();\r\n             const adjustedDate = new Date(date.getTime() - (offset*60*1000));\r\n             return adjustedDate.toISOString().slice(0, 16);\r\n        } else if (type === 'date') {\r\n             // Формат YYYY-MM-DD (нужен для input type=\"date\")\r\n             const year = date.getFullYear();\r\n             const month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n             const day = date.getDate().toString().padStart(2, '0');\r\n             return `${year}-${month}-${day}`;\r\n        } else {\r\n             // Формат DD.MM.YYYY (для отображения в таблице)\r\n             return date.toLocaleDateString('ru-RU');\r\n        }\r\n    } catch (e) {\r\n        console.error(\"Ошибка форматирования даты:\", dateStr, e);\r\n        return ''; // Возвращаем пустую строку при ошибке\r\n    }\r\n};\r\n\r\n\r\n// --- Компонент AddItemForm (БЕЗ ИЗМЕНЕНИЙ) ---\r\nconst AddItemForm = ({ type, onSave, onCancel, programTypes = [], allOrganizations = [] }) => {\r\n    // ... (код AddItemForm остается прежним) ...\r\n    const [newItem, setNewItem] = useState({});\r\n    useEffect(() => { setNewItem({}); }, [type]);\r\n    const handleChange = (field, value) => { setNewItem(prev => ({ ...prev, [field]: value })); };\r\n    const handleSubmit = (e) => { e.preventDefault(); onSave(newItem); setNewItem({}); };\r\n    const handleCancel = (e) => { e.preventDefault(); setNewItem({}); onCancel(); };\r\n\r\n    if (type === 'programs') {\r\n        return ( <form onSubmit={handleSubmit} className=\"add-form\"> {/* ... поля для программы ... */}\r\n             <h4>Добавить программу</h4>\r\n                <input type=\"text\" placeholder=\"Название программы\" required value={newItem.Name_ProgDPO || ''} onChange={(e) => handleChange('Name_ProgDPO', e.target.value)} />\r\n                <select required value={newItem.id_type || ''} onChange={(e) => handleChange('id_type', e.target.value)}> <option value=\"\" disabled>Выберите тип</option> {programTypes.map(pt => <option key={pt.id_type} value={pt.id_type}>{pt.Name_Type}</option>)} </select>\r\n                <select required value={newItem.ID_Org || ''} onChange={(e) => handleChange('ID_Org', e.target.value)}> <option value=\"\" disabled>Выберите организацию</option> {allOrganizations.map(org => <option key={org.ID_Org} value={org.ID_Org}>{org.FName}</option>)} </select>\r\n                <div className=\"form-actions\"> <button type=\"submit\">Сохранить</button> <button type=\"button\" onClick={handleCancel}>Отмена</button> </div> </form> );\r\n    }\r\n    if (type === 'organizations') {\r\n       return ( <form onSubmit={handleSubmit} className=\"add-form\"> {/* ... поля для организации ... */}\r\n        <h4>Добавить организацию</h4>\r\n           <input type=\"text\" placeholder=\"Полное название\" required value={newItem.FName || ''} onChange={(e) => handleChange('FName', e.target.value)} />\r\n           <input type=\"text\" placeholder=\"Краткое название\" required value={newItem.SName || ''} onChange={(e) => handleChange('SName', e.target.value)} />\r\n           <div className=\"form-actions\"> <button type=\"submit\">Сохранить</button> <button type=\"button\" onClick={handleCancel}>Отмена</button> </div> </form> );\r\n    }\r\n     if (type === 'kks') {\r\n        return ( <form onSubmit={handleSubmit} className=\"add-form\"> {/* ... поля для KKS ... */}\r\n        <h4>Добавить KKS</h4>\r\n           <input type=\"text\" placeholder=\"Название KKS\" required value={newItem.Name_KKS || ''} onChange={(e) => handleChange('Name_KKS', e.target.value)} />\r\n           <input type=\"text\" placeholder=\"Краткое обозначение\" value={newItem.SName_KKS || ''} onChange={(e) => handleChange('SName_KKS', e.target.value)} />\r\n           <div className=\"form-actions\"> <button type=\"submit\">Сохранить</button> <button type=\"button\" onClick={handleCancel}>Отмена</button> </div> </form> );\r\n    }\r\n    return null;\r\n};\r\n\r\n// --- Компонент WorkerForm (БЕЗ ИЗМЕНЕНИЙ) ---\r\nconst WorkerForm = ({ initialData = {}, onSave, onCancel, isEditing = false }) => {\r\n    // ... (код WorkerForm остается прежним) ...\r\n    const [workerData, setWorkerData] = useState(initialData);\r\n    const [newPassword, setNewPassword] = useState('');\r\n    useEffect(() => { setWorkerData({ ...initialData, Role: initialData.Role !== undefined ? initialData.Role : '' }); setNewPassword(''); }, [initialData]);\r\n    const handleChange = (field, value) => { setWorkerData(prev => ({ ...prev, [field]: value })); };\r\n    const handlePasswordChange = (e) => { setNewPassword(e.target.value); };\r\n    const handleSubmit = (e) => { e.preventDefault(); const dataToSend = { ...workerData }; if (newPassword) { dataToSend.Password = newPassword; } else if (!isEditing) { alert('Пароль обязателен при создании пользователя.'); return; } onSave(dataToSend); };\r\n    const handleCancelClick = (e) => { e.preventDefault(); onCancel(); };\r\n    return ( <form onSubmit={handleSubmit} className=\"add-form user-form\"> <h4>{isEditing ? `Редактировать работника (ID: ${workerData.ID_Worker})` : 'Добавить работника'}</h4> <input type=\"text\" placeholder=\"ФИО Работника\" required value={workerData.FName_Worker || ''} onChange={(e) => handleChange('FName_Worker', e.target.value)} /> <input type=\"text\" placeholder=\"Логин\" required value={workerData.Login || ''} onChange={(e) => handleChange('Login', e.target.value)} /> <input type=\"password\" placeholder={isEditing ? 'Новый пароль (оставьте пустым, чтобы не менять)' : 'Пароль'} value={newPassword} onChange={handlePasswordChange} required={!isEditing}/> <select required value={workerData.Role} onChange={(e) => handleChange('Role', parseInt(e.target.value, 10))}> <option value=\"\" disabled>Выберите роль</option> <option value={0}>Работник ОУ</option> <option value={1}>Работник ЦДО (Админ)</option> </select> <div className=\"form-actions\"> <button type=\"submit\">Сохранить</button> <button type=\"button\" onClick={handleCancelClick}>Отмена</button> </div> </form> );\r\n};\r\n\r\n// --- НОВЫЙ Компонент формы для Документов ---\r\nconst DocumentForm = ({ initialData = {}, onSave, onCancel, isEditing = false, allWorkers = [], allPrograms = [] }) => {\r\n    const [docData, setDocData] = useState({});\r\n\r\n    useEffect(() => {\r\n        // Инициализация формы данными для редактирования или пустыми значениями\r\n        // Преобразуем даты в формат YYYY-MM-DD для input type=\"date\"\r\n        setDocData({\r\n            ID_Worker: initialData.ID_Worker || '',\r\n            ID_ProgDPO: initialData.ID_ProgDPO || '',\r\n            regnumber: initialData.regnumber || '',\r\n            formseries: initialData.formseries || '',\r\n            formnumber: initialData.formnumber || '',\r\n            DateIssue: formatDate(initialData.DateIssue, 'date'), // Преобразование\r\n            DataStart: formatDate(initialData.DataStart, 'date'), // Преобразование\r\n            DataEnd: formatDate(initialData.DataEnd, 'date')      // Преобразование\r\n        });\r\n    }, [initialData]);\r\n\r\n    const handleChange = (field, value) => {\r\n        setDocData(prev => ({ ...prev, [field]: value }));\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // Перед отправкой можно добавить валидацию, если нужно\r\n        const dataToSend = { ...docData };\r\n         // Если ID есть (при редактировании), добавляем его\r\n        if (isEditing && initialData.ID_Document) {\r\n            dataToSend.ID_Document = initialData.ID_Document;\r\n        }\r\n        onSave(dataToSend); // Вызываем колбэк сохранения\r\n    };\r\n\r\n    const handleCancelClick = (e) => {\r\n        e.preventDefault();\r\n        onCancel(); // Вызываем колбэк отмены\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"add-form document-form\">\r\n            <h4>{isEditing ? `Редактировать документ (ID: ${initialData.ID_Document})` : 'Добавить документ'}</h4>\r\n\r\n            {/* Выбор работника */}\r\n            <label htmlFor=\"doc-worker\">Работник:</label>\r\n            <select id=\"doc-worker\" required value={docData.ID_Worker} onChange={(e) => handleChange('ID_Worker', e.target.value ? parseInt(e.target.value, 10) : '')}>\r\n                <option value=\"\" disabled>-- Выберите работника --</option>\r\n                {allWorkers.map(w => <option key={w.ID_Worker} value={w.ID_Worker}>{w.FName_Worker} (ID: {w.ID_Worker})</option>)}\r\n            </select>\r\n\r\n             {/* Выбор программы */}\r\n             <label htmlFor=\"doc-program\">Программа ДПО:</label>\r\n             <select id=\"doc-program\" required value={docData.ID_ProgDPO} onChange={(e) => handleChange('ID_ProgDPO', e.target.value ? parseInt(e.target.value, 10) : '')}>\r\n                 <option value=\"\" disabled>-- Выберите программу --</option>\r\n                 {allPrograms.map(p => <option key={p.ID_ProgDPO} value={p.ID_ProgDPO}>{p.Name_ProgDPO}</option>)}\r\n             </select>\r\n\r\n            {/* Поля документа */}\r\n            <label htmlFor=\"doc-regnumber\">Регистрационный номер:</label>\r\n            <input id=\"doc-regnumber\" type=\"text\" placeholder=\"Рег. номер\" value={docData.regnumber} onChange={(e) => handleChange('regnumber', e.target.value)} />\r\n\r\n            <label htmlFor=\"doc-formseries\">Серия формы:</label>\r\n            <input id=\"doc-formseries\" type=\"text\" placeholder=\"Серия\" value={docData.formseries} onChange={(e) => handleChange('formseries', e.target.value)} />\r\n\r\n            <label htmlFor=\"doc-formnumber\">Номер формы:</label>\r\n            <input id=\"doc-formnumber\" type=\"text\" placeholder=\"Номер\" value={docData.formnumber} onChange={(e) => handleChange('formnumber', e.target.value)} />\r\n\r\n             {/* Даты */}\r\n             <label htmlFor=\"doc-dateissue\">Дата выдачи:</label>\r\n             <input id=\"doc-dateissue\" type=\"date\" value={docData.DateIssue} onChange={(e) => handleChange('DateIssue', e.target.value)} />\r\n\r\n             <label htmlFor=\"doc-datastart\">Дата начала:</label>\r\n             <input id=\"doc-datastart\" type=\"date\" value={docData.DataStart} onChange={(e) => handleChange('DataStart', e.target.value)} />\r\n\r\n             <label htmlFor=\"doc-dataend\">Дата окончания:</label>\r\n             <input id=\"doc-dataend\" type=\"date\" value={docData.DataEnd} onChange={(e) => handleChange('DataEnd', e.target.value)} />\r\n\r\n            <div className=\"form-actions\">\r\n                <button type=\"submit\">Сохранить</button>\r\n                <button type=\"button\" onClick={handleCancelClick}>Отмена</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\n\r\n// --- Основной компонент AdminPanel ---\r\nfunction AdminPanel() {\r\n    // Состояния\r\n    const [activeTab, setActiveTab] = useState('programs'); // 'programs', 'organizations', 'kks', 'workers', 'documents'\r\n    const [programs, setPrograms] = useState([]);\r\n    const [organizations, setOrganizations] = useState([]);\r\n    const [kks, setKks] = useState([]);\r\n    const [workers, setWorkers] = useState([]);\r\n    const [documents, setDocuments] = useState([]); // <<< НОВОЕ СОСТОЯНИЕ ДЛЯ ДОКУМЕНТОВ\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [editingItem, setEditingItem] = useState(null);\r\n    const [addingItemType, setAddingItemType] = useState(null);\r\n    const [programTypes, setProgramTypes] = useState([]);\r\n    const [programTypesData, setProgramTypesData] = useState([]);\r\n    const [allOrganizations, setAllOrganizations] = useState([]);\r\n    const [allWorkers, setAllWorkers] = useState([]); // <<< НУЖНО ДЛЯ ФОРМЫ ДОКУМЕНТОВ\r\n    const [allPrograms, setAllPrograms] = useState([]); // <<< НУЖНО ДЛЯ ФОРМЫ ДОКУМЕНТОВ\r\n    const [sortConfig, setSortConfig] = useState({ key: null, direction: 'ascending' });\r\n\r\n    const navigate = useNavigate();\r\n    // apiUrl определен глобально выше\r\n\r\n    // Получение пользователя (без изменений)\r\n    const user = useMemo(() => { /* ... */\r\n         const storedUser = localStorage.getItem('user');\r\n         try {\r\n             return storedUser ? JSON.parse(storedUser) : null;\r\n         } catch (e) {\r\n             console.error(\"Failed to parse user from localStorage\", e);\r\n             localStorage.removeItem('user');\r\n             return null;\r\n         }\r\n     }, []);\r\n\r\n    // --- Сортировка ---\r\n    const requestSort = (key) => { /* ... */\r\n        let direction = 'ascending';\r\n        if (sortConfig.key === key && sortConfig.direction === 'ascending') {\r\n            direction = 'descending';\r\n        }\r\n        setSortConfig({ key, direction });\r\n     };\r\n    const getIdKeyForTab = (tab) => {\r\n        switch (tab) {\r\n            case 'programs': return 'ID_ProgDPO';\r\n            case 'organizations': return 'ID_Org';\r\n            case 'kks': return 'ID_KKS';\r\n            case 'workers': return 'ID_Worker';\r\n            case 'documents': return 'ID_Document';\r\n            default: return null;\r\n        }\r\n    };\r\n    useEffect(() => { /* ... сброс сортировки и форм ... */\r\n        const idKey = getIdKeyForTab(activeTab);\r\n        if (idKey) {\r\n            setSortConfig({ key: idKey, direction: 'ascending' });\r\n        } else {\r\n            setSortConfig({ key: null, direction: 'ascending' });\r\n        }\r\n        setEditingItem(null);\r\n        setAddingItemType(null);\r\n    }, [activeTab]);\r\n\r\n    // --- Загрузка данных ---\r\n    const fetchData = useCallback(async (forceAux = false) => {\r\n        if (!user || user.role !== 1) { /* ... проверка админа ... */\r\n             console.warn(\"fetchData called without admin user, aborting.\");\r\n             setLoading(false);\r\n             setError(\"Доступ запрещен. Требуются права администратора.\");\r\n             return;\r\n         }\r\n        setLoading(true);\r\n        setError('');\r\n        console.log(`Workspaceing data. Active tab: ${activeTab}`);\r\n\r\n        // Загрузка вспомогательных данных (типы, орг, работники, программы)\r\n        // Добавили allPrograms и allWorkers\r\n        if (forceAux || programTypes.length === 0 || allOrganizations.length === 0 || allWorkers.length === 0 || allPrograms.length === 0 ) {\r\n            try {\r\n                console.log(\"Fetching auxiliary data (types, orgs, workers, programs)...\");\r\n                const endpoints = [\r\n                    `${apiUrl}/api/program-types`,\r\n                    `${apiUrl}/api/programs/types`,\r\n                    `${apiUrl}/api/organizations`,\r\n                    `${apiUrl}/api/workers/admin`, // Эндпоинт для ВСЕХ работников\r\n                    `${apiUrl}/api/programs`,       // Эндпоинт для ВСЕХ программ\r\n                ];\r\n                 // Обновляем Promise.all для 4х запросов\r\n                const [typesRes, orgsRes, workersRes, progsRes] = await Promise.all(\r\n                    endpoints.map(url => axios.get(url))\r\n                );\r\n                const fetchedTypes = typesRes.data || [];\r\n                setProgramTypes(fetchedTypes);     // Для dropdown в формах\r\n                setProgramTypesData(fetchedTypes);\r\n\r\n                setProgramTypes(typesRes.data || []);\r\n                setAllOrganizations(orgsRes.data || []);\r\n                setAllWorkers(workersRes.data || []); // Сохраняем всех работников\r\n                setAllPrograms(progsRes.data || []);   // Сохраняем все программы\r\n                console.log(\"Auxiliary data fetched.\");\r\n            } catch (err) {\r\n                console.error('Error fetching auxiliary data:', err);\r\n             const auxErrorMsg = 'Ошибка загрузки вспомогательных данных (типы, организации, работники, программы).';\r\n             setError(prev => prev ? `<span class=\"math-inline\">\\{prev\\}\\\\n</span>{auxErrorMsg}` : auxErrorMsg);\r\n              // Сброс состояний при ошибке загрузки вспомогательных данных\r\n              setProgramTypes([]);\r\n              setProgramTypesData([]); // <<< ДОБАВИТЬ\r\n              setAllOrganizations([]);\r\n              setAllWorkers([]);\r\n              setAllPrograms([]);\r\n            }\r\n        }\r\n\r\n        // Загрузка основных данных\r\n        try {\r\n            let response;\r\n            let endpoint;\r\n            let config = {};\r\n            switch (activeTab) {\r\n                case 'programs': endpoint = `${apiUrl}/api/programs`; break;\r\n                case 'organizations': endpoint = `${apiUrl}/api/organizations`; break;\r\n                case 'kks': endpoint = `${apiUrl}/api/kks`; break;\r\n                case 'workers': endpoint = `${apiUrl}/api/workers/admin`; break;\r\n                case 'documents':\r\n                    endpoint = `${apiUrl}/api/documents`;\r\n                    // <<< ДОБАВЛЯЕМ ПАРАМЕТРЫ ДЛЯ ЗАПРОСА ДОКУМЕНТОВ >>>\r\n                    if (user?.workerId && user?.role !== undefined) {\r\n                       config.params = {\r\n                           userId: user.workerId, // ID текущего админа\r\n                           role: user.role      // Роль текущего админа (должна быть 1)\r\n                       };\r\n                    } else {\r\n                        // Если вдруг нет данных админа, прерываем (хотя проверка есть выше)\r\n                        console.error(\"Admin user data (workerId, role) is missing for documents fetch.\");\r\n                        setError(\"Не удалось получить данные администратора для запроса.\");\r\n                        setLoading(false);\r\n                        return;\r\n                    }\r\n                    break; \r\n                default:\r\n                    console.warn(`Unknown activeTab: ${activeTab}`);\r\n                    setLoading(false);\r\n                    return;\r\n            }\r\n            console.log(`Attempting to fetch ${endpoint}...`, config); // Логируем конфиг\r\n            // <<< ИСПОЛЬЗУЕМ config В ЗАПРОСЕ >>>\r\n            response = await axios.get(endpoint, config); \r\n            console.log(`Received response from ${endpoint}`, response.status);\r\n\r\n            // Проверка на массив перед обновлением состояния\r\n            const responseData = Array.isArray(response.data) ? response.data : [];\r\n            if (!Array.isArray(response.data)) {\r\n                 console.warn(`API endpoint ${endpoint} did not return an array.`);\r\n            }\r\n\r\n            switch (activeTab) {\r\n                case 'programs': setPrograms(responseData); break;\r\n                case 'organizations': setOrganizations(responseData); setAllOrganizations(responseData); break;\r\n                case 'kks': setKks(responseData); break;\r\n                case 'workers': setWorkers(responseData); break;\r\n                case 'documents': setDocuments(responseData); break;\r\n            }\r\n        } catch (err) {\r\n            console.error(`Error fetching ${activeTab}:`, err.response || err.message || err);\r\n            const mainErrorMsg = `Ошибка загрузки данных для вкладки \"${activeTab}\".`;\r\n            setError(prev => prev ? `${prev}\\n${mainErrorMsg}` : mainErrorMsg);\r\n             // Очищаем соответствующее состояние при ошибке\r\n             switch (activeTab) {\r\n                 case 'programs': setPrograms([]); break;\r\n                 case 'organizations': setOrganizations([]); break;\r\n                 case 'kks': setKks([]); break;\r\n                 case 'workers': setWorkers([]); break;\r\n                 case 'documents': setDocuments([]); break;\r\n             }\r\n        } finally {\r\n            console.log(`Setting loading to false for ${activeTab}.`);\r\n            setLoading(false);\r\n        }\r\n    }, [activeTab, user, apiUrl, programTypes.length, allOrganizations.length, allWorkers.length, allPrograms.length]); // Добавили зависимости\r\n\r\n    useEffect(() => {\r\n         if (!user || user.role !== 1) {\r\n             navigate('/login');\r\n             return;\r\n         }\r\n         fetchData(true);\r\n     }, [user, navigate, fetchData]);\r\n\r\n    // --- Мемоизированные отсортированные списки ---\r\n    const sortedPrograms = useMemo(() => { \r\n        let sortableItems = [...programs]; if (sortConfig.key) { sortableItems.sort((a, b) => { if (a[sortConfig.key] < b[sortConfig.key]) { return sortConfig.direction === 'ascending' ? -1 : 1; } if (a[sortConfig.key] > b[sortConfig.key]) { return sortConfig.direction === 'ascending' ? 1 : -1; } return 0; }); } return sortableItems;\r\n     }, [programs, sortConfig]);\r\n    const sortedOrganizations = useMemo(() => { \r\n        let sortableItems = [...organizations]; if (sortConfig.key) { sortableItems.sort((a, b) => { const valA = a[sortConfig.key]; const valB = b[sortConfig.key]; const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA).localeCompare(String(valB)); return sortConfig.direction === 'ascending' ? compareResult : -compareResult; }); } return sortableItems;\r\n     }, [organizations, sortConfig]);\r\n    const sortedKks = useMemo(() => { \r\n        let sortableItems = [...kks]; if (sortConfig.key) { sortableItems.sort((a, b) => { const valA = a[sortConfig.key]; const valB = b[sortConfig.key]; const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA).localeCompare(String(valB)); return sortConfig.direction === 'ascending' ? compareResult : -compareResult; }); } return sortableItems;\r\n     }, [kks, sortConfig]);\r\n    const sortedWorkers = useMemo(() => { \r\n        let sortableItems = [...workers]; if (sortConfig.key) { sortableItems.sort((a, b) => { const valA = a[sortConfig.key]; const valB = b[sortConfig.key]; if (sortConfig.key === 'Role' && typeof valA === 'number' && typeof valB === 'number') { return sortConfig.direction === 'ascending' ? valA - valB : valB - valA; } if (sortConfig.key === 'FName_Worker') { const nameA = String(valA ?? '').toLowerCase(); const nameB = String(valB ?? '').toLowerCase(); if (nameA < nameB) return sortConfig.direction === 'ascending' ? -1 : 1; if (nameA > nameB) return sortConfig.direction === 'ascending' ? 1 : -1; return 0; } const compareResult = typeof valA === 'number' && typeof valB === 'number' ? valA - valB : String(valA ?? '').localeCompare(String(valB ?? '')); return sortConfig.direction === 'ascending' ? compareResult : -compareResult; }); } return sortableItems;\r\n    }, [workers, sortConfig]);\r\n    const sortedDocuments = useMemo(() => {\r\n        let sortableItems = [...documents];\r\n        if (sortConfig.key) {\r\n            sortableItems.sort((a, b) => {\r\n                const valA = a[sortConfig.key];\r\n                const valB = b[sortConfig.key];\r\n\r\n                // Сортировка по дате\r\n                 if (['DateIssue', 'DataStart', 'DataEnd'].includes(sortConfig.key)) {\r\n                    const dateA = valA ? new Date(valA).getTime() : 0;\r\n                    const dateB = valB ? new Date(valB).getTime() : 0;\r\n                     if (isNaN(dateA) && isNaN(dateB)) return 0;\r\n                     if (isNaN(dateA)) return sortConfig.direction === 'ascending' ? -1 : 1; // nulls/invalid first or last\r\n                     if (isNaN(dateB)) return sortConfig.direction === 'ascending' ? 1 : -1;\r\n                    return sortConfig.direction === 'ascending' ? dateA - dateB : dateB - dateA;\r\n                }\r\n\r\n                 // Сортировка по имени работника или программы\r\n                if (['WorkerName', 'ProgramName'].includes(sortConfig.key)) {\r\n                     const strA = String(valA ?? '').toLowerCase();\r\n                     const strB = String(valB ?? '').toLowerCase();\r\n                     if (strA < strB) return sortConfig.direction === 'ascending' ? -1 : 1;\r\n                     if (strA > strB) return sortConfig.direction === 'ascending' ? 1 : -1;\r\n                     return 0;\r\n                }\r\n\r\n                // Общая сортировка\r\n                const compareResult = typeof valA === 'number' && typeof valB === 'number'\r\n                    ? valA - valB\r\n                    : String(valA ?? '').localeCompare(String(valB ?? ''));\r\n\r\n                return sortConfig.direction === 'ascending' ? compareResult : -compareResult;\r\n            });\r\n        }\r\n        return sortableItems;\r\n    }, [documents, sortConfig]);\r\n\r\n    // --- Обработчики CRUD ---\r\n    const handleEdit = (item) => { setEditingItem(item); setAddingItemType(null); };\r\n    const handleCancel = () => { setEditingItem(null); };\r\n    const handleChangeInline = (field, value) => { setEditingItem(prev => ({ ...prev, [field]: value })); };\r\n    const handleSave = async (editedData) => {\r\n        const itemToSave = editedData || editingItem;\r\n        if (!itemToSave) return;\r\n        const idKey = getIdKeyForTab(activeTab);\r\n        const id = itemToSave[idKey];\r\n        if (id === undefined && activeTab !== 'documents') { // Для документов ID может не быть в itemToSave из формы\r\n             if (activeTab === 'documents' && editingItem?.ID_Document) {\r\n                 // Берем ID из исходного editingItem для документов\r\n                 id = editingItem.ID_Document;\r\n                 itemToSave.ID_Document = id; // Добавляем ID обратно для PUT запроса, если нужно\r\n             } else {\r\n                console.error(\"Cannot save item without ID\", itemToSave);\r\n                setError(\"Не удалось определить ID для сохранения.\");\r\n                return;\r\n             }\r\n        }\r\n        console.log(`Saving edited item (ID: ${id}, Tab: ${activeTab}):`, itemToSave);\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            let endpoint;\r\n            switch (activeTab) {\r\n                case 'programs': endpoint = `${apiUrl}/api/programs/${id}`; break;\r\n                case 'organizations': endpoint = `${apiUrl}/api/organizations/${id}`; break;\r\n                case 'kks': endpoint = `${apiUrl}/api/kks/${id}`; break;\r\n                case 'workers': endpoint = `${apiUrl}/api/workers/${id}`; break;\r\n                case 'documents': endpoint = `${apiUrl}/api/documents/${id}`; break; // <<< ДОБАВЛЕНО (нужен PUT /api/documents/:id)\r\n                default: throw new Error(\"Неизвестная вкладка для сохранения\");\r\n            }\r\n            await axios.put(endpoint, itemToSave);\r\n            setEditingItem(null);\r\n            await fetchData();\r\n            console.log(`Item (ID: ${id}) saved successfully.`);\r\n        } catch (err) {\r\n            console.error('Ошибка при сохранении изменений:', err.response?.data || err.message || err);\r\n            setError(err.response?.data?.error || 'Ошибка при сохранении данных');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    const handleShowAddForm = () => { setAddingItemType(activeTab); setEditingItem(null); };\r\n    const handleCancelAdd = () => { setAddingItemType(null); };\r\n    const handleAddItem = async (newItemData) => { // Добавление (POST)\r\n        const type = addingItemType;\r\n        if (!type) return;\r\n        console.log(`Adding new ${type}:`, newItemData);\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            let endpoint;\r\n            switch (type) {\r\n                case 'programs': endpoint = `${apiUrl}/api/programs`; break;\r\n                case 'organizations': endpoint = `${apiUrl}/api/organizations`; break;\r\n                case 'kks': endpoint = `${apiUrl}/api/kks`; break;\r\n                case 'workers': endpoint = `${apiUrl}/api/workers`; break;\r\n                case 'documents': endpoint = `${apiUrl}/api/documents`; break;\r\n                default: throw new Error(\"Неизвестный тип для добавления\");\r\n            }\r\n            await axios.post(endpoint, newItemData);\r\n            setAddingItemType(null);\r\n            await fetchData();\r\n            console.log(`Item of type ${type} added successfully.`);\r\n        } catch (err) {\r\n            console.error(`Ошибка при добавлении ${type}:`, err.response?.data || err.message || err);\r\n            setError(err.response?.data?.error || `Ошибка при добавлении элемента`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    const handleDelete = async (idToDelete) => { // Удаление (DELETE)\r\n        if (!window.confirm('Вы уверены, что хотите удалить этот элемент?')) { return; }\r\n        const idKey = getIdKeyForTab(activeTab);\r\n        console.log(`Deleting item with ID: ${idToDelete} (Key: ${idKey}) on tab: ${activeTab}`);\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            let endpoint;\r\n            switch (activeTab) {\r\n                case 'programs': endpoint = `${apiUrl}/api/programs/${idToDelete}`; break;\r\n                case 'organizations': endpoint = `${apiUrl}/api/organizations/${idToDelete}`; break;\r\n                case 'kks': endpoint = `${apiUrl}/api/kks/${idToDelete}`; break;\r\n                case 'workers': endpoint = `${apiUrl}/api/workers/${idToDelete}`; break;\r\n                case 'documents': endpoint = `${apiUrl}/api/documents/${idToDelete}`; break; // <<< ДОБАВЛЕНО (нужен DELETE /api/documents/:id)\r\n                default: throw new Error(\"Неизвестная вкладка для удаления\");\r\n            }\r\n            await axios.delete(endpoint);\r\n            if (editingItem && editingItem[idKey] === idToDelete) { setEditingItem(null); }\r\n            await fetchData();\r\n            console.log(`Item (ID: ${idToDelete}) deleted successfully.`);\r\n        } catch (err) {\r\n            console.error(`Ошибка при удалении элемента (ID: ${idToDelete}):`, err.response?.data || err.message || err);\r\n            setError(err.response?.data?.error || 'Ошибка при удалении элемента. Возможно, на него есть ссылки.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- Вспомогательные функции рендеринга ---\r\n    const displayRole = (roleValue) => { /* ... */ return roleValue === 1 ? 'Работник ЦДО' : roleValue === 0 ? 'Работник ОУ' : 'Неизвестно'; };\r\n    const renderSortableHeader = (label, key) => ( /* ... */ <th onClick={() => requestSort(key)} className=\"sortable-header\"> {label} {sortConfig.key === key ? (sortConfig.direction === 'ascending' ? ' ▲' : ' ▼') : ' ↕'} </th> );\r\n\r\n    // --- Основной рендеринг компонента ---\r\n    if (!user && loading) return <div className=\"loading\">Проверка авторизации и загрузка данных...</div>;\r\n    if (!user) return <div className=\"error\">Не удалось получить данные пользователя. <button onClick={() => navigate('/login')}>Войти</button></div>;\r\n    if (user.role !== 1) return <div className=\"error\">Доступ запрещен.</div>;\r\n    const showLoadingIndicator = loading && !error;\r\n\r\n    return (\r\n        <div className=\"admin-panel\">\r\n            {/* Шапка */}\r\n            <div className=\"admin-header\">\r\n                <h1>Панель администратора</h1>\r\n                <div className=\"header-buttons\">\r\n                   <button onClick={() => navigate('/admin')} className=\"back-button\">Назад</button>\r\n                   <button onClick={() => { localStorage.removeItem('user'); navigate('/login'); }} className=\"logout-button\">Выйти</button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Вкладки */}\r\n            <div className=\"admin-tabs\">\r\n                <button className={`tab-button ${activeTab === 'programs' ? 'active' : ''}`} onClick={() => setActiveTab('programs')}>Программы</button>\r\n                <button className={`tab-button ${activeTab === 'organizations' ? 'active' : ''}`} onClick={() => setActiveTab('organizations')}>Организации</button>\r\n                <button className={`tab-button ${activeTab === 'kks' ? 'active' : ''}`} onClick={() => setActiveTab('kks')}>ККС</button>\r\n                <button className={`tab-button ${activeTab === 'workers' ? 'active' : ''}`} onClick={() => setActiveTab('workers')}>Работники</button>\r\n                {/* <<< ДОБАВЛЕНА ВКЛАДКА >>> */}\r\n                <button className={`tab-button ${activeTab === 'documents' ? 'active' : ''}`} onClick={() => setActiveTab('documents')}>Документы</button>\r\n            </div>\r\n\r\n            {/* Индикатор загрузки и ошибки */}\r\n            {showLoadingIndicator && <div className=\"loading-inline\">Обновление данных...</div>}\r\n            {error && <div className=\"error-inline\">{error} <button onClick={() => setError('')} title=\"Закрыть ошибку\">×</button></div>}\r\n\r\n            {/* Основной контент */}\r\n            <div className=\"admin-content\">\r\n\r\n                 {/* Формы добавления/редактирования */}\r\n                 {(addingItemType === 'workers' || (editingItem && activeTab === 'workers')) && ( <WorkerForm key={editingItem ? editingItem.ID_Worker : 'add-worker'} initialData={editingItem || {}} onSave={editingItem ? handleSave : handleAddItem} onCancel={editingItem ? handleCancel : handleCancelAdd} isEditing={!!editingItem} /> )}\r\n                 {addingItemType && addingItemType !== 'workers' && addingItemType !== 'documents' && ( <AddItemForm key={`add-${addingItemType}`} type={addingItemType} onSave={handleAddItem} onCancel={handleCancelAdd} programTypes={programTypes} allOrganizations={allOrganizations} /> )}\r\n                 {/* <<< УСЛОВИЕ ДЛЯ ФОРМЫ ДОКУМЕНТОВ >>> */}\r\n                 {(addingItemType === 'documents' || (editingItem && activeTab === 'documents')) && (\r\n                     <DocumentForm\r\n                         key={editingItem ? editingItem.ID_Document : 'add-document'}\r\n                         initialData={editingItem || {}}\r\n                         onSave={editingItem ? handleSave : handleAddItem}\r\n                         onCancel={editingItem ? handleCancel : handleCancelAdd}\r\n                         isEditing={!!editingItem}\r\n                         allWorkers={workers} // Передаем список работников (не allWorkers, а текущий загруженный)\r\n                         allPrograms={allPrograms} // Передаем список программ\r\n                     />\r\n                 )}\r\n\r\n\r\n                {/* Кнопка \"Добавить\" */}\r\n                {!editingItem && !addingItemType && (\r\n                    <button onClick={handleShowAddForm} className=\"add-button\">\r\n                        Добавить {\r\n                            activeTab === 'programs' ? 'программу' :\r\n                            activeTab === 'organizations' ? 'организацию' :\r\n                            activeTab === 'kks' ? 'KKS' :\r\n                            activeTab === 'workers' ? 'работника' :\r\n                            activeTab === 'documents' ? 'документ' : '' // <<< ДОБАВЛЕНО\r\n                        }\r\n                    </button>\r\n                )}\r\n\r\n                {/* Таблица Программ */}\r\n                {activeTab === 'programs' && ( <table className=\"admin-table\"> {/* ... код таблицы ... */} <thead><tr> {renderSortableHeader('№', 'ID_ProgDPO')} {renderSortableHeader('Название', 'Name_ProgDPO')} {renderSortableHeader('Тип', 'Name_Type')} <th>Действия</th> </tr></thead> <tbody> {sortedPrograms.map((program, index) => ( <tr key={program.ID_ProgDPO}> {editingItem?.ID_ProgDPO === program.ID_ProgDPO ? (<> <td>{index + 1}</td> <td> <input type=\"text\" value={editingItem.Name_ProgDPO} onChange={(e) => handleChangeInline('Name_ProgDPO', e.target.value)} /> </td> <td> {program.Name_Type || 'N/A'} </td> <td> <button onClick={() => handleSave()}>Сохранить</button> <button onClick={handleCancel}>Отмена</button> </td> </>) : (<> <td>{index + 1}</td> <td>{program.Name_ProgDPO}</td> <td>{program.Name_Type || 'N/A'}</td> <td className=\"actions-cell\"> <button onClick={() => handleEdit(program)} disabled={!!addingItemType || !!editingItem}>Редакт.</button> <button onClick={() => handleDelete(program.ID_ProgDPO)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button> </td> </> )} </tr> ))} </tbody> </table> )}\r\n                 {/* Таблица Организаций */}\r\n                 {activeTab === 'organizations' && ( <table className=\"admin-table\"> {/* ... код таблицы ... */} <thead><tr> {renderSortableHeader('№', 'ID_Org')} {renderSortableHeader('Полное название', 'FName')} {renderSortableHeader('Краткое название', 'SName')} <th>Действия</th> </tr></thead> <tbody> {sortedOrganizations.map((org, index) => ( <tr key={org.ID_Org}> {editingItem?.ID_Org === org.ID_Org ? (<> <td>{index + 1}</td> <td><input type=\"text\" value={editingItem.FName} onChange={(e) => handleChangeInline('FName', e.target.value)} /></td> <td><input type=\"text\" value={editingItem.SName} onChange={(e) => handleChangeInline('SName', e.target.value)} /></td> <td> <button onClick={handleSave}>Сохранить</button> <button onClick={handleCancel}>Отмена</button> </td> </>) : (<> <td>{index + 1}</td> <td>{org.FName}</td> <td>{org.SName}</td> <td className=\"actions-cell\"> <button onClick={() => handleEdit(org)} disabled={!!addingItemType || !!editingItem}>Редакт.</button> <button onClick={() => handleDelete(org.ID_Org)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button> </td> </> )} </tr> ))} </tbody> </table> )}\r\n                 {/* Таблица KKS */}\r\n                 {activeTab === 'kks' && ( <table className=\"admin-table\"> {/* ... код таблицы ... */} <thead><tr> {renderSortableHeader('№', 'ID_KKS')} {renderSortableHeader('Название', 'Name_KKS')} {renderSortableHeader('Краткое обозначение', 'SName_KKS')} <th>Действия</th> </tr></thead> <tbody> {sortedKks.map((kksItem, index) => ( <tr key={kksItem.ID_KKS}> {editingItem?.ID_KKS === kksItem.ID_KKS ? (<> <td>{index + 1}</td> <td><input type=\"text\" value={editingItem.Name_KKS} onChange={(e) => handleChangeInline('Name_KKS', e.target.value)} /></td> <td><input type=\"text\" value={editingItem.SName_KKS} onChange={(e) => handleChangeInline('SName_KKS', e.target.value)} /></td> <td> <button onClick={handleSave}>Сохранить</button> <button onClick={handleCancel}>Отмена</button> </td> </>) : (<> <td>{index + 1}</td> <td>{kksItem.Name_KKS}</td> <td>{kksItem.SName_KKS}</td> <td className=\"actions-cell\"> <button onClick={() => handleEdit(kksItem)} disabled={!!addingItemType || !!editingItem}>Редакт.</button> <button onClick={() => handleDelete(kksItem.ID_KKS)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button> </td> </> )} </tr> ))} </tbody> </table> )}\r\n                 {/* Таблица Работников */}\r\n                 {activeTab === 'workers' && ( <table className=\"admin-table\"> {/* ... код таблицы ... */} <thead><tr> {renderSortableHeader('№', 'ID_Worker')} {renderSortableHeader('Логин', 'Login')} {renderSortableHeader('ФИО Работника', 'FName_Worker')} {renderSortableHeader('Роль', 'Role')} <th>Действия</th> </tr></thead> <tbody> {sortedWorkers.map((w, index) => ( <tr key={w.ID_Worker}> <td>{index + 1}</td> <td>{w.Login}</td> <td>{w.FName_Worker}</td> <td>{displayRole(w.Role)}</td> <td className=\"actions-cell\"> <button onClick={() => handleEdit(w)} disabled={!!addingItemType || !!editingItem}>Редакт.</button> <button onClick={() => handleDelete(w.ID_Worker)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button> </td> </tr> ))} </tbody> </table> )}\r\n\r\n                {/* <<< НОВАЯ ТАБЛИЦА ДЛЯ ДОКУМЕНТОВ >>> */}\r\n                {activeTab === 'documents' && (\r\n                    <table className=\"admin-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                {renderSortableHeader('№', 'ID_Document')}\r\n                                {renderSortableHeader('Работник', 'WorkerName')}\r\n                                {renderSortableHeader('Программа', 'ProgramName')}\r\n                                {renderSortableHeader('Рег. номер', 'regnumber')}\r\n                                {/* Можно добавить другие колонки: Серия, Номер формы */}\r\n                                {renderSortableHeader('Дата выдачи', 'DateIssue')}\r\n                                <th>Действия</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {sortedDocuments.map((doc, index) => (\r\n                                <tr key={doc.ID_Document}>\r\n                                    {/* Редактирование документов через форму, не inline */}\r\n                                    <td>{index + 1}</td>\r\n                                    <td>{doc.WorkerName || 'N/A'}</td>\r\n                                    <td>{doc.ProgramName || 'N/A'}</td>\r\n                                    <td>{doc.regnumber || 'N/A'}</td>\r\n                                    <td>{formatDate(doc.DateIssue, 'display')}</td> {/* Используем formatDate для отображения */}\r\n                                    <td className=\"actions-cell\">\r\n                                        {/* Кнопка редактирования открывает DocumentForm */}\r\n                                        <button onClick={() => handleEdit(doc)} disabled={!!addingItemType || !!editingItem}>Редакт.</button>\r\n                                        {/* Кнопка удаления */}\r\n                                        <button onClick={() => handleDelete(doc.ID_Document)} className=\"delete-button\" disabled={!!addingItemType || !!editingItem}>Удалить</button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                 )}\r\n\r\n            </div> {/* admin-content */}\r\n        </div> // admin-panel\r\n    );\r\n}\r\n\r\nexport default AdminPanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}